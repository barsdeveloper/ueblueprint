/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const e=window,t=e.ShadowRoot&&(void 0===e.ShadyCSS||e.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,i=Symbol(),n=new WeakMap;class s{constructor(e,t,n){if(this._$cssResult$=!0,n!==i)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const i=this.t;if(t&&void 0===e){const t=void 0!==i&&1===i.length;t&&(e=n.get(i)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),t&&n.set(i,e))}return e}toString(){return this.cssText}}const r=(e,...t)=>{const n=1===e.length?e[0]:t.reduce(((t,i,n)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+e[n+1]),e[0]);return new s(n,e,i)},a=t?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const i of e.cssRules)t+=i.cssText;return(e=>new s("string"==typeof e?e:e+"",void 0,i))(t)})(e):e
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */;var o;const l=window,u=l.trustedTypes,c=u?u.emptyScript:"",h=l.reactiveElementPolyfillSupport,d={toAttribute(e,t){switch(t){case Boolean:e=e?c:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let i=e;switch(t){case Boolean:i=null!==e;break;case Number:i=null===e?null:Number(e);break;case Object:case Array:try{i=JSON.parse(e)}catch(e){i=null}}return i}},p=(e,t)=>t!==e&&(t==t||e==e),m={attribute:!0,type:String,converter:d,reflect:!1,hasChanged:p};class g extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(e){var t;this.finalize(),(null!==(t=this.h)&&void 0!==t?t:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach(((t,i)=>{const n=this._$Ep(i,t);void 0!==n&&(this._$Ev.set(n,i),e.push(n))})),e}static createProperty(e,t=m){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){const i="symbol"==typeof e?Symbol():"__"+e,n=this.getPropertyDescriptor(e,i,t);void 0!==n&&Object.defineProperty(this.prototype,e,n)}}static getPropertyDescriptor(e,t,i){return{get(){return this[t]},set(n){const s=this[e];this[t]=n,this.requestUpdate(e,s,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||m}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),void 0!==e.h&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const e=this.properties,t=[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)];for(const i of t)this.createProperty(i,e[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const i=new Set(e.flat(1/0).reverse());for(const e of i)t.unshift(a(e))}else void 0!==e&&t.push(a(e));return t}static _$Ep(e,t){const i=t.attribute;return!1===i?void 0:"string"==typeof i?i:"string"==typeof e?e.toLowerCase():void 0}u(){var e;this._$E_=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(e=this.constructor.h)||void 0===e||e.forEach((e=>e(this)))}addController(e){var t,i;(null!==(t=this._$ES)&&void 0!==t?t:this._$ES=[]).push(e),void 0!==this.renderRoot&&this.isConnected&&(null===(i=e.hostConnected)||void 0===i||i.call(e))}removeController(e){var t;null===(t=this._$ES)||void 0===t||t.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach(((e,t)=>{this.hasOwnProperty(t)&&(this._$Ei.set(t,this[t]),delete this[t])}))}createRenderRoot(){var i;const n=null!==(i=this.shadowRoot)&&void 0!==i?i:this.attachShadow(this.constructor.shadowRootOptions);return((i,n)=>{t?i.adoptedStyleSheets=n.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet)):n.forEach((t=>{const n=document.createElement("style"),s=e.litNonce;void 0!==s&&n.setAttribute("nonce",s),n.textContent=t.cssText,i.appendChild(n)}))})(n,this.constructor.elementStyles),n}connectedCallback(){var e;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostConnected)||void 0===t?void 0:t.call(e)}))}enableUpdating(e){}disconnectedCallback(){var e;null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostDisconnected)||void 0===t?void 0:t.call(e)}))}attributeChangedCallback(e,t,i){this._$AK(e,i)}_$EO(e,t,i=m){var n;const s=this.constructor._$Ep(e,i);if(void 0!==s&&!0===i.reflect){const r=(void 0!==(null===(n=i.converter)||void 0===n?void 0:n.toAttribute)?i.converter:d).toAttribute(t,i.type);this._$El=e,null==r?this.removeAttribute(s):this.setAttribute(s,r),this._$El=null}}_$AK(e,t){var i;const n=this.constructor,s=n._$Ev.get(e);if(void 0!==s&&this._$El!==s){const e=n.getPropertyOptions(s),r="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==(null===(i=e.converter)||void 0===i?void 0:i.fromAttribute)?e.converter:d;this._$El=s,this[s]=r.fromAttribute(t,e.type),this._$El=null}}requestUpdate(e,t,i){let n=!0;void 0!==e&&(((i=i||this.constructor.getPropertyOptions(e)).hasChanged||p)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),!0===i.reflect&&this._$El!==e&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(e,i))):n=!1),!this.isUpdatePending&&n&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach(((e,t)=>this[t]=e)),this._$Ei=void 0);let t=!1;const i=this._$AL;try{t=this.shouldUpdate(i),t?(this.willUpdate(i),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostUpdate)||void 0===t?void 0:t.call(e)})),this.update(i)):this._$Ek()}catch(e){throw t=!1,this._$Ek(),e}t&&this._$AE(i)}willUpdate(e){}_$AE(e){var t;null===(t=this._$ES)||void 0===t||t.forEach((e=>{var t;return null===(t=e.hostUpdated)||void 0===t?void 0:t.call(e)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){void 0!==this._$EC&&(this._$EC.forEach(((e,t)=>this._$EO(t,this[t],e))),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var b;g.finalized=!0,g.elementProperties=new Map,g.elementStyles=[],g.shadowRootOptions={mode:"open"},null==h||h({ReactiveElement:g}),(null!==(o=l.reactiveElementVersions)&&void 0!==o?o:l.reactiveElementVersions=[]).push("1.4.2");const v=window,f=v.trustedTypes,y=f?f.createPolicy("lit-html",{createHTML:e=>e}):void 0,w=`lit$${(Math.random()+"").slice(9)}$`,E="?"+w,S=`<${E}>`,C=document,P=(e="")=>C.createComment(e),k=e=>null===e||"object"!=typeof e&&"function"!=typeof e,x=Array.isArray,L=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,N=/-->/g,T=/>/g,A=RegExp(">|[ \t\n\f\r](?:([^\\s\"'>=/]+)([ \t\n\f\r]*=[ \t\n\f\r]*(?:[^ \t\n\f\r\"'`<>=]|(\"|')|))|$)","g"),M=/'/g,$=/"/g,D=/^(?:script|style|textarea|title)$/i,B=(e=>(t,...i)=>({_$litType$:e,strings:t,values:i}))(1),H=Symbol.for("lit-noChange"),O=Symbol.for("lit-nothing"),z=new WeakMap,V=C.createTreeWalker(C,129,null,!1),I=(e,t)=>{const i=e.length-1,n=[];let s,r=2===t?"<svg>":"",a=L;for(let t=0;t<i;t++){const i=e[t];let o,l,u=-1,c=0;for(;c<i.length&&(a.lastIndex=c,l=a.exec(i),null!==l);)c=a.lastIndex,a===L?"!--"===l[1]?a=N:void 0!==l[1]?a=T:void 0!==l[2]?(D.test(l[2])&&(s=RegExp("</"+l[2],"g")),a=A):void 0!==l[3]&&(a=A):a===A?">"===l[0]?(a=null!=s?s:L,u=-1):void 0===l[1]?u=-2:(u=a.lastIndex-l[2].length,o=l[1],a=void 0===l[3]?A:'"'===l[3]?$:M):a===$||a===M?a=A:a===N||a===T?a=L:(a=A,s=void 0);const h=a===A&&e[t+1].startsWith("/>")?" ":"";r+=a===L?i+S:u>=0?(n.push(o),i.slice(0,u)+"$lit$"+i.slice(u)+w+h):i+w+(-2===u?(n.push(void 0),t):h)}const o=r+(e[i]||"<?>")+(2===t?"</svg>":"");if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==y?y.createHTML(o):o,n]};class R{constructor({strings:e,_$litType$:t},i){let n;this.parts=[];let s=0,r=0;const a=e.length-1,o=this.parts,[l,u]=I(e,t);if(this.el=R.createElement(l,i),V.currentNode=this.el.content,2===t){const e=this.el.content,t=e.firstChild;t.remove(),e.append(...t.childNodes)}for(;null!==(n=V.nextNode())&&o.length<a;){if(1===n.nodeType){if(n.hasAttributes()){const e=[];for(const t of n.getAttributeNames())if(t.endsWith("$lit$")||t.startsWith(w)){const i=u[r++];if(e.push(t),void 0!==i){const e=n.getAttribute(i.toLowerCase()+"$lit$").split(w),t=/([.?@])?(.*)/.exec(i);o.push({type:1,index:s,name:t[2],strings:e,ctor:"."===t[1]?U:"?"===t[1]?W:"@"===t[1]?Y:j})}else o.push({type:6,index:s})}for(const t of e)n.removeAttribute(t)}if(D.test(n.tagName)){const e=n.textContent.split(w),t=e.length-1;if(t>0){n.textContent=f?f.emptyScript:"";for(let i=0;i<t;i++)n.append(e[i],P()),V.nextNode(),o.push({type:2,index:++s});n.append(e[t],P())}}}else if(8===n.nodeType)if(n.data===E)o.push({type:2,index:s});else{let e=-1;for(;-1!==(e=n.data.indexOf(w,e+1));)o.push({type:7,index:s}),e+=w.length-1}s++}}static createElement(e,t){const i=C.createElement("template");return i.innerHTML=e,i}}function _(e,t,i=e,n){var s,r,a,o;if(t===H)return t;let l=void 0!==n?null===(s=i._$Co)||void 0===s?void 0:s[n]:i._$Cl;const u=k(t)?void 0:t._$litDirective$;return(null==l?void 0:l.constructor)!==u&&(null===(r=null==l?void 0:l._$AO)||void 0===r||r.call(l,!1),void 0===u?l=void 0:(l=new u(e),l._$AT(e,i,n)),void 0!==n?(null!==(a=(o=i)._$Co)&&void 0!==a?a:o._$Co=[])[n]=l:i._$Cl=l),void 0!==l&&(t=_(e,l._$AS(e,t.values),l,n)),t}class F{constructor(e,t){this.u=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}v(e){var t;const{el:{content:i},parts:n}=this._$AD,s=(null!==(t=null==e?void 0:e.creationScope)&&void 0!==t?t:C).importNode(i,!0);V.currentNode=s;let r=V.nextNode(),a=0,o=0,l=n[0];for(;void 0!==l;){if(a===l.index){let t;2===l.type?t=new G(r,r.nextSibling,this,e):1===l.type?t=new l.ctor(r,l.name,l.strings,this,e):6===l.type&&(t=new q(r,this,e)),this.u.push(t),l=n[++o]}a!==(null==l?void 0:l.index)&&(r=V.nextNode(),a++)}return s}p(e){let t=0;for(const i of this.u)void 0!==i&&(void 0!==i.strings?(i._$AI(e,i,t),t+=i.strings.length-2):i._$AI(e[t])),t++}}class G{constructor(e,t,i,n){var s;this.type=2,this._$AH=O,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=i,this.options=n,this._$Cm=null===(s=null==n?void 0:n.isConnected)||void 0===s||s}get _$AU(){var e,t;return null!==(t=null===(e=this._$AM)||void 0===e?void 0:e._$AU)&&void 0!==t?t:this._$Cm}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===e.nodeType&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=_(this,e,t),k(e)?e===O||null==e||""===e?(this._$AH!==O&&this._$AR(),this._$AH=O):e!==this._$AH&&e!==H&&this.g(e):void 0!==e._$litType$?this.$(e):void 0!==e.nodeType?this.T(e):(e=>x(e)||"function"==typeof(null==e?void 0:e[Symbol.iterator]))(e)?this.k(e):this.g(e)}O(e,t=this._$AB){return this._$AA.parentNode.insertBefore(e,t)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}g(e){this._$AH!==O&&k(this._$AH)?this._$AA.nextSibling.data=e:this.T(C.createTextNode(e)),this._$AH=e}$(e){var t;const{values:i,_$litType$:n}=e,s="number"==typeof n?this._$AC(e):(void 0===n.el&&(n.el=R.createElement(n.h,this.options)),n);if((null===(t=this._$AH)||void 0===t?void 0:t._$AD)===s)this._$AH.p(i);else{const e=new F(s,this),t=e.v(this.options);e.p(i),this.T(t),this._$AH=e}}_$AC(e){let t=z.get(e.strings);return void 0===t&&z.set(e.strings,t=new R(e)),t}k(e){x(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let i,n=0;for(const s of e)n===t.length?t.push(i=new G(this.O(P()),this.O(P()),this,this.options)):i=t[n],i._$AI(s),n++;n<t.length&&(this._$AR(i&&i._$AB.nextSibling,n),t.length=n)}_$AR(e=this._$AA.nextSibling,t){var i;for(null===(i=this._$AP)||void 0===i||i.call(this,!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){var t;void 0===this._$AM&&(this._$Cm=e,null===(t=this._$AP)||void 0===t||t.call(this,e))}}class j{constructor(e,t,i,n,s){this.type=1,this._$AH=O,this._$AN=void 0,this.element=e,this.name=t,this._$AM=n,this.options=s,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=O}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,i,n){const s=this.strings;let r=!1;if(void 0===s)e=_(this,e,t,0),r=!k(e)||e!==this._$AH&&e!==H,r&&(this._$AH=e);else{const n=e;let a,o;for(e=s[0],a=0;a<s.length-1;a++)o=_(this,n[i+a],t,a),o===H&&(o=this._$AH[a]),r||(r=!k(o)||o!==this._$AH[a]),o===O?e=O:e!==O&&(e+=(null!=o?o:"")+s[a+1]),this._$AH[a]=o}r&&!n&&this.j(e)}j(e){e===O?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=e?e:"")}}class U extends j{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===O?void 0:e}}const X=f?f.emptyScript:"";class W extends j{constructor(){super(...arguments),this.type=4}j(e){e&&e!==O?this.element.setAttribute(this.name,X):this.element.removeAttribute(this.name)}}class Y extends j{constructor(e,t,i,n,s){super(e,t,i,n,s),this.type=5}_$AI(e,t=this){var i;if((e=null!==(i=_(this,e,t,0))&&void 0!==i?i:O)===H)return;const n=this._$AH,s=e===O&&n!==O||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,r=e!==O&&(n===O||s);s&&this.element.removeEventListener(this.name,this,n),r&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,i;"function"==typeof this._$AH?this._$AH.call(null!==(i=null===(t=this.options)||void 0===t?void 0:t.host)&&void 0!==i?i:this.element,e):this._$AH.handleEvent(e)}}class q{constructor(e,t,i){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(e){_(this,e)}}const K=v.litHtmlPolyfillSupport;null==K||K(R,G),(null!==(b=v.litHtmlVersions)&&void 0!==b?b:v.litHtmlVersions=[]).push("2.4.0");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var Z,J;class Q extends g{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,t;const i=super.createRenderRoot();return null!==(e=(t=this.renderOptions).renderBefore)&&void 0!==e||(t.renderBefore=i.firstChild),i}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=((e,t,i)=>{var n,s;const r=null!==(n=null==i?void 0:i.renderBefore)&&void 0!==n?n:t;let a=r._$litPart$;if(void 0===a){const e=null!==(s=null==i?void 0:i.renderBefore)&&void 0!==s?s:null;r._$litPart$=a=new G(t.insertBefore(P(),e),e,void 0,null!=i?i:{})}return a._$AI(e),a})(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!1)}render(){return H}}Q.finalized=!0,Q._$litElement$=!0,null===(Z=globalThis.litElementHydrateSupport)||void 0===Z||Z.call(globalThis,{LitElement:Q});const ee=globalThis.litElementPolyfillSupport;null==ee||ee({LitElement:Q}),(null!==(J=globalThis.litElementVersions)&&void 0!==J?J:globalThis.litElementVersions=[]).push("3.2.2");class te{static array=B`<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 0H0V4H4V0Z" fill="currentColor"/><path d="M10 0H6V4H10V0Z" fill="currentColor"/><path d="M16 0H12V4H16V0Z" fill="currentColor"/><path d="M4 6H0V10H4V6Z" fill="currentColor"/><path class="ueb-pin-tofill" d="M10 6H6V10H10V6Z" fill="black"/><path d="M16 6H12V10H16V6Z" fill="currentColor"/><path d="M4 12H0V16H4V12Z" fill="currentColor"/><path d="M10 12H6V16H10V12Z" fill="currentColor"/><path d="M16 12H12V16H16V12Z" fill="currentColor"/></svg>`;static branchNode=B`<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M11 2H6C5.44772 2 5 2.44772 5 3V13C5 13.5523 5.44772 14 6 14H11V12H7V4H11V2Z" fill="white"/><rect x="1" y="7" width="4" height="2" fill="white"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11 6L15 3L11 0V6Z" fill="white"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11 16L15 13L11 10V16Z" fill="white"/></svg>`;static breakStruct=B`<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 14L10 12L11 11L13 13L14 12L14 15L11 15L12 14Z" fill="white"/><path d="M13 3L11 5L10 4L12 2L11 1L14 1L14 4L13 3Z" fill="white"/><path d="M7.975 6H3.025C1.90662 6 1 6.90662 1 8.025V8.475C1 9.59338 1.90662 10.5 3.025 10.5H7.975C9.09338 10.5 10 9.59338 10 8.475V8.025C10 6.90662 9.09338 6 7.975 6Z" fill="white"/></svg>`;static cast=B`<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 12L16 7.5L12 3V12Z" fill="white"/><path fill-rule="evenodd" clip-rule="evenodd" d="M0 11L4 7.5L0 4V11Z" fill="white"/><rect opacity="0.5" x="5" y="6" width="1" height="3" fill="white"/><rect opacity="0.5" x="7" y="6" width="1" height="3" fill="white"/><rect opacity="0.5" x="9" y="6" width="1" height="3" fill="white"/><rect x="9" y="6" width="3" height="3" fill="white"/></svg>`;static close=B`<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><line x1="2" y1="2" x2="30" y2="30" stroke="currentColor" stroke-width="4"/><line x1="30" y1="2" x2="2" y2="30" stroke="currentColor" stroke-width="4"/></svg>`;static correct=B`<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path fill="#2da800" d="M 2 16 L 14 30 L 30 2 L 13 22 Z"/></svg>`;static delegate=B`<svg viewBox="-2 -2 32 32" xmlns="http://www.w3.org/2000/svg"><rect class="ueb-pin-tofill" fill="black" width="28" height="28" rx="4" stroke="currentColor" stroke-width="5"/></svg>`;static doN=B`<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 12V8H9V4L16 10L9 16V12H1Z" fill="white"/><path d="M7 6L6 6L4 2.66667V6H3V1H4L6 4.33333V1H7V6Z" fill="white"/></svg>`;static event=B`<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="0.929031" y="8" width="10" height="10" rx="0.5" transform="rotate(-45 0.929031 8)" stroke="white"/><path d="M5 4.00024L8 1.00024V6.00024H3L5 4.00024Z" fill="white"/><path d="M6 13.0002L3 10.0002L8 10.0002L8 15.0002L6 13.0002Z" fill="white"/><path d="M4.53551 6.82854L4.53551 11.0712L0.999977 7.53564L4.53551 4.00011L4.53551 6.82854Z" fill="white"/></svg>`;static execPin=B`<svg viewBox="-2 0 16 16" xmlns="http://www.w3.org/2000/svg"><path class="ueb-pin-tofill" stroke-width="1.25" stroke="white" fill="none" d="M 2 1 a 2 2 0 0 0 -2 2 v 10 a 2 2 0 0 0 2 2 h 4 a 2 2 0 0 0 1.519 -0.698 l 4.843 -5.651 a 1 1 0 0 0 0 -1.302 L 7.52 1.7 a 2 2 0 0 0 -1.519 -0.698 z"/></svg>`;static expandIcon=B`<svg fill="currentColor" viewBox="4 4 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M 16.003 18.626 l 7.081 -7.081 L 25 13.46 l -8.997 8.998 -9.003 -9 1.917 -1.916 z"/></svg>`;static forEachLoop=B`<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M4 2C1.8 2 0 3.8 0 6V9C0 11.2 2 13 4 13H10V11H5C3.2 11 2 9.7 2 8V7C2 5.63882 2.76933 4.53408 4 4.14779V2ZM12 4C13.8 4 14 5.3 14 7V8C14 8.8 13.7 9.5 13.3 10L15.2 11.4C15.7 10.7 16 9.9 16 9V6C16 3.8 14.2 2 12 2V4Z" fill="white"/><path fill-rule="evenodd" clip-rule="evenodd" d="M8 16L13 12L8 8V16Z" fill="white"/><rect x="5" y="1" width="1" height="4" fill="white"/><rect x="7" y="1" width="1" height="4" fill="white"/><rect x="9" y="1" width="1" height="4" fill="white"/><rect x="11" y="2" width="1" height="2" fill="white"/></svg>`;static functionSymbol=B`<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9.72002 6.0699C9.88111 4.96527 10.299 3.9138 10.94 2.99991C10.94 2.99991 10.94 3.05991 10.94 3.08991C10.94 3.36573 11.0496 3.63026 11.2446 3.8253C11.4397 4.02033 11.7042 4.12991 11.98 4.12991C12.2558 4.12991 12.5204 4.02033 12.7154 3.8253C12.9105 3.63026 13.02 3.36573 13.02 3.08991C13.0204 2.90249 12.9681 2.71873 12.8691 2.5596C12.7701 2.40047 12.6283 2.27237 12.46 2.18991H12.37C11.8725 2.00961 11.3275 2.00961 10.83 2.18991C9.21002 2.63991 8.58002 4.99991 8.58002 4.99991L8.40002 5.1199H5.40002L5.15002 6.1199H8.27002L7.27002 11.4199C7.11348 12.0161 6.79062 12.5555 6.33911 12.9751C5.8876 13.3948 5.32607 13.6773 4.72002 13.7899C4.78153 13.655 4.81227 13.5081 4.81002 13.3599C4.81002 13.0735 4.69624 12.7988 4.4937 12.5962C4.29116 12.3937 4.01646 12.2799 3.73002 12.2799C3.44359 12.2799 3.16889 12.3937 2.96635 12.5962C2.76381 12.7988 2.65002 13.0735 2.65002 13.3599C2.66114 13.605 2.75692 13.8386 2.92104 14.021C3.08517 14.2033 3.30746 14.3231 3.55002 14.3599C7.91002 15.1999 8.55002 11.4499 8.55002 11.4499L9.55002 7.05991H12.55L12.8 6.05991H9.64002L9.72002 6.0699Z" fill="currentColor"/></svg>`;static genericPin=B`<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><circle class="ueb-pin-tofill" cx="16" cy="16" r="13" fill="black" stroke="currentColor" stroke-width="5"/><path d="M 34 6 L 34 26 L 42 16 Z" fill="currentColor"/></svg>`;static loop=B`<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><defs><style>.cls-1{fill:#fff;fill-rule:evenodd}.cls-2{fill:none}</style></defs><g id="Layer_2" data-name="Layer 2"><g id="Layer_4" data-name="Layer 4"><path class="cls-1" d="M16,2H4A4,4,0,0,0,0,6v4a4.14,4.14,0,0,0,4,4H9v5l8-6L9,7v5H4.5A2.36,2.36,0,0,1,2,9.5v-3A2.36,2.36,0,0,1,4.5,4h11A2.36,2.36,0,0,1,18,6.5V9a3,3,0,0,1-.69,2l1.88,1.41A4,4,0,0,0,20,10V6A4,4,0,0,0,16,2Z"/><rect class="cls-2" width="20" height="20"/></g></g></svg>`;static macro=B`<svg viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 2.92L10 12.29L14.55 2.61C14.662 2.4259 14.8189 2.27332 15.0061 2.16661C15.1933 2.05989 15.4045 2.00256 15.62 2H19L18.66 2.89C18.66 2.89 17.17 3.04 17.11 3.63C17.05 4.22 16 15.34 15.93 16.13C15.86 16.92 17.33 17.13 17.33 17.13L17.17 17.99H13.84C13.7241 17.9764 13.612 17.9399 13.5103 17.8826C13.4086 17.8253 13.3194 17.7484 13.2477 17.6562C13.176 17.5641 13.1234 17.4586 13.0929 17.346C13.0624 17.2333 13.0546 17.1157 13.07 17L14.43 5.52L10 14.57C9.8 15.03 9.07 15.72 8.63 15.71H7.75L6.05 4.86L3.54 17.39C3.51941 17.5514 3.44327 17.7005 3.32465 17.8118C3.20603 17.9232 3.05235 17.9897 2.89 18H1L1.11 17.09C1.11 17.09 2.21 17.09 2.3 16.69C2.39 16.29 5.3 3.76 5.41 3.32C5.52 2.88 4.19 2.81 4.19 2.81L4.46 2H6.62C7.09 2 7.92 2.38 8 2.92Z" fill="white"/></svg>`;static map=B`<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 0H0V4H4V0Z" fill="currentColor"/><path d="M4 6H0V10H4V6Z" fill="currentColor"/><path d="M4 12H0V16H4V12Z" fill="currentColor"/><path d="M16 0H6V4H16V0Z" fill="white"/><path d="M16 6H6V10H16V6Z" fill="white"/><path d="M16 12H6V16H16V12Z" fill="white"/></svg>`;static makeArray=B`<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15 4H13V6H15V4Z" fill="white"/><path d="M15 7H13V9H15V7Z" fill="white"/><path d="M15 10H13V12H15V10Z" fill="white"/><path d="M12 4H10V6H12V4Z" fill="white"/><path d="M12 7H10V9H12V7Z" fill="white"/><path d="M12 10H10V12H12V10Z" fill="white"/><path d="M9 4H7V6H9V4Z" fill="white"/><path d="M9 7H7V9H9V7Z" fill="white"/><path d="M9 10H7V12H9V10Z" fill="white"/><path d="M3 4L1 1.99995L2 1L4 3L5 1.99995L5 5L2 5L3 4Z" fill="white"/><path d="M4 13L1.99995 15L1 14L3 12L1.99995 11L5 11L5 14L4 13Z" fill="white"/></svg>`;static makeMap=B`<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15 4H10V6H15V4Z" fill="white"/><path d="M15 7H10V9H15V7Z" fill="white"/><path d="M15 10H10V12H15V10Z" fill="white"/><path d="M9 4H7V6H9V4Z" fill="white"/><path d="M9 7H7V9H9V7Z" fill="white"/><path d="M9 10H7V12H9V10Z" fill="white"/><path d="M3 4L1 1.99995L2 1L4 3L5 1.99995L5 5L2 5L3 4Z" fill="white"/><path d="M4 13L1.99995 15L1 14L3 12L1.99995 11L5 11L5 14L4 13Z" fill="white"/></svg>`;static makeSet=B`<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 4L1 1.99995L2 1L4 3L5 1.99995L5 5L2 5L3 4Z" fill="white"/><path d="M4 13L1.99995 15L1 14L3 12L1.99995 11L5 11L5 14L4 13Z" fill="white"/><path d="M6 8.00205V7.43062C6.40147 7.37088 6.79699 7.28299 7.18286 7.16777C7.30414 7.11578 7.40659 7.03462 7.47858 6.93348C7.57165 6.81021 7.63108 6.66933 7.65215 6.52205C7.6832 6.31181 7.69609 6.09976 7.69072 5.88777C7.67539 5.53753 7.70341 5.18685 7.77429 4.84205C7.81918 4.66059 7.92446 4.49533 8.07643 4.36777C8.26269 4.22923 8.48285 4.13138 8.71929 4.08205C9.01252 4.02392 9.31249 3.99706 9.61287 4.00205H9.85715V4.57348C9.66398 4.58307 9.47806 4.64211 9.32179 4.7435C9.16552 4.84489 9.04559 4.9843 8.97644 5.14491C8.92057 5.24999 8.89621 5.36613 8.90572 5.48205C8.90572 5.64205 8.90572 5.95062 8.86715 6.40205C8.85805 6.6136 8.81697 6.8231 8.74501 7.02491C8.69216 7.17345 8.60697 7.3113 8.49429 7.43062C8.33135 7.64 8.1415 7.83177 7.92858 8.00205" fill="white"/><path d="M7.92858 8.00195C8.14537 8.18165 8.33547 8.3852 8.49429 8.60767C8.60419 8.72229 8.6892 8.85404 8.74501 8.99624C8.81697 9.19805 8.85805 9.40755 8.86715 9.6191C8.89286 10.0724 8.90572 10.381 8.90572 10.5448C8.89679 10.6607 8.92112 10.7767 8.97644 10.882C9.05077 11.0375 9.17272 11.1714 9.32842 11.2683C9.48411 11.3653 9.66731 11.4215 9.85715 11.4305V12.002H9.61287C9.31086 12.0112 9.0087 11.9881 8.71286 11.9334C8.47744 11.8816 8.25788 11.784 8.07001 11.6477C7.91926 11.5193 7.81421 11.3543 7.76786 11.1734C7.69764 10.8285 7.66962 10.4779 7.68429 10.1277C7.69081 9.91186 7.67791 9.69593 7.64572 9.48195C7.62465 9.33468 7.56522 9.1938 7.47215 9.07052C7.40016 8.96939 7.29771 8.88822 7.17643 8.83624C6.79266 8.72131 6.3993 8.63342 6 8.57338V8.00195" fill="white"/><path d="M13.0712 8.00197C12.8582 7.83169 12.6684 7.63992 12.5054 7.43054C12.3942 7.31461 12.3091 7.18076 12.2547 7.03626C12.1828 6.83445 12.1417 6.62495 12.1326 6.4134C12.1326 5.96197 12.094 5.6534 12.094 5.4934C12.1058 5.37369 12.0814 5.25334 12.0233 5.14483C11.9541 4.98422 11.8342 4.84481 11.6779 4.74342C11.5217 4.64203 11.3357 4.58299 11.1426 4.5734V4.00197H11.3869C11.6889 3.99277 11.991 4.01579 12.2869 4.07054C12.5233 4.11987 12.7435 4.21772 12.9297 4.35626C13.0817 4.48382 13.187 4.64908 13.2319 4.83054C13.3027 5.17534 13.3308 5.52602 13.3154 5.87626C13.3094 6.09206 13.3223 6.30795 13.354 6.52197C13.3751 6.66925 13.4345 6.81013 13.5276 6.9334C13.5996 7.03454 13.702 7.1157 13.8233 7.16769C14.2071 7.28262 14.6004 7.37051 14.9997 7.43054V8.00197" fill="white"/><path d="M14.9997 8.00195V8.57338C14.5983 8.63312 14.2027 8.72102 13.8169 8.83624C13.6956 8.88822 13.5931 8.96939 13.5212 9.07052C13.4281 9.1938 13.3686 9.33468 13.3476 9.48195C13.3154 9.69593 13.3025 9.91186 13.309 10.1277C13.3237 10.4779 13.2957 10.8285 13.2254 11.1734C13.1791 11.3543 13.074 11.5193 12.9233 11.6477C12.7354 11.784 12.5159 11.8816 12.2804 11.9334C11.9846 11.9881 11.6824 12.0112 11.3804 12.002H11.1426V11.4305C11.3353 11.4196 11.5205 11.36 11.6765 11.2588C11.8325 11.1576 11.9528 11.0189 12.0233 10.8591C12.0786 10.7539 12.1029 10.6378 12.094 10.522C12.094 10.3543 12.1069 10.0458 12.1326 9.59624C12.1417 9.38469 12.1828 9.17519 12.2547 8.97338C12.3105 8.83119 12.3955 8.69943 12.5054 8.58481C12.666 8.37037 12.856 8.17457 13.0712 8.00195" fill="white"/></svg>`;static makeStruct=B`<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 4L1 1.99995L2 1L4 3L5 1.99995L5 5L2 5L3 4Z" fill="white"/><path d="M4 13L1.99995 15L1 14L3 12L1.99995 11L5 11L5 14L4 13Z" fill="white"/><path d="M12.975 6H8.025C6.90662 6 6 6.90662 6 8.025V8.475C6 9.59338 6.90662 10.5 8.025 10.5H12.975C14.0934 10.5 15 9.59338 15 8.475V8.025C15 6.90662 14.0934 6 12.975 6Z" fill="white"/></svg>`;static referencePin=B`<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><polygon class="ueb-pin-tofill" points="4 16 16 4 28 16 16 28" stroke="currentColor" stroke-width="5"/></svg>`;static reject=B`<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path stroke="red" stroke-width="2" stroke-miterlimit="10" d="M12.5 3.5L3.5 12.5"/><path fill="red" d="M8 2C11.3 2 14 4.7 14 8C14 11.3 11.3 14 8 14C4.7 14 2 11.3 2 8C2 4.7 4.7 2 8 2ZM8 0.5C3.9 0.5 0.5 3.9 0.5 8C0.5 12.1 3.9 15.5 8 15.5C12.1 15.5 15.5 12.1 15.5 8C15.5 3.9 12.1 0.5 8 0.5Z"/></svg>`;static set=B`<svg viewBox="2 2 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 7.99956V6.99956C1.62451 6.89501 2.23976 6.7412 2.84 6.53956C3.02865 6.44859 3.18802 6.30655 3.3 6.12956C3.44478 5.91383 3.53723 5.6673 3.57 5.40956C3.6183 5.04164 3.63836 4.67055 3.63 4.29956C3.60615 3.68664 3.64974 3.07296 3.76 2.46956C3.82982 2.152 3.99359 1.86279 4.23 1.63956C4.51974 1.39713 4.86221 1.22589 5.23 1.13956C5.68612 1.03782 6.15275 0.990826 6.62 0.999563H7V1.99956C6.69952 2.01634 6.4103 2.11967 6.16722 2.2971C5.92414 2.47453 5.73757 2.71849 5.63 2.99956C5.5431 3.18346 5.5052 3.3867 5.52 3.58956C5.52 3.86956 5.52 4.40956 5.46 5.19956C5.44584 5.56977 5.38194 5.9364 5.27 6.28956C5.18779 6.5495 5.05527 6.79074 4.88 6.99956C4.62654 7.36597 4.33121 7.70157 4 7.99956" fill="currentColor"/><path d="M4 7.99951C4.33723 8.31397 4.63295 8.67019 4.88 9.05951C5.05095 9.2601 5.18319 9.49067 5.27 9.73951C5.38194 10.0927 5.44584 10.4593 5.46 10.8295C5.5 11.6228 5.52 12.1628 5.52 12.4495C5.5061 12.6523 5.54395 12.8553 5.63 13.0395C5.74563 13.3117 5.93533 13.546 6.17752 13.7157C6.41972 13.8854 6.70468 13.9837 7 13.9995V14.9995H6.62C6.15021 15.0156 5.68019 14.9753 5.22 14.8795C4.85378 14.7889 4.51224 14.6181 4.22 14.3795C3.98551 14.1548 3.8221 13.8662 3.75 13.5495C3.64077 12.946 3.59718 12.3324 3.62 11.7195C3.63014 11.3418 3.61007 10.964 3.56 10.5895C3.52723 10.3318 3.43478 10.0852 3.29 9.86951C3.17802 9.69252 3.01865 9.55048 2.83 9.45951C2.23302 9.25838 1.62113 9.10457 1 8.99951V7.99951" fill="currentColor"/><path d="M12 7.99955C11.6688 7.70156 11.3735 7.36596 11.12 6.99955C10.947 6.79667 10.8146 6.56242 10.73 6.30955C10.6181 5.95638 10.5542 5.58976 10.54 5.21954C10.54 4.42954 10.48 3.88955 10.48 3.60955C10.4983 3.40004 10.4604 3.18944 10.37 2.99955C10.2624 2.71847 10.0759 2.47452 9.83278 2.29708C9.5897 2.11965 9.30048 2.01632 9 1.99955V0.999545H9.38C9.84979 0.983442 10.3198 1.02373 10.78 1.11955C11.1478 1.20587 11.4903 1.37711 11.78 1.61955C12.0164 1.84278 12.1802 2.13198 12.25 2.44955C12.3603 3.05294 12.4039 3.66662 12.38 4.27955C12.3706 4.6572 12.3907 5.03501 12.44 5.40954C12.4728 5.66728 12.5652 5.91382 12.71 6.12955C12.822 6.30653 12.9813 6.44858 13.17 6.53955C13.767 6.74067 14.3789 6.89448 15 6.99955V7.99955" fill="currentColor"/><path d="M15 7.99951V8.99951C14.3755 9.10406 13.7602 9.25787 13.16 9.45951C12.9713 9.55048 12.812 9.69252 12.7 9.86951C12.5552 10.0852 12.4628 10.3318 12.43 10.5895C12.3799 10.964 12.3599 11.3418 12.37 11.7195C12.3928 12.3324 12.3492 12.946 12.24 13.5495C12.1679 13.8662 12.0045 14.1548 11.77 14.3795C11.4778 14.6181 11.1362 14.7889 10.77 14.8795C10.3098 14.9753 9.83979 15.0156 9.37 14.9995H9V13.9995C9.2998 13.9803 9.58791 13.876 9.83056 13.6989C10.0732 13.5218 10.2603 13.2792 10.37 12.9995C10.456 12.8153 10.4939 12.6123 10.48 12.4095C10.48 12.1162 10.5 11.5762 10.54 10.7895C10.5542 10.4193 10.6181 10.0527 10.73 9.69951C10.8168 9.45067 10.9491 9.2201 11.12 9.01951C11.3698 8.64424 11.6654 8.30159 12 7.99951" fill="currentColor"/></svg>`;static select=B`<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="1" y="2" width="6" height="2" fill="white"/><rect x="10" y="7" width="3" height="2" fill="white"/><path d="M12 5L15 8L12 11V5Z" fill="white"/><rect x="1" y="7" width="8" height="2" fill="white"/><rect x="5" y="4" width="2" height="9" fill="white"/><rect x="1" y="12" width="6" height="2" fill="white"/></svg>`;static sequence=B`<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="3" y="2" width="5" height="2" fill="white"/><rect y="7" width="8" height="2" fill="white"/><rect x="3" y="4" width="2" height="9" fill="white"/><rect x="3" y="12" width="5" height="2" fill="white"/><rect x="10" y="2" width="6" height="2" fill="white"/><rect x="10" y="7" width="4" height="2" fill="white"/><rect x="10" y="12" width="2" height="2" fill="white"/></svg>`}class ie{constructor(e){this.attributes=e}}class ne{#e;get types(){return this.#e}constructor(...e){this.#e=e}getFirstType(){return this.#e[0]}}class se{static emptyObj={};static booleanConverter={fromAttribute:(e,t)=>{},toAttribute:(e,t)=>!0===e?"true":!1===e?"false":""};static sigmoid(e,t=1.7){return 1/(1+e/(1-e)**-t)}static clamp(e,t=-1/0,i=1/0){return Math.min(Math.max(e,t),i)}static getScale(e){const t=e.blueprint?e.blueprint.getScale():getComputedStyle(e).getPropertyValue("--ueb-scale");return""!=t?parseFloat(t):1}static minDecimals(e,t=1,i=1e-8){const n=e*10**t;return Math.abs(n%1)>i?e.toString():e.toFixed(t)}static roundDecimals(e,t=1){const i=10**t;return Math.round(e*i)/i}static approximatelyEqual(e,t,i=1e-8){return!(Math.abs(e-t)>i)}static convertLocation(e,t,i=!1){const n=i?1:1/se.getScale(t),s=t.getBoundingClientRect();return[Math.round((e[0]-s.x)*n),Math.round((e[1]-s.y)*n)]}static isSerialized(e,t,i=se.objectGet(e.constructor.attributes,t)){return i?.constructor===Object&&i.serialized}static objectGet(e,t,i){if(void 0!==e){if(!(t instanceof Array))throw new TypeError("UEBlueprint: Expected keys to be an array");return e instanceof ie&&(e=e.attributes),0!=t.length&&t[0]in e&&void 0!==e[t[0]]?1==t.length?e[t[0]]:se.objectGet(e[t[0]],t.slice(1),i):i}}static objectSet(e,t,i,n=!1,s=Object){if(!(t instanceof Array))throw new TypeError("Expected keys to be an array.");if(1==t.length){if(n||t[0]in e||void 0===e[t[0]])return e[t[0]]=i,!0}else if(t.length>0)return!n||e[t[0]]instanceof Object||(e[t[0]]=new s),se.objectSet(e[t[0]],t.slice(1),i,n,s);return!1}static equals(e,t){return e=se.sanitize(e),t=se.sanitize(t),e?.constructor===BigInt&&t?.constructor===Number?t=BigInt(t):e?.constructor===Number&&t?.constructor===BigInt&&(e=BigInt(e)),e===t||e instanceof Array&&t instanceof Array&&(e.length==t.length&&!e.find(((e,i)=>!se.equals(e,t[i]))))}static getType(e){return null===e?null:e?.constructor===Object&&e?.type instanceof Function?e.type:e?.constructor}static isValueOfType(e,t,i=!1){return i&&null===e||e instanceof t||e?.constructor===t}static sanitize(e,t=e?.constructor){if(t instanceof ne){let i=t.types.find((t=>se.isValueOfType(e,t,!1)));i||(i=t.getFirstType()),t=i}return t&&!se.isValueOfType(e,t,!0)&&(e=t===BigInt?BigInt(e):new t(e)),(e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof BigInt)&&(e=e.valueOf()),e}static snapToGrid(e,t,i){return 1===i?[e,t]:[i*Math.round(e/i),i*Math.round(t/i)]}static mergeArrays(e=[],t=[]){let i=[];e=[...e],t=[...t];e:for(;;){for(let n=0;n<t.length;++n)for(let s=0;s<e.length;++s)if(e[s]==t[n]){i.push(...e.splice(0,s),...t.splice(0,n),...e.splice(0,1)),t.shift();continue e}break e}return[...new Set(i.concat(...e,...t))]}static escapeString(e,t=!1){return e.replaceAll('"','\\"').replaceAll("\n","\\n")}static unescapeString(e,t=!1){return e.replaceAll('\\"','"').replaceAll("\\n","\n")}static clearHTMLWhitespace(e){return e.replaceAll("&nbsp;"," ").replaceAll("<br>","\n").replaceAll(/(\<!--.*?\-->)/g,"")}static capitalFirstLetter(e){return 0===e.length?e:e.charAt(0).toUpperCase()+e.slice(1)}static formatStringName(e){return e.trim().replace(/^b/,"").replaceAll(/^K2(?:Node|node)?_|(?<=[a-z])(?=[A-Z0-9])|(?<=[A-Z])(?=[A-Z][a-z]|[0-9])|(?<=[014-9]|(?:2|3)(?!D(?:[^a-z]|$)))(?=[a-zA-Z])|\s*_+\s*|\s{2,}/g," ").split(" ").map((e=>se.capitalFirstLetter(e))).join(" ")}static getIdFromReference(e){return e.replace(/(?:.+\.)?([^\.]+)$/,"$1").replaceAll(/(?<=[a-z\d])(?=[A-Z])|(?<=[a-zA-Z])(?=\d)|(?<=[A-Z]{2})(?=[A-Z][a-z])/g,"-").toLowerCase()}static printLinearColor(e){return`${Math.round(255*e.R.valueOf())}, ${Math.round(255*e.G.valueOf())}, ${Math.round(255*e.B.valueOf())}`}static getPolarCoordinates(e,t,i=!1){let n=Math.atan2(t,e);return i&&n<0&&(n=2*Math.PI+n),[Math.sqrt(e*e+t*t),n]}static getCartesianCoordinates(e,t){return[e*Math.cos(t),e*Math.sin(t)]}static range(e=0,t=0,i=(t>=e?1:-1)){return Array.from({length:Math.ceil((t-e)/i)},((t,n)=>e+n*i))}static paste(e,t){const i=new ClipboardEvent("paste",{bubbles:!0,cancelable:!0,clipboardData:new DataTransfer});i.clipboardData.setData("text",t),e.dispatchEvent(i)}static animate(e,t,i,n,s=(e=>{const t=e**3.5;return t/(t+(1-e)**3.5)})){let r;const a=o=>{void 0===r&&(r=o);let l=(o-r)/i;se.approximatelyEqual(l,1)||l>1?l=1:requestAnimationFrame(a);const u=e+(t-e)*s(l);n(u)};requestAnimationFrame(a)}static warn(e){console.warn("UEBlueprint: "+e)}}class re{static#t={"/Script/CoreUObject.Rotator":r``,"/Script/CoreUObject.Transform":r``,"/Script/CoreUObject.Vector":r``,"/Script/Engine.Actor":r``,"/Script/Engine.GameStateBase":r``,"/Script/Engine.Pawn":r``,"/Script/Engine.PlayerState":r``,bool:r``,byte:r``,class:r``,default:r``,delegate:r``,exec:r``,int:r``,int64:r``,name:r``,real:r``,string:r``,wildcard:r``};static alphaPattern="repeating-conic-gradient(#7c8184 0% 25%, #c2c3c4 0% 50%) 50% / 10px 10px";static colorDragEventName="ueb-color-drag";static colorPickEventName="ueb-color-pick";static colorWindowEventName="ueb-color-window";static defaultCommentHeight=96;static defaultCommentWidth=400;static deleteNodesKeyboardKey="Delete";static distanceThreshold=5;static dragEventName="ueb-drag";static dragGeneralEventName="ueb-drag-general";static editTextEventName={begin:"ueb-edit-text-begin",end:"ueb-edit-text-end"};static enableZoomIn=["LeftControl","RightControl"];static expandGridSize=400;static focusEventName={begin:"blueprint-focus",end:"blueprint-unfocus"};static fontSize=r``;static gridAxisLineColor=r``;static gridExpandThreshold=.25;static gridLineColor=r``;static gridLineWidth=1;static gridSet=8;static gridSetLineColor=r``;static gridShrinkThreshold=4;static gridSize=16;static hexColorRegex=/^\s*#(?<r>[0-9a-fA-F]{2})(?<g>[0-9a-fA-F]{2})(?<b>[0-9a-fA-F]{2})([0-9a-fA-F]{2})?|#(?<rs>[0-9a-fA-F])(?<gs>[0-9a-fA-F])(?<bs>[0-9a-fA-F])\s*$/;static keysSeparator="+";static linkCurveHeight=15;static linkCurveWidth=80;static linkMinWidth=100;static linkRightSVGPath=(e,t,i)=>{let n=100-e;return`M ${e} 0 C ${t} 0, ${i} 0, 50 50 S ${n-t+e} 100, ${n} 100`};static maxZoom=7;static minZoom=-12;static mouseWheelFactor=.2;static nodeDeleteEventName="ueb-node-delete";static nodeDragGeneralEventName="ueb-node-drag-general";static nodeDragEventName="ueb-node-drag";static nodeIcon(e){switch(e.getType()){case re.nodeType.doN:return te.doN;case re.nodeType.dynamicCast:return te.cast;case re.nodeType.event:return te.event;case re.nodeType.executionSequence:return te.sequence;case re.nodeType.forEachElementInEnum:return te.loop;case re.nodeType.forEachLoop:case re.nodeType.forEachLoopWithBreak:return te.forEachLoop;case re.nodeType.forLoop:case re.nodeType.forLoopWithBreak:return te.loop;case re.nodeType.ifThenElse:return te.branchNode;case re.nodeType.makeArray:return te.makeArray;case re.nodeType.makeMap:return te.makeMap;case re.nodeType.makeSet:return te.makeSet;case re.nodeType.select:return te.select;case re.nodeType.whileLoop:return te.loop}return e.getNodeDisplayName().startsWith("Break")?te.breakStruct:e.entity.getClass()===re.nodeType.macro?te.macro:te.functionSymbol}static nodeColor(e){const t=r``,i=r``;switch(e.entity.getClass()){case re.nodeType.callFunction:return e.entity.bIsPureFunc?i:t;case re.nodeType.event:return r``;case re.nodeType.makeArray:case re.nodeType.makeMap:case re.nodeType.select:return i;case re.nodeType.macro:case re.nodeType.executionSequence:case re.nodeType.dynamicCast:return r``}return t}static nodeName=(e,t)=>`${e}_${t}`;static nodeDisplayName(e){switch(e.getType()){case re.nodeType.callFunction:case re.nodeType.commutativeAssociativeBinaryOperator:if("AddKey"==e.entity.FunctionReference.MemberName){const t=/\/Script\/SequencerScripting\.MovieSceneScripting(.+)Channel/;let i=e.entity.FunctionReference.MemberParent.path.match(t);if(i)return`Add Key (${se.formatStringName(i[1])})`}let t=e.entity.FunctionReference.MemberName;if("/Script/Engine.KismetMathLibrary"==e.entity.FunctionReference.MemberParent.path){if(t.startsWith("Conv_"))return"";if(t.startsWith("Percent_"))return"%";const e=t.match(/[BF]([A-Z]\w+)/);switch(e&&(t=e[1]),t){case"Abs":return"ABS";case"Exp":return"e";case"Max":case"MaxInt64":return"MAX";case"Min":case"MinInt64":return"MIN"}}if("/Script/Engine.BlueprintSetLibrary"===e.entity.FunctionReference.MemberParent.path){const e=t.match(/Set_(\w+)/);if(e)return se.formatStringName(e[1]).toUpperCase()}if("/Script/Engine.BlueprintMapLibrary"===e.entity.FunctionReference.MemberParent.path){const e=t.match(/Map_(\w+)/);if(e)return se.formatStringName(e[1]).toUpperCase()}return se.formatStringName(t);case re.nodeType.dynamicCast:return`Cast To ${e.entity.TargetType.getName()}`;case re.nodeType.event:return`Event ${(e.entity.EventReference?.MemberName??"").replace(/^Receive/,"")}`;case re.nodeType.executionSequence:return"Sequence";case re.nodeType.ifThenElse:return"Branch";case re.nodeType.forEachElementInEnum:return`For Each ${e.entity.Enum.getName()}`;case re.nodeType.forEachLoopWithBreak:return"For Each Loop with Break";case re.nodeType.variableGet:return"";case re.nodeType.variableSet:return"SET";default:return e.entity.getClass()===re.nodeType.macro?se.formatStringName(e.entity.MacroGraphReference.getMacroName()):se.formatStringName(e.entity.getNameAndCounter()[0])}}static nodeRadius=8;static nodeReflowEventName="ueb-node-reflow";static nodeType={callFunction:"/Script/BlueprintGraph.K2Node_CallFunction",comment:"/Script/UnrealEd.EdGraphNode_Comment",commutativeAssociativeBinaryOperator:"/Script/BlueprintGraph.K2Node_CommutativeAssociativeBinaryOperator",customEvent:"/Script/BlueprintGraph.K2Node_CustomEvent",doN:"/Engine/EditorBlueprintResources/StandardMacros.StandardMacros:Do N",dynamicCast:"/Script/BlueprintGraph.K2Node_DynamicCast",event:"/Script/BlueprintGraph.K2Node_Event",executionSequence:"/Script/BlueprintGraph.K2Node_ExecutionSequence",forEachElementInEnum:"/Script/BlueprintGraph.K2Node_ForEachElementInEnum",forEachLoop:"/Engine/EditorBlueprintResources/StandardMacros.StandardMacros:ForEachLoop",forEachLoopWithBreak:"/Engine/EditorBlueprintResources/StandardMacros.StandardMacros:ForEachLoopWithBreak",forLoop:"/Engine/EditorBlueprintResources/StandardMacros.StandardMacros:ForLoop",forLoopWithBreak:"/Engine/EditorBlueprintResources/StandardMacros.StandardMacros:ForLoopWithBreak",ifThenElse:"/Script/BlueprintGraph.K2Node_IfThenElse",knot:"/Script/BlueprintGraph.K2Node_Knot",macro:"/Script/BlueprintGraph.K2Node_MacroInstance",makeArray:"/Script/BlueprintGraph.K2Node_MakeArray",makeMap:"/Script/BlueprintGraph.K2Node_MakeMap",makeSet:"/Script/BlueprintGraph.K2Node_MakeSet",pawn:"/Script/Engine.Pawn",reverseForEachLoop:"/Engine/EditorBlueprintResources/StandardMacros.StandardMacros:ReverseForEachLoop",select:"/Script/BlueprintGraph.K2Node_Select",variableGet:"/Script/BlueprintGraph.K2Node_VariableGet",variableSet:"/Script/BlueprintGraph.K2Node_VariableSet",whileLoop:"/Engine/EditorBlueprintResources/StandardMacros.StandardMacros:WhileLoop"};static pinColor(e){if(re.#t[e.pinType])return re.#t[e.pinType];if("struct"==e.entity.PinType.PinCategory||"object"==e.entity.PinType.PinCategory)switch(e.entity.PinType.PinSubCategoryObject.type){case"ScriptStruct":case"/Script/CoreUObject.ScriptStruct":return r``;default:if(e.entity.PinType.PinSubCategoryObject.getName().endsWith("Actor")||"Target"==e.getPinDisplayName())return re.#t["/Script/Engine.Actor"]}return re.#t.default}static scale={[-12]:.133333,[-11]:.166666,[-10]:.2,[-9]:.233333,[-8]:.266666,[-7]:.3,[-6]:.333333,[-5]:.375,[-4]:.5,[-3]:.675,[-2]:.75,[-1]:.875,0:1,1:1.25,2:1.375,3:1.5,4:1.675,5:1.75,6:1.875,7:2};static selectAllKeyboardKey="(bCtrl=True,Key=A)";static smoothScrollTime=1e3;static trackingMouseEventName={begin:"ueb-tracking-mouse-begin",end:"ueb-tracking-mouse-end"};static windowApplyEventName="ueb-window-apply";static windowCancelEventName="ueb-window-cancel";static windowCloseEventName="ueb-window-close";static ModifierKeys=["Ctrl","Shift","Alt","Meta"];static Keys={Backspace:"Backspace",Tab:"Tab",LeftControl:"ControlLeft",RightControl:"ControlRight",LeftShift:"ShiftLeft",RightShift:"ShiftRight",LeftAlt:"AltLeft",RightAlt:"AltRight",Enter:"Enter",Pause:"Pause",CapsLock:"CapsLock",Escape:"Escape",Space:"Space",PageUp:"PageUp",PageDown:"PageDown",End:"End",Home:"Home",ArrowLeft:"Left",ArrowUp:"Up",ArrowRight:"Right",ArrowDown:"Down",PrintScreen:"PrintScreen",Insert:"Insert",Delete:"Delete",Zero:"Digit0",One:"Digit1",Two:"Digit2",Three:"Digit3",Four:"Digit4",Five:"Digit5",Six:"Digit6",Seven:"Digit7",Eight:"Digit8",Nine:"Digit9",A:"KeyA",B:"KeyB",C:"KeyC",D:"KeyD",E:"KeyE",F:"KeyF",G:"KeyG",H:"KeyH",I:"KeyI",K:"KeyK",L:"KeyL",M:"KeyM",N:"KeyN",O:"KeyO",P:"KeyP",Q:"KeyQ",R:"KeyR",S:"KeyS",T:"KeyT",U:"KeyU",V:"KeyV",W:"KeyW",X:"KeyX",Y:"KeyY",Z:"KeyZ",NumPadZero:"Numpad0",NumPadOne:"Numpad1",NumPadTwo:"Numpad2",NumPadThree:"Numpad3",NumPadFour:"Numpad4",NumPadFive:"Numpad5",NumPadSix:"Numpad6",NumPadSeven:"Numpad7",NumPadEight:"Numpad8",NumPadNine:"Numpad9",Multiply:"NumpadMultiply",Add:"NumpadAdd",Subtract:"NumpadSubtract",Decimal:"NumpadDecimal",Divide:"NumpadDivide",F1:"F1",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",F10:"F10",F11:"F11",F12:"F12",NumLock:"NumLock",ScrollLock:"ScrollLock"}}class ae{#i;get target(){return this.#i}#n;get blueprint(){return this.#n}options;listenHandler=()=>this.listenEvents();unlistenHandler=()=>this.unlistenEvents();constructor(e,t,i={}){i.consumeEvent??=!1,i.listenOnFocus??=!1,i.unlistenOnTextEdit??=!1,this.#i=e,this.#n=t,this.options=i}setup(){this.options.listenOnFocus&&(this.blueprint.addEventListener(re.focusEventName.begin,this.listenHandler),this.blueprint.addEventListener(re.focusEventName.end,this.unlistenHandler)),this.options.unlistenOnTextEdit&&(this.blueprint.addEventListener(re.editTextEventName.begin,this.unlistenHandler),this.blueprint.addEventListener(re.editTextEventName.end,this.listenHandler)),this.blueprint.focused&&this.listenEvents()}cleanup(){this.unlistenEvents(),this.blueprint.removeEventListener(re.focusEventName.begin,this.listenHandler),this.blueprint.removeEventListener(re.focusEventName.end,this.unlistenHandler),this.blueprint.removeEventListener(re.editTextEventName.begin,this.unlistenHandler),this.blueprint.removeEventListener(re.editTextEventName.end,this.listenHandler)}listenEvents(){}unlistenEvents(){}}class oe{static#s=new Map;static registerSerializer(e,t){oe.#s.set(e,t)}static getSerializer(e){return oe.#s.get(e)}}class le{static attributes={};static defaultAttribute={showDefault:!0,nullable:!1,ignored:!1,serialized:!1,expected:!1};constructor(e={},t=!1){const i=(e,n,s={},r="")=>{const a=Object.keys(s),o=Object.keys(n);for(let l of se.mergeArrays(o,a)){let o=se.objectGet(s,[l]),u=n[l];if(!u){e[l]=o;continue}if(u instanceof ie){e[l]={},i(e[l],u.attributes,s[l],l+".");continue}t||(l in n?a.length>0&&!(l in s)&&u.showDefault&&!u.ignored&&se.warn(`${this.constructor.name} will add attribute ${r}${l} not defined in the serialized data`):se.warn(`Attribute ${r}${l} in the serialized data is not defined in ${this.constructor.name}.attributes`));let c=u.value,h=u.type;u.serialized&&h instanceof Function&&(h=h(this)),h instanceof Array&&(h=Array),c instanceof Function&&(c=c(this)),h instanceof ne&&(h=null!=c?h.types.find((e=>c instanceof e||c.constructor==e))??h.getFirstType():h.getFirstType()),void 0===h&&(h=se.getType(c));const d=u.predicate?t=>{Object.defineProperties(e,{["#"+l]:{writable:!0,enumerable:!1},[l]:{enumerable:!0,get(){return this["#"+l]},set(e){u.predicate?.(e)?this["#"+l]=e:console.warn(`UEBlueprint: Tried to assign attribute ${r}${l} to ${this.constructor.name} not satisfying the predicate`)}}}),this[l]=t}:t=>e[l]=t;void 0===o?(void 0===c&&(c=se.sanitize(new h)),u.showDefault?(u.serialized&&h!==String&&c.constructor===String&&(c=oe.getSerializer(h).deserialize(c)),d(se.sanitize(c,h))):d(void 0)):(o?.constructor===String&&u.serialized&&h!==String&&(o=oe.getSerializer(h).deserialize(o)),d(se.sanitize(o,h)))}},n=this.constructor.attributes;e.constructor!==Object&&1===Object.keys(n).length&&(e={[Object.keys(n)[0]]:e}),i(this,n,e)}static cleanupAttributes(e,t=""){for(const i in e){if(e[i]instanceof ie){this.cleanupAttributes(e[i].attributes,t+"."+i);continue}e[i].constructor!==Object&&(e[i]={value:e[i]});const n=e[i];if(void 0!==n.type||n.value instanceof Function||(n.type=se.getType(n.value)),e[i]={...le.defaultAttribute,...n},void 0===n.value&&void 0===n.type)throw new Error(`UEBlueprint: Expected either "type" or "value" property in ${this.name} attribute ${t}`+i);null===n.value&&(e[i].nullable=!0)}}static isValueOfType(e,t){return null!=e&&(e instanceof t||e.constructor===t)}static expectsAllKeys(){return!Object.values(this.attributes).filter((e=>!e.ignored)).some((e=>!e.expected))}unexpectedKeys(){return Object.keys(this).length-Object.keys(this.constructor.attributes).length}}class ue extends le{static attributes={...super.attributes,value:{value:0,predicate:e=>e%1==0&&e>1<<31&&e<-(1<<31)}};static{this.cleanupAttributes(this.attributes)}constructor(e=0){super(e),this.value}valueOf(){return this.value}toString(){return this.value.toString()}}class ce extends ue{static attributes={...super.attributes,value:{...super.attributes.value,predicate:e=>e%1==0&&e>=0&&e<256}};static{this.cleanupAttributes(this.attributes)}constructor(e=0){super(e)}}class he extends le{static attributes={type:"",path:""};static{this.cleanupAttributes(this.attributes)}constructor(e={}){e.constructor===String&&(e={path:e}),super(e),this.type,this.path}getName(){return this.path.match(/[^\.\/]+$/)?.[0]??""}}class de extends le{static attributes={MemberParent:{type:he,showDefault:!1},MemberName:""};static{this.cleanupAttributes(this.attributes)}constructor(e){super(e),this.MemberParent,this.MemberName}}class pe extends le{static attributes={value:""};static{this.cleanupAttributes(this.attributes)}static generateGuid(e=!0){let t=new Uint32Array(4);!0===e&&crypto.getRandomValues(t);let i="";return t.forEach((e=>{i+=("0".repeat(8)+e.toString(16).toUpperCase()).slice(-8)})),new pe({value:i})}constructor(e){e||(e=pe.generateGuid().value),super(e),this.value}valueOf(){return this.value}toString(){return this.value}}class me extends le{static attributes={value:""};static{this.cleanupAttributes(this.attributes)}static attributeConverter={fromAttribute:(e,t)=>new me(e),toAttribute:(e,t)=>e.toString()};constructor(e){super(e),this.value}valueOf(){return this.value}toString(){return this.value}}class ge extends le{static attributes={...super.attributes,value:{value:0n,predicate:e=>e>=-(1n<<63n)&&e<1n<<63n}};static{this.cleanupAttributes(this.attributes)}constructor(e=0){super(e),this.value}valueOf(){return this.value}toString(){return this.value.toString()}}class be extends le{static lookbehind="INVTEXT";static attributes={value:""};static{this.cleanupAttributes(this.attributes)}constructor(e){super(e),this.value}}class ve extends le{static attributes={ActionName:"",bShift:!1,bCtrl:!1,bAlt:!1,bCmd:!1,Key:{type:me}};static{this.cleanupAttributes(this.attributes)}constructor(e={}){e.ActionName=e.ActionName??"",e.bShift=e.bShift??!1,e.bCtrl=e.bCtrl??!1,e.bAlt=e.bAlt??!1,e.bCmd=e.bCmd??!1,super(e),this.ActionName,this.bShift,this.bCtrl,this.bAlt,this.bCmd,this.Key}}class fe extends le{static attributes={value:0};static{this.cleanupAttributes(this.attributes)}constructor(e=0){super(e),this.value=se.clamp(this.value,0,1)}valueOf(){return this.value}toString(){return this.value.toFixed(6)}}class ye extends le{static attributes={R:{type:fe,expected:!0},G:{type:fe,expected:!0},B:{type:fe,expected:!0},A:{type:fe,value:()=>new fe(1)},H:{type:fe,showDefault:!0,ignored:!0},S:{type:fe,showDefault:!0,ignored:!0},V:{type:fe,showDefault:!0,ignored:!0}};static{this.cleanupAttributes(this.attributes)}static linearToSRGB(e){return e<=0?0:e>=1?1:e<.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055}static sRGBtoLinear(e){return e<=0?0:e>=1?1:e<.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}static getWhite(){return new ye({R:1,G:1,B:1})}constructor(e){e instanceof Array&&(e={R:e[0]??0,G:e[1]??0,B:e[2]??0,A:e[3]??1}),super(e),this.R,this.G,this.B,this.A,this.H,this.S,this.V,this.#r()}#r(){const e=this.R.value,t=this.G.value,i=this.B.value;if(se.approximatelyEqual(e,t)&&se.approximatelyEqual(e,i)&&se.approximatelyEqual(t,i))return this.S.value=0,void(this.V.value=e);const n=Math.max(e,t,i),s=Math.min(e,t,i),r=n-s;let a;switch(n){case s:a=0;break;case e:a=(t-i)/r+(t<i?6:0);break;case t:a=(i-e)/r+2;break;case i:a=(e-t)/r+4}a/=6,this.H.value=a,this.S.value=0==n?0:r/n,this.V.value=n}setFromRGBA(e,t,i,n=1){this.R.value=e,this.G.value=t,this.B.value=i,this.A.value=n,this.#r()}setFromHSVA(e,t,i,n=1){const s=Math.floor(6*e),r=6*e-s,a=i*(1-t),o=[i,i*(1-r*t),a,a,i*(1-(1-r)*t),i],[l,u,c]=[o[s%6],o[(s+4)%6],o[(s+2)%6]];this.R.value=l,this.G.value=u,this.B.value=c,this.A.value=n,this.H.value=e,this.S.value=t,this.V.value=i}setFromWheelLocation(e,t,i,n){const[s,r]=se.getPolarCoordinates(e,t,!0);this.setFromHSVA(1-r/(2*Math.PI),s,i,n)}toRGBA(){return[Math.round(255*this.R.value),Math.round(255*this.G.value),Math.round(255*this.B.value),Math.round(255*this.A.value)]}toSRGBA(){return[Math.round(255*ye.linearToSRGB(this.R.value)),Math.round(255*ye.linearToSRGB(this.G.value)),Math.round(255*ye.linearToSRGB(this.B.value)),Math.round(255*this.A.value)]}toRGBAString(){return this.toRGBA().map((e=>e.toString(16).toUpperCase().padStart(2,"0"))).join("")}toSRGBAString(){return this.toSRGBA().map((e=>e.toString(16).toUpperCase().padStart(2,"0"))).join("")}toHSVA(){return[this.H.value,this.S.value,this.V.value,this.A.value]}toNumber(){return(Math.round(255*this.R.value)<<24)+(Math.round(255*this.G.value)<<16)+(Math.round(255*this.B.value)<<8)+Math.round(255*this.A.value)}setFromRGBANumber(e){this.A.value=(255&e)/255,this.B.value=(e>>8&255)/255,this.G.value=(e>>16&255)/255,this.R.value=(e>>24&255)/255,this.#r()}setFromSRGBANumber(e){this.A.value=(255&e)/255,this.B.value=ye.sRGBtoLinear((e>>8&255)/255),this.G.value=ye.sRGBtoLinear((e>>16&255)/255),this.R.value=ye.sRGBtoLinear((e>>24&255)/255),this.#r()}toString(){return se.printLinearColor(this)}}class we extends le{static lookbehind="NSLOCTEXT";static attributes={namespace:"",key:"",value:""};static{this.cleanupAttributes(this.attributes)}constructor(e){super(e),this.namespace,this.key,this.value}toString(){return se.capitalFirstLetter(this.value)}}class Ee extends le{static attributes={MacroGraph:{type:he},GraphBlueprint:{type:he},GraphGuid:{type:pe}};static{this.cleanupAttributes(this.attributes)}constructor(e){super(e),this.MacroGraph,this.GraphBlueprint,this.GuidEntity}getMacroName(){const e=this.MacroGraph.path.search(":");return this.MacroGraph.path.substring(e+1)}}class Se extends le{static attributes={value:""};static{this.cleanupAttributes(this.attributes)}constructor(e){super(e),this.value}valueOf(){return this.value}toString(){return this.value}}class Ce extends le{static attributes={objectName:{type:Se},pinGuid:{type:pe}};static{this.cleanupAttributes(this.attributes)}constructor(e){super(e),this.objectName,this.pinGuid}}class Pe extends le{static attributes={TerminalCategory:{value:"",showDefault:!1},TerminalSubCategory:{value:"",showDefault:!1},bTerminalIsConst:{value:!1,showDefault:!1},bTerminalIsWeakPointer:{value:!1,showDefault:!1},bTerminalIsUObjectWrapper:{value:!1,showDefault:!1}};static{this.cleanupAttributes(this.attributes)}constructor(e){super(e),this.TerminalCategory,this.TerminalSubCategory,this.bTerminalIsConst,this.bTerminalIsWeakPointer,this.bTerminalIsUObjectWrapper}}class ke extends le{static attributes={R:{value:0},P:{value:0},Y:{value:0}};static{this.cleanupAttributes(this.attributes)}constructor(e){super(e),this.R,this.P,this.Y}getRoll(){return this.R}getPitch(){return this.P}getYaw(){return this.Y}}class xe extends ke{}class Le extends le{static attributes={X:{value:0,expected:!0},Y:{value:0,expected:!0}};static{this.cleanupAttributes(this.attributes)}constructor(e){super(e),this.X,this.Y}}class Ne extends Le{}class Te extends le{static attributes={X:{value:0,expected:!0},Y:{value:0,expected:!0},Z:{value:0,expected:!0}};static{this.cleanupAttributes(this.attributes)}constructor(e){super(e),this.X,this.Y,this.Z}}class Ae extends Te{}class Me extends le{static#a={"/Script/CoreUObject.LinearColor":ye,"/Script/CoreUObject.Rotator":ke,"/Script/CoreUObject.Vector":Te,"/Script/CoreUObject.Vector2D":Le,bool:Boolean,byte:ce,exec:String,int:ue,int64:ge,name:String,real:Number,string:String};static#o={"/Script/CoreUObject.Vector2D":Ne,"/Script/CoreUObject.Vector":Ae,"/Script/CoreUObject.Rotator":xe};static lookbehind="Pin";static attributes={PinId:{type:pe},PinName:"",PinFriendlyName:{type:new ne(we,String),showDefault:!1},PinToolTip:{type:String,showDefault:!1},Direction:{type:String,showDefault:!1},PinType:new ie({PinCategory:"",PinSubCategory:"",PinSubCategoryObject:{type:he},PinSubCategoryMemberReference:{type:de,value:null},PinValueType:{type:Pe,value:null},ContainerType:{type:Se},bIsReference:!1,bIsConst:!1,bIsWeakPointer:!1,bIsUObjectWrapper:!1,bSerializeAsSinglePrecisionFloat:!1}),LinkedTo:{type:[Ce],showDefault:!1},DefaultValue:{type:e=>e.getEntityType(!0)??String,serialized:!0,showDefault:!1},AutogeneratedDefaultValue:{type:String,showDefault:!1},DefaultObject:{type:he,showDefault:!1,value:null},PersistentGuid:{type:pe},bHidden:!1,bNotConnectable:!1,bDefaultValueIsReadOnly:!1,bDefaultValueIsIgnored:!1,bAdvancedView:!1,bOrphanedPin:!1};static{this.cleanupAttributes(this.attributes)}constructor(e={},t=!1){super(e,t),this.PinId,this.PinName,this.PinFriendlyName,this.PinToolTip,this.Direction,this.PinType,this.LinkedTo,this.DefaultValue,this.AutogeneratedDefaultValue,this.DefaultObject,this.PersistentGuid,this.bHidden,this.bNotConnectable,this.bDefaultValueIsReadOnly,this.bDefaultValueIsIgnored,this.bAdvancedView,this.bOrphanedPin}getType(){return"struct"==this.PinType.PinCategory||"object"==this.PinType.PinCategory?this.PinType.PinSubCategoryObject.path:this.PinType.PinCategory}getEntityType(e=!1){const t=this.getType(),i=Me.#a[t],n=Me.#o[t];return e&&void 0!==n?n:i}getDisplayName(){let e=null;return this.PinToolTip&&(e=this.PinToolTip.match(/\s*(.+?(?=\n)|.+\S)\s*/))?se.formatStringName(e[1]):se.formatStringName(this.PinName)}copyTypeFrom(e){this.PinType.PinCategory=e.PinType.PinCategory,this.PinType.PinSubCategory=e.PinType.PinSubCategory,this.PinType.PinSubCategoryObject=e.PinType.PinSubCategoryObject,this.PinType.PinSubCategoryMemberReference=e.PinType.PinSubCategoryMemberReference,this.PinType.PinValueType=e.PinType.PinValueType,this.PinType.ContainerType=e.PinType.ContainerType,this.PinType.bIsReference=e.PinType.bIsReference,this.PinType.bIsConst=e.PinType.bIsConst,this.PinType.bIsWeakPointer=e.PinType.bIsWeakPointer,this.PinType.bIsUObjectWrapper=e.PinType.bIsUObjectWrapper,this.PinType.bSerializeAsSinglePrecisionFloat=e.PinType.bSerializeAsSinglePrecisionFloat}getDefaultValue(e=!1){return void 0===this.DefaultValue&&e&&(this.DefaultValue=new(this.getEntityType(!0))),this.DefaultValue}isExecution(){return"exec"===this.PinType.PinCategory}isHidden(){return this.bHidden}isInput(){return!this.bHidden&&"EGPD_Output"!=this.Direction}isOutput(){return!this.bHidden&&"EGPD_Output"==this.Direction}isLinked(){return this.LinkedTo?.length>0??!1}linkTo(e,t){this.LinkedTo;const i=this.LinkedTo?.find((i=>i.objectName.toString()==e&&i.pinGuid.valueOf()==t.PinId.valueOf()));return!i&&((this.LinkedTo??(this.LinkedTo=[])).push(new Ce({objectName:e,pinGuid:t.PinId})),!0)}unlinkFrom(e,t){const i=this.LinkedTo?.findIndex((i=>i.objectName.toString()==e&&i.pinGuid.valueOf()==t.PinId.valueOf()));return i>=0&&(1==this.LinkedTo.length?this.LinkedTo=void 0:this.LinkedTo.splice(i,1),!0)}getSubCategory(){return this.PinType.PinSubCategoryObject.path}}class $e extends le{static attributes={value:""};static{this.cleanupAttributes(this.attributes)}constructor(e){super(e),this.value}}class De extends le{static attributes={MemberScope:{value:"",showDefault:!1},MemberName:"",MemberGuid:{type:pe},bSelfContext:{value:!1,showDefault:!1}};static{this.cleanupAttributes(this.attributes)}constructor(e){super(e),this.MemberName,this.GuidEntity,this.bSelfContext}}class Be extends le{static attributes={Class:{type:he},Name:"",bIsPureFunc:{value:!1,showDefault:!1},VariableReference:{type:De,value:null,showDefault:!1},SelfContextInfo:{type:$e,value:null,showDefault:!1},FunctionReference:{type:de,value:null,showDefault:!1},EventReference:{type:de,value:null,showDefault:!1},TargetType:{type:he,value:null,showDefault:!1},MacroGraphReference:{type:Ee,value:null,showDefault:!1},Enum:{type:he,showDefault:!1},CommentColor:{type:ye,showDefault:!1},bCommentBubbleVisible_InDetailsPanel:{type:Boolean,showDefault:!1},bColorCommentBubble:{type:Boolean,value:!1,showDefault:!1},MoveMode:{type:$e,showDefault:!1},NodePosX:{type:ue},NodePosY:{type:ue},NodeWidth:{type:ue,showDefault:!1},NodeHeight:{type:ue,showDefault:!1},bCommentBubblePinned:{type:Boolean,showDefault:!1},bCommentBubbleVisible:{type:Boolean,showDefault:!1},NodeComment:{type:String,showDefault:!1},AdvancedPinDisplay:{type:me,value:null,showDefault:!1},EnabledState:{type:me,value:null,showDefault:!1},NodeGuid:{type:pe},ErrorType:{type:ue,showDefault:!1},ErrorMsg:{type:String,value:"",showDefault:!1},CustomProperties:{type:[Me]}};static nameRegex=/^(\w+?)(?:_(\d+))?$/;static sequencerScriptingNameRegex=/\/Script\/SequencerScripting\.MovieSceneScripting(.+)Channel/;static{this.cleanupAttributes(this.attributes)}constructor(e,t=!1){super(e,t),this.Class,this.Name,this.bIsPureFunc,this.VariableReference,this.FunctionReference,this.EventReference,this.TargetType,this.MacroGraphReference,this.Enum,this.CommentColor,this.bCommentBubbleVisible_InDetailsPanel,this.NodePosX,this.NodePosY,this.NodeWidth,this.NodeHeight,this.bCommentBubblePinned,this.bCommentBubbleVisible,this.NodeComment,this.AdvancedPinDisplay,this.EnabledState,this.NodeGuid,this.ErrorType,this.ErrorMsg,this.CustomProperties}getClass(){return this.Class.path}getType(){let e=this.getClass();return e===re.nodeType.macro?this.MacroGraphReference.MacroGraph.path:e}getObjectName(e=!1){return e?this.getNameAndCounter()[0]:this.Name}getNameAndCounter(){const e=this.getObjectName(!1).match(Be.nameRegex);let t="",i=null;return e?(e.length>1&&(t=e[1]),e.length>2&&(i=parseInt(e[2])),[t,i]):["",0]}getCounter(){return this.getNameAndCounter()[1]}getNodeWidth(){return this.NodeWidth??this.getType()==re.nodeType.comment?re.defaultCommentWidth:void 0}setNodeWidth(e){this.NodeWidth||(this.NodeWidth=new ue),this.NodeWidth.value=e}getNodeHeight(){return this.NodeHeight??this.getType()==re.nodeType.comment?re.defaultCommentHeight:void 0}setNodeHeight(e){this.NodeHeight||(this.NodeHeight=new ue),this.NodeHeight.value=e}}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function He(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Oe={exports:{}};"undefined"!=typeof self&&self;var ze=He(Oe.exports=function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){function n(e){if(!(this instanceof n))return new n(e);this._=e}var s=n.prototype;function r(e,t){for(var i=0;i<e;i++)t(i)}function a(e,t,i){return function(e,t){r(t.length,(function(i){e(t[i],i,t)}))}((function(i,n,s){t=e(t,i,n,s)}),i),t}function o(e,t){return a((function(t,i,n,s){return t.concat([e(i,n,s)])}),[],t)}function l(e,t){var i={v:0,buf:t};return r(e,(function(){var e;i={v:i.v<<1|(e=i.buf,e[0]>>7),buf:function(e){var t=a((function(e,t,i,n){return e.concat(i===n.length-1?Buffer.from([t,0]).readUInt16BE(0):n.readUInt16BE(i))}),[],e);return Buffer.from(o((function(e){return(e<<1&65535)>>8}),t))}(i.buf)}})),i}function u(){return"undefined"!=typeof Buffer}function c(){if(!u())throw new Error("Buffer global does not exist; please use webpack if you need to parse Buffers in the browser.")}function h(e){c();var t=a((function(e,t){return e+t}),0,e);if(t%8!=0)throw new Error("The bits ["+e.join(", ")+"] add up to "+t+" which is not an even number of bytes; the total should be divisible by 8");var i,s=t/8,r=(i=function(e){return e>48},a((function(e,t){return e||(i(t)?t:e)}),null,e));if(r)throw new Error(r+" bit range requested exceeds 48 bit (6 byte) Number max.");return new n((function(t,i){var n=s+i;return n>t.length?S(i,s.toString()+" bytes"):E(n,a((function(e,t){var i=l(t,e.buf);return{coll:e.coll.concat(i.v),buf:i.buf}}),{coll:[],buf:t.slice(i,n)},e).coll)}))}function d(e,t){return new n((function(i,n){return c(),n+t>i.length?S(n,t+" bytes for "+e):E(n+t,i.slice(n,n+t))}))}function p(e,t){if("number"!=typeof(i=t)||Math.floor(i)!==i||t<0||t>6)throw new Error(e+" requires integer length in range [0, 6].");var i}function m(e){return p("uintBE",e),d("uintBE("+e+")",e).map((function(t){return t.readUIntBE(0,e)}))}function g(e){return p("uintLE",e),d("uintLE("+e+")",e).map((function(t){return t.readUIntLE(0,e)}))}function b(e){return p("intBE",e),d("intBE("+e+")",e).map((function(t){return t.readIntBE(0,e)}))}function v(e){return p("intLE",e),d("intLE("+e+")",e).map((function(t){return t.readIntLE(0,e)}))}function f(e){return e instanceof n}function y(e){return"[object Array]"==={}.toString.call(e)}function w(e){return u()&&Buffer.isBuffer(e)}function E(e,t){return{status:!0,index:e,value:t,furthest:-1,expected:[]}}function S(e,t){return y(t)||(t=[t]),{status:!1,index:-1,value:null,furthest:e,expected:t}}function C(e,t){if(!t)return e;if(e.furthest>t.furthest)return e;var i=e.furthest===t.furthest?function(e,t){if(function(){if(void 0!==n._supportsSet)return n._supportsSet;var e="undefined"!=typeof Set;return n._supportsSet=e,e}()&&Array.from){for(var i=new Set(e),s=0;s<t.length;s++)i.add(t[s]);var r=Array.from(i);return r.sort(),r}for(var a={},o=0;o<e.length;o++)a[e[o]]=!0;for(var l=0;l<t.length;l++)a[t[l]]=!0;var u=[];for(var c in a)({}).hasOwnProperty.call(a,c)&&u.push(c);return u.sort(),u}(e.expected,t.expected):t.expected;return{status:e.status,index:e.index,value:e.value,furthest:t.furthest,expected:i}}var P={};function k(e,t){if(w(e))return{offset:t,line:-1,column:-1};e in P||(P[e]={});for(var i=P[e],n=0,s=0,r=0,a=t;a>=0;){if(a in i){n=i[a].line,0===r&&(r=i[a].lineStart);break}("\n"===e.charAt(a)||"\r"===e.charAt(a)&&"\n"!==e.charAt(a+1))&&(s++,0===r&&(r=a+1)),a--}var o=n+s,l=t-r;return i[t]={line:o,lineStart:r},{offset:t,line:o+1,column:l+1}}function x(e){if(!f(e))throw new Error("not a parser: "+e)}function L(e,t){return"string"==typeof e?e.charAt(t):e[t]}function N(e){if("number"!=typeof e)throw new Error("not a number: "+e)}function T(e){if("function"!=typeof e)throw new Error("not a function: "+e)}function A(e){if("string"!=typeof e)throw new Error("not a string: "+e)}var M=2,$=3,D=8,B=5*D,H=4*D,O="  ";function z(e,t){return new Array(t+1).join(e)}function V(e,t,i){var n=t-e.length;return n<=0?e:z(i,n)+e}function I(e,t,i,n){return{from:e-t>0?e-t:0,to:e+i>n?n:e+i}}function R(e,t){var i,n,s,r,l,u=t.index,c=u.offset,h=1;if(c===e.length)return"Got the end of the input";if(w(e)){var d=c-c%D,p=c-d,m=I(d,B,H+D,e.length),g=o((function(e){return o((function(e){return V(e.toString(16),2,"0")}),e)}),function(e,t){var i=e.length,n=[],s=0;if(i<=t)return[e.slice()];for(var r=0;r<i;r++)n[s]||n.push([]),n[s].push(e[r]),(r+1)%t==0&&s++;return n}(e.slice(m.from,m.to).toJSON().data,D));r=function(e){return 0===e.from&&1===e.to?{from:e.from,to:e.to}:{from:e.from/D,to:Math.floor(e.to/D)}}(m),n=d/D,i=3*p,p>=4&&(i+=1),h=2,s=o((function(e){return e.length<=4?e.join(" "):e.slice(0,4).join(" ")+"  "+e.slice(4).join(" ")}),g),(l=(8*(r.to>0?r.to-1:r.to)).toString(16).length)<2&&(l=2)}else{var b=e.split(/\r\n|[\n\r\u2028\u2029]/);i=u.column-1,n=u.line-1,r=I(n,M,$,b.length),s=b.slice(r.from,r.to),l=r.to.toString().length}var v=n-r.from;return w(e)&&(l=(8*(r.to>0?r.to-1:r.to)).toString(16).length)<2&&(l=2),a((function(t,n,s){var a,o=s===v,u=o?"> ":O;return a=w(e)?V((8*(r.from+s)).toString(16),l,"0"):V((r.from+s+1).toString(),l," "),[].concat(t,[u+a+" | "+n],o?[O+z(" ",l)+" | "+V("",i," ")+z("^",h)]:[])}),[],s).join("\n")}function _(e,t){return["\n","-- PARSING FAILED "+z("-",50),"\n\n",R(e,t),"\n\n",(i=t.expected,1===i.length?"Expected:\n\n"+i[0]:"Expected one of the following: \n\n"+i.join(", ")),"\n"].join("");var i}function F(e){return void 0!==e.flags?e.flags:[e.global?"g":"",e.ignoreCase?"i":"",e.multiline?"m":"",e.unicode?"u":"",e.sticky?"y":""].join("")}function G(){for(var e=[].slice.call(arguments),t=e.length,i=0;i<t;i+=1)x(e[i]);return n((function(i,n){for(var s,r=new Array(t),a=0;a<t;a+=1){if(!(s=C(e[a]._(i,n),s)).status)return s;r[a]=s.value,n=s.index}return C(E(n,r),s)}))}function j(){var e=[].slice.call(arguments);if(0===e.length)throw new Error("seqMap needs at least one argument");var t=e.pop();return T(t),G.apply(null,e).map((function(e){return t.apply(null,e)}))}function U(){var e=[].slice.call(arguments),t=e.length;if(0===t)return Z("zero alternates");for(var i=0;i<t;i+=1)x(e[i]);return n((function(t,i){for(var n,s=0;s<e.length;s+=1)if((n=C(e[s]._(t,i),n)).status)return n;return n}))}function X(e,t){return W(e,t).or(K([]))}function W(e,t){return x(e),x(t),j(e,t.then(e).many(),(function(e,t){return[e].concat(t)}))}function Y(e){A(e);var t="'"+e+"'";return n((function(i,n){var s=n+e.length,r=i.slice(n,s);return r===e?E(s,r):S(n,t)}))}function q(e,t){!function(e){if(!(e instanceof RegExp))throw new Error("not a regexp: "+e);for(var t=F(e),i=0;i<t.length;i++){var n=t.charAt(i);if("i"!==n&&"m"!==n&&"u"!==n&&"s"!==n)throw new Error('unsupported regexp flag "'+n+'": '+e)}}(e),arguments.length>=2?N(t):t=0;var i=function(e){return RegExp("^(?:"+e.source+")",F(e))}(e),s=""+e;return n((function(e,n){var r=i.exec(e.slice(n));if(r){if(0<=t&&t<=r.length){var a=r[0],o=r[t];return E(n+a.length,o)}return S(n,"valid match group (0 to "+r.length+") in "+s)}return S(n,s)}))}function K(e){return n((function(t,i){return E(i,e)}))}function Z(e){return n((function(t,i){return S(i,e)}))}function J(e){if(f(e))return n((function(t,i){var n=e._(t,i);return n.index=i,n.value="",n}));if("string"==typeof e)return J(Y(e));if(e instanceof RegExp)return J(q(e));throw new Error("not a string, regexp, or parser: "+e)}function Q(e){return x(e),n((function(t,i){var n=e._(t,i),s=t.slice(i,n.index);return n.status?S(i,'not "'+s+'"'):E(i,null)}))}function ee(e){return T(e),n((function(t,i){var n=L(t,i);return i<t.length&&e(n)?E(i+1,n):S(i,"a character/byte matching "+e)}))}function te(e,t){arguments.length<2&&(t=e,e=void 0);var i=n((function(e,n){return i._=t()._,i._(e,n)}));return e?i.desc(e):i}function ie(){return Z("fantasy-land/empty")}s.parse=function(e){if("string"!=typeof e&&!w(e))throw new Error(".parse must be called with a string or Buffer as its argument");var t,i=this.skip(ae)._(e,0);return t=i.status?{status:!0,value:i.value}:{status:!1,index:k(e,i.furthest),expected:i.expected},delete P[e],t},s.tryParse=function(e){var t=this.parse(e);if(t.status)return t.value;var i=_(e,t),n=new Error(i);throw n.type="ParsimmonError",n.result=t,n},s.assert=function(e,t){return this.chain((function(i){return e(i)?K(i):Z(t)}))},s.or=function(e){return U(this,e)},s.trim=function(e){return this.wrap(e,e)},s.wrap=function(e,t){return j(e,this,t,(function(e,t){return t}))},s.thru=function(e){return e(this)},s.then=function(e){return x(e),G(this,e).map((function(e){return e[1]}))},s.many=function(){var e=this;return n((function(t,i){for(var n=[],s=void 0;;){if(!(s=C(e._(t,i),s)).status)return C(E(i,n),s);if(i===s.index)throw new Error("infinite loop detected in .many() parser --- calling .many() on a parser which can accept zero characters is usually the cause");i=s.index,n.push(s.value)}}))},s.tieWith=function(e){return A(e),this.map((function(t){if(function(e){if(!y(e))throw new Error("not an array: "+e)}(t),t.length){A(t[0]);for(var i=t[0],n=1;n<t.length;n++)A(t[n]),i+=e+t[n];return i}return""}))},s.tie=function(){return this.tieWith("")},s.times=function(e,t){var i=this;return arguments.length<2&&(t=e),N(e),N(t),n((function(n,s){for(var r=[],a=void 0,o=void 0,l=0;l<e;l+=1){if(o=C(a=i._(n,s),o),!a.status)return o;s=a.index,r.push(a.value)}for(;l<t&&(o=C(a=i._(n,s),o),a.status);l+=1)s=a.index,r.push(a.value);return C(E(s,r),o)}))},s.result=function(e){return this.map((function(){return e}))},s.atMost=function(e){return this.times(0,e)},s.atLeast=function(e){return j(this.times(e),this.many(),(function(e,t){return e.concat(t)}))},s.map=function(e){T(e);var t=this;return n((function(i,n){var s=t._(i,n);return s.status?C(E(s.index,e(s.value)),s):s}))},s.contramap=function(e){T(e);var t=this;return n((function(i,n){var s=t.parse(e(i.slice(n)));return s.status?E(n+i.length,s.value):s}))},s.promap=function(e,t){return T(e),T(t),this.contramap(e).map(t)},s.skip=function(e){return G(this,e).map((function(e){return e[0]}))},s.mark=function(){return j(ne,this,ne,(function(e,t,i){return{start:e,value:t,end:i}}))},s.node=function(e){return j(ne,this,ne,(function(t,i,n){return{name:e,value:i,start:t,end:n}}))},s.sepBy=function(e){return X(this,e)},s.sepBy1=function(e){return W(this,e)},s.lookahead=function(e){return this.skip(J(e))},s.notFollowedBy=function(e){return this.skip(Q(e))},s.desc=function(e){y(e)||(e=[e]);var t=this;return n((function(i,n){var s=t._(i,n);return s.status||(s.expected=e),s}))},s.fallback=function(e){return this.or(K(e))},s.ap=function(e){return j(e,this,(function(e,t){return e(t)}))},s.chain=function(e){var t=this;return n((function(i,n){var s=t._(i,n);return s.status?C(e(s.value)._(i,s.index),s):s}))},s.concat=s.or,s.empty=ie,s.of=K,s["fantasy-land/ap"]=s.ap,s["fantasy-land/chain"]=s.chain,s["fantasy-land/concat"]=s.concat,s["fantasy-land/empty"]=s.empty,s["fantasy-land/of"]=s.of,s["fantasy-land/map"]=s.map;var ne=n((function(e,t){return E(t,k(e,t))})),se=n((function(e,t){return t>=e.length?S(t,"any character/byte"):E(t+1,L(e,t))})),re=n((function(e,t){return E(e.length,e.slice(t))})),ae=n((function(e,t){return t<e.length?S(t,"EOF"):E(t,null)})),oe=q(/[0-9]/).desc("a digit"),le=q(/[0-9]*/).desc("optional digits"),ue=q(/[a-z]/i).desc("a letter"),ce=q(/[a-z]*/i).desc("optional letters"),he=q(/\s*/).desc("optional whitespace"),de=q(/\s+/).desc("whitespace"),pe=Y("\r"),me=Y("\n"),ge=Y("\r\n"),be=U(ge,me,pe).desc("newline"),ve=U(be,ae);n.all=re,n.alt=U,n.any=se,n.cr=pe,n.createLanguage=function(e){var t={};for(var i in e)({}).hasOwnProperty.call(e,i)&&function(i){t[i]=te((function(){return e[i](t)}))}(i);return t},n.crlf=ge,n.custom=function(e){return n(e(E,S))},n.digit=oe,n.digits=le,n.empty=ie,n.end=ve,n.eof=ae,n.fail=Z,n.formatError=_,n.index=ne,n.isParser=f,n.lazy=te,n.letter=ue,n.letters=ce,n.lf=me,n.lookahead=J,n.makeFailure=S,n.makeSuccess=E,n.newline=be,n.noneOf=function(e){return ee((function(t){return e.indexOf(t)<0})).desc("none of '"+e+"'")},n.notFollowedBy=Q,n.of=K,n.oneOf=function(e){for(var t=e.split(""),i=0;i<t.length;i++)t[i]="'"+t[i]+"'";return ee((function(t){return e.indexOf(t)>=0})).desc(t)},n.optWhitespace=he,n.Parser=n,n.range=function(e,t){return ee((function(i){return e<=i&&i<=t})).desc(e+"-"+t)},n.regex=q,n.regexp=q,n.sepBy=X,n.sepBy1=W,n.seq=G,n.seqMap=j,n.seqObj=function(){for(var e,t={},i=0,s=(e=arguments,Array.prototype.slice.call(e)),r=s.length,a=0;a<r;a+=1){var o=s[a];if(!f(o)){if(y(o)&&2===o.length&&"string"==typeof o[0]&&f(o[1])){var l=o[0];if(Object.prototype.hasOwnProperty.call(t,l))throw new Error("seqObj: duplicate key "+l);t[l]=!0,i++;continue}throw new Error("seqObj arguments must be parsers or [string, parser] array pairs.")}}if(0===i)throw new Error("seqObj expects at least one named parser, found zero");return n((function(e,t){for(var i,n={},a=0;a<r;a+=1){var o,l;if(y(s[a])?(o=s[a][0],l=s[a][1]):(o=null,l=s[a]),!(i=C(l._(e,t),i)).status)return i;o&&(n[o]=i.value),t=i.index}return C(E(t,n),i)}))},n.string=Y,n.succeed=K,n.takeWhile=function(e){return T(e),n((function(t,i){for(var n=i;n<t.length&&e(L(t,n));)n++;return E(n,t.slice(i,n))}))},n.test=ee,n.whitespace=de,n["fantasy-land/empty"]=ie,n["fantasy-land/of"]=K,n.Binary={bitSeq:h,bitSeqObj:function(e){c();var t={},i=0,n=o((function(e){if(y(e)){var n=e;if(2!==n.length)throw new Error("["+n.join(", ")+"] should be length 2, got length "+n.length);if(A(n[0]),N(n[1]),Object.prototype.hasOwnProperty.call(t,n[0]))throw new Error("duplicate key in bitSeqObj: "+n[0]);return t[n[0]]=!0,i++,n}return N(e),[null,e]}),e);if(i<1)throw new Error("bitSeqObj expects at least one named pair, got ["+e.join(", ")+"]");var s=o((function(e){return e[0]}),n);return h(o((function(e){return e[1]}),n)).map((function(e){return a((function(e,t){return null!==t[0]&&(e[t[0]]=t[1]),e}),{},o((function(t,i){return[t,e[i]]}),s))}))},byte:function(e){if(c(),N(e),e>255)throw new Error("Value specified to byte constructor ("+e+"=0x"+e.toString(16)+") is larger in value than a single byte.");var t=(e>15?"0x":"0x0")+e.toString(16);return n((function(i,n){var s=L(i,n);return s===e?E(n+1,s):S(n,t)}))},buffer:function(e){return d("buffer",e).map((function(e){return Buffer.from(e)}))},encodedString:function(e,t){return d("string",t).map((function(t){return t.toString(e)}))},uintBE:m,uint8BE:m(1),uint16BE:m(2),uint32BE:m(4),uintLE:g,uint8LE:g(1),uint16LE:g(2),uint32LE:g(4),intBE:b,int8BE:b(1),int16BE:b(2),int32BE:b(4),intLE:v,int8LE:v(1),int16LE:v(2),int32LE:v(4),floatBE:d("floatBE",4).map((function(e){return e.readFloatBE(0)})),floatLE:d("floatLE",4).map((function(e){return e.readFloatLE(0)})),doubleBE:d("doubleBE",8).map((function(e){return e.readDoubleBE(0)})),doubleLE:d("doubleLE",8).map((function(e){return e.readDoubleLE(0)}))},e.exports=n}]));class Ve extends le{static attributes={lookbehind:{value:"",showDefault:!1,ignore:!0}};static{this.cleanupAttributes(this.attributes)}constructor(e){super(e),this.lookbehind}}let Ie=ze;class Re{static getGrammarForType(e,t,i=e.AttributeAnyValue){if(t.constructor===Object){let n,s=t.type;return n=s instanceof Array?Re.getGrammarForType(e,s[0]).trim(Ie.optWhitespace).sepBy(Ie.string(",")).skip(Ie.regex(/,?\s*/)).wrap(Ie.string("("),Ie.string(")")):s instanceof ne?s.types.map((t=>Re.getGrammarForType(e,se.getType(t)))).reduce(((t,i)=>i&&t!==e.AttributeAnyValue?t.or(i):e.AttributeAnyValue)):Re.getGrammarForType(e,s,i),!t.serialized||s instanceof String||(n=n.wrap(Ie.string('"'),Ie.string('"'))),t.nullable&&(n=n.or(e.Null)),n}switch(t){case BigInt:return e.BigInt;case Boolean:return e.Boolean;case ce:return e.Byte;case de:return e.FunctionReference;case pe:return e.Guid;case me:return e.Identifier;case ge:return e.Integer64;case ue:return e.Integer;case be:return e.InvariantText;case ye:return e.LinearColor;case we:return e.LocalizedText;case Ee:return e.MacroGraphReference;case Number:return e.Number;case he:return e.ObjectReference;case Se:return e.PathSymbol;case Me:return e.Pin;case Ce:return e.PinReference;case Pe:return e.PinType;case fe:return e.RealUnit;case ke:return e.Rotator;case xe:return e.SimpleSerializationRotator;case Ne:return e.SimpleSerializationVector2D;case Ae:return e.SimpleSerializationVector;case String:return e.String;case $e:return e.Symbol;case De:return e.VariableReference;case Le:return e.Vector2D;case Te:return e.Vector;default:return i}}static ReferencePath=(e,t)=>Ie.alt(t,Ie.seq(Ie.string("/"),t.map((e=>e.toString())).sepBy1(Ie.string(".")).tieWith(".").sepBy1(Ie.string(":")).tieWith(":")).tie().atLeast(2).tie());static createAttributeGrammar=(e,t,i=Ie.string("=").trim(Ie.optWhitespace))=>e.AttributeName.skip(i).chain((i=>{const n=i.split("."),s=se.objectGet(t.attributes,n);return(s?s.constructor===Object&&s.serialized?e.String:Re.getGrammarForType(e,s,e.AttributeAnyValue):e.AttributeAnyValue).map((e=>t=>se.objectSet(t,n,e,!0)))}));static createEntityGrammar=(e,t,i=!0)=>Ie.seqMap(t.lookbehind?Ie.seq(Ie.string(t.lookbehind),Ie.optWhitespace,Ie.string("(")):Ie.string("("),Re.createAttributeGrammar(e,t).trim(Ie.optWhitespace).sepBy(Ie.string(",")).skip(Ie.regex(/,?/).then(Ie.optWhitespace)),Ie.string(")"),((e,t,i)=>{let n={};return t.forEach((e=>e(n))),n})).chain((e=>{let n=Object.keys(e);if(Object.keys(t.attributes).filter((e=>t.attributes[e].expected)).find((e=>!n.includes(e))))return Ie.fail();const s=Object.keys(e).filter((e=>!(e in t.attributes))).length;return!i&&s>0||i&&s+.5>Math.sqrt(n)?Ie.fail():Ie.succeed().map((()=>new t(e)))}));InlineWhitespace=e=>Ie.regex(/[^\S\n]+/).desc("single line whitespace");InlineOptWhitespace=e=>Ie.regex(/[^\S\n]*/).desc("single line optional whitespace");MultilineWhitespace=e=>Ie.regex(/[^\S\n]*\n\s*/).desc("whitespace with at least a newline");Null=e=>Ie.seq(Ie.string("("),e.InlineOptWhitespace,Ie.string(")")).map((()=>null)).desc("null: ()");Boolean=e=>Ie.alt(Ie.string("True"),Ie.string("true"),Ie.string("False"),Ie.string("false")).map((e=>"true"===e.toLocaleLowerCase())).desc("either True or False");HexDigit=e=>Ie.regex(/[0-9a-fA-f]/).desc("hexadecimal digit");Number=e=>Ie.regex(/[-\+]?[0-9]+(?:\.[0-9]+)?/).map(Number).desc("a number");BigInt=e=>Ie.regex(/[\-\+]?[0-9]+/).map((e=>BigInt(e))).desc("a big integer");RealNumber=e=>Ie.regex(/[-\+]?[0-9]+\.[0-9]+/).map(Number).desc("a number written as real");RealUnit=e=>Ie.regex(/\+?[0-9]+(?:\.[0-9]+)?/).map(Number).assert((e=>e>=0&&e<=1)).desc("a number between 0 and 1");NaturalNumber=e=>Ie.regex(/0|[1-9]\d*/).map(Number).desc("a natural number");ColorNumber=e=>e.NaturalNumber.assert((e=>0<=e&&e<256),"the color must be between 0 and 256 excluded");Word=e=>Ie.regex(/[a-zA-Z_]+/).desc("a word");String=e=>Ie.regex(/(?:[^"\\]|\\.)*/).wrap(Ie.string('"'),Ie.string('"')).map(se.unescapeString).desc('string (with possibility to escape the quote using ")');AttributeName=e=>e.Word.sepBy1(Ie.string(".")).tieWith(".").desc("dot-separated words");None=e=>Ie.string("None").map((()=>new he({type:"None",path:""}))).desc("none");Integer64=e=>e.BigInt.map((e=>new ge(e))).desc("an integer64");Integer=e=>Ie.regex(/[\-\+]?[0-9]+/).map((e=>new ue(e))).desc("an integer");Byte=e=>Ie.regex(/\+?[0-9]+/).map((e=>parseInt(e))).assert((e=>e>=0&&e<256)).map((e=>new ce(e))).desc("a Byte");Guid=e=>e.HexDigit.times(32).tie().map((e=>new pe({value:e}))).desc("32 digit hexadecimal value");Identifier=e=>Ie.regex(/\w+/).map((e=>new me(e)));PathSymbol=e=>Ie.regex(/[0-9\w]+/).map((e=>new Se({value:e})));PathSymbolOptSpaces=e=>Ie.regex(/[0-9\w]+(?: [0-9\w]+)+|[0-9\w]+/).map((e=>new Se({value:e})));Symbol=e=>Ie.regex(/\w+/).map((e=>new $e({value:e})));ObjectReference=e=>Ie.alt(e.None,...[Re.ReferencePath(e,e.PathSymbolOptSpaces).map((e=>new he({type:"",path:e})))].flatMap((e=>[e.wrap(Ie.string('"'),Ie.string('"')),e.wrap(Ie.string("'\""),Ie.string("\"'"))])),Ie.seqMap(Re.ReferencePath(e,e.PathSymbolOptSpaces),Ie.optWhitespace,Ie.alt(...[Re.ReferencePath(e,e.PathSymbolOptSpaces)].flatMap((e=>[e.wrap(Ie.string('"'),Ie.string('"')),e.wrap(Ie.string("'\""),Ie.string("\"'"))]))),((e,t,i)=>new he({type:e,path:i}))),Re.ReferencePath(e,e.PathSymbol).map((e=>new he({type:"",path:e}))),e.Word.map((e=>new he({type:e,path:""}))));LocalizedText=e=>Ie.seqMap(Ie.string(we.lookbehind).skip(Ie.optWhitespace).skip(Ie.string("(")),e.String.trim(Ie.optWhitespace),Ie.string(","),e.String.trim(Ie.optWhitespace),Ie.string(","),e.String.trim(Ie.optWhitespace),Ie.string(")"),((e,t,i,n,s,r,a)=>new we({namespace:t,key:n,value:r})));InvariantText=e=>e.String.trim(Ie.optWhitespace).wrap(Ie.string(be.lookbehind).skip(Ie.optWhitespace).skip(Ie.string("(")),Ie.string(")")).map((e=>new be({value:e})));AttributeAnyValue=e=>Ie.alt(e.Boolean,e.Guid,e.None,e.Null,e.Number,e.String,e.LocalizedText,e.InvariantText,e.PinReference,e.Vector,e.LinearColor,e.Vector2D,e.UnknownKeys,e.ObjectReference,e.Symbol);PinReference=e=>Ie.seqMap(e.PathSymbol,Ie.whitespace,e.Guid,((e,t,i)=>new Ce({objectName:e,pinGuid:i})));PinType=e=>Re.createEntityGrammar(e,Pe,!0);Vector2D=e=>Re.createEntityGrammar(e,Le,!1);Vector=e=>Re.createEntityGrammar(e,Te,!1);Rotator=e=>Re.createEntityGrammar(e,ke,!1);SimpleSerializationRotator=e=>Ie.seqMap(e.Number,Ie.string(",").trim(Ie.optWhitespace),e.Number,Ie.string(",").trim(Ie.optWhitespace),e.Number,((e,t,i,n,s)=>new xe({R:s,P:e,Y:i})));SimpleSerializationVector2D=e=>Ie.seqMap(e.Number,Ie.string(",").trim(Ie.optWhitespace),e.Number,((e,t,i)=>new Ne({X:e,Y:i})));SimpleSerializationVector=e=>Ie.seqMap(e.Number,Ie.string(",").trim(Ie.optWhitespace),e.Number,Ie.string(",").trim(Ie.optWhitespace),e.Number,((e,t,i,n,s)=>new Ae({X:e,Y:i,Z:s})));LinearColor=e=>Re.createEntityGrammar(e,ye,!1);FunctionReference=e=>Re.createEntityGrammar(e,de);VariableReference=e=>Re.createEntityGrammar(e,De);MacroGraphReference=e=>Re.createEntityGrammar(e,Ee);KeyBinding=e=>Ie.alt(e.Identifier.map((e=>new ve({Key:e}))),Re.createEntityGrammar(e,ve));Pin=e=>Re.createEntityGrammar(e,Me);CustomProperties=e=>Ie.string("CustomProperties").then(Ie.whitespace).then(e.Pin).map((e=>t=>{let i=se.objectGet(t,["CustomProperties"],[]);i.push(e),se.objectSet(t,["CustomProperties"],i,!0)}));Object=e=>Ie.seqMap(Ie.seq(Ie.string("Begin"),Ie.whitespace,Ie.string("Object"),Ie.whitespace),Ie.alt(e.CustomProperties,Re.createAttributeGrammar(e,Be)).sepBy1(Ie.whitespace),Ie.seq(e.MultilineWhitespace,Ie.string("End"),Ie.whitespace,Ie.string("Object")),((e,t,i)=>{let n={};return t.forEach((e=>e(n))),new Be(n)}));MultipleObject=e=>e.Object.sepBy1(Ie.whitespace).trim(Ie.optWhitespace);LinearColorFromHex=e=>Ie.string("#").then(e.HexDigit.times(2).tie().times(3,4)).trim(Ie.optWhitespace).map((([e,t,i,n])=>new ye({R:parseInt(e,16)/255,G:parseInt(t,16)/255,B:parseInt(i,16)/255,A:n?parseInt(n,16)/255:1})));LinearColorFromRGBList=e=>Ie.seqMap(e.ColorNumber,Ie.string(",").skip(Ie.optWhitespace),e.ColorNumber,Ie.string(",").skip(Ie.optWhitespace),e.ColorNumber.map(Number),((e,t,i,n,s)=>new ye({R:e/255,G:i/255,B:s/255,A:1})));LinearColorFromRGB=e=>Ie.string("rgb").then(e.LinearColorFromRGBList.wrap(Ie.regex(/\(\s*/),Ie.regex(/\s*\)/)));LinearColorFromRGBA=e=>Ie.string("rgba").then(Ie.seqMap(e.ColorNumber,Ie.string(",").skip(Ie.optWhitespace),e.ColorNumber,Ie.string(",").skip(Ie.optWhitespace),e.ColorNumber.map(Number),Ie.string(",").skip(Ie.optWhitespace),Ie.regex(/0?\.\d+|[01]/).map(Number),((e,t,i,n,s,r,a)=>new ye({R:e/255,G:i/255,B:s/255,A:a}))).wrap(Ie.regex(/\(\s*/),Ie.regex(/\s*\)/)));LinearColorFromAnyColor=e=>Ie.alt(e.LinearColorFromRGBList,e.LinearColorFromHex,e.LinearColorFromRGB,e.LinearColorFromRGBA);UnknownKeys=e=>Ie.seqMap(Ie.regex(/\w*\s*/).skip(Ie.string("(")),Ie.seqMap(e.AttributeName,Ie.string("=").trim(Ie.optWhitespace),e.AttributeAnyValue,((e,t,i)=>t=>se.objectSet(t,e.split("."),i,!0))).trim(Ie.optWhitespace).sepBy(Ie.string(",")).skip(Ie.regex(/,?/).then(Ie.optWhitespace)),Ie.string(")"),((e,t,i)=>{let n={};t.forEach((e=>e(n)));let s=new Ve(n);return e&&(s.lookbehind=e),s}))}class _e{static grammar=ze.createLanguage(new Re);constructor(e,t="",i=",",n=!1,s="=",r=(e=>e.join("."))){this.entityType=e,this.attributePrefix=t,this.attributeSeparator=i,this.trailingSeparator=n,this.attributeValueConjunctionSign=s,this.attributeKeyPrinter=r}deserialize(e){return this.read(e)}serialize(e,t=!1,i=e){return this.write(i,e,t)}read(e){throw new Error("Not implemented")}write(e,t,i){throw new Error("Not implemented")}writeValue(e,t,i,n){const s=se.getType(t),r=oe.getSerializer(s);if(!r)throw new Error(`Unknown value type "${s.name}", a serializer must be registered in the SerializerFactory class, check initializeSerializerFactory.js`);return r.write(t instanceof le?t:e,t,n)}subWrite(e,t,i,n){let s="",r=t.concat("");const a=r.length-1,o=i.constructor.attributes,l=o?se.mergeArrays(Object.keys(o),Object.keys(i)):Object.keys(i);for(const t of l){r[a]=t;const o=i[t];if(o?.constructor===Object)s+=(s.length?this.attributeSeparator:"")+this.subWrite(e,r,o,n);else if(void 0!==o&&this.showProperty(e,i,r,o)){const t=se.isSerialized(e,r);s+=(s.length?this.attributeSeparator:"")+this.attributePrefix+this.attributeKeyPrinter(r)+this.attributeValueConjunctionSign+(t?`"${this.writeValue(e,o,r,!0)}"`:this.writeValue(e,o,r,n))}}return this.trailingSeparator&&s.length&&1===r.length&&(s+=this.attributeSeparator),s}showProperty(e,t,i,n){const s=this.entityType.attributes,r=se.objectGet(s,i);return r?.constructor!==Object||!r.ignored&&(!se.equals(r.value,n)||r.showDefault)}}class Fe extends _e{constructor(){super(Be,"   ","\n",!1)}showProperty(e,t,i,n){switch(i.toString()){case"Class":case"Name":case"CustomProperties":return!1}return super.showProperty(e,t,i,n)}read(e){const t=_e.grammar.Object.parse(e);if(!t.status)throw new Error("Error when trying to parse the object.");return t.value}readMultiple(e){const t=_e.grammar.MultipleObject.parse(e);if(!t.status)throw new Error("Error when trying to parse the object.");return t.value}write(e,t,i){return`Begin Object Class=${t.Class.path} Name=${this.writeValue(e,t.Name,["Name"],i)}\n${this.subWrite(e,[],t,i)+t.CustomProperties.map((e=>this.attributeSeparator+this.attributePrefix+"CustomProperties "+oe.getSerializer(Me).serialize(e))).join("")}\nEnd Object\n`}}class Ge extends ae{static#l=new Fe;#u;constructor(e,t,i={}){i.listenOnFocus??=!0,i.unlistenOnTextEdit??=!0,super(e,t,i);let n=this;this.#u=e=>n.copied()}listenEvents(){window.addEventListener("copy",this.#u)}unlistenEvents(){window.removeEventListener("copy",this.#u)}getSerializedText(){return this.blueprint.getNodes(!0).map((e=>Ge.#l.serialize(e.entity,!1))).join("")}copied(){const e=this.getSerializedText();navigator.clipboard.writeText(e)}}class je{element;get blueprint(){return this.element.blueprint}#c=[];get inputObjects(){return this.#c}initialize(e){this.element=e}createInputObjects(){return[]}setup(){this.#c.forEach((e=>e.setup()))}cleanup(){this.#c.forEach((e=>e.cleanup()))}willUpdate(e){}update(e){}render(){return B``}firstUpdated(e){}updated(e){}inputSetup(){this.#c=this.createInputObjects()}}class Ue extends ae{#h;constructor(e,t,i={}){i.activateAnyKey??=!1,i.activationKeys??=[],i.consumeEvent??=!0,i.listenOnFocus??=!0,i.unlistenOnTextEdit??=!0,i.activationKeys instanceof Array||(i.activationKeys=[i.activationKeys]),i.activationKeys=i.activationKeys.map((e=>{if(e instanceof ve)return e;if(e.constructor===String){const t=_e.grammar.KeyBinding.parse(e);if(t.status)return t.value}throw new Error("Unexpected key value")})),super(e,t,i),this.#h=this.options.activationKeys??[];let n=this;this.keyDownHandler=e=>{(this.options.activateAnyKey||n.#h.some((t=>(e=>e.bShift||"LeftShift"==e.Key||"RightShift"==e.Key)(t)==e.shiftKey&&(e=>e.bCtrl||"LeftControl"==e.Key||"RightControl"==e.Key)(t)==e.ctrlKey&&(e=>e.bAlt||"LeftAlt"==e.Key||"RightAlt"==e.Key)(t)==e.altKey&&re.Keys[t.Key]==e.code)))&&(i.consumeEvent&&(e.preventDefault(),e.stopImmediatePropagation()),n.fire(),document.removeEventListener("keydown",n.keyDownHandler),document.addEventListener("keyup",n.keyUpHandler))},this.keyUpHandler=e=>{(this.options.activateAnyKey||n.#h.some((t=>t.bShift&&"Shift"==e.key||t.bCtrl&&"Control"==e.key||t.bAlt&&"Alt"==e.key||t.bCmd&&"Meta"==e.key||re.Keys[t.Key]==e.code)))&&(i.consumeEvent&&e.stopImmediatePropagation(),n.unfire(),document.removeEventListener("keyup",this.keyUpHandler),document.addEventListener("keydown",this.keyDownHandler))}}listenEvents(){document.addEventListener("keydown",this.keyDownHandler)}unlistenEvents(){document.removeEventListener("keydown",this.keyDownHandler)}fire(){}unfire(){}}class Xe extends Ue{constructor(e,t,i={}){i.activationKeys=re.deleteNodesKeyboardKey,super(e,t,i)}fire(){this.blueprint.removeGraphElement(...this.blueprint.getNodes(!0))}}class We extends ae{constructor(e,t,i={}){i.ignoreTranslateCompensate??=!1,i.ignoreScale??=!1,i.movementSpace??=t.getGridDOMElement()??document.documentElement,super(e,t,i),this.movementSpace=i.movementSpace}locationFromEvent(e){const t=se.convertLocation([e.clientX,e.clientY],this.movementSpace,this.options.ignoreScale);return this.options.ignoreTranslateCompensate?t:this.blueprint.compensateTranslation(t[0],t[1])}}class Ye extends We{#d=e=>{e.preventDefault();const t=this.locationFromEvent(e);this.wheel(Math.sign(e.deltaY*re.mouseWheelFactor),t)};#p=e=>e.preventDefault();constructor(e,t,i={}){i.listenOnFocus=!0,i.strictTarget??=!1,super(e,t,i),this.strictTarget=i.strictTarget}listenEvents(){this.movementSpace.addEventListener("wheel",this.#d,!1),this.movementSpace.parentElement?.addEventListener("wheel",this.#p)}unlistenEvents(){this.movementSpace.removeEventListener("wheel",this.#d,!1),this.movementSpace.parentElement?.removeEventListener("wheel",this.#p)}wheel(e,t){}}class qe extends Ye{#m=!1;get enableZoonIn(){return this.#m}set enableZoonIn(e){(e=Boolean(e))!=this.#m&&(this.#m=e)}wheel(e,t){let i=this.blueprint.getZoom();e=-e,!this.enableZoonIn&&0==i&&e>0||(i+=e,this.blueprint.setZoom(i,t))}}class Ke extends Ue{#g;constructor(e,t,i={}){i.activationKeys=re.enableZoomIn,super(e,t,i)}fire(){this.#g=this.blueprint.getInputObject(qe),this.#g.enableZoonIn=!0}unfire(){this.#g.enableZoonIn=!1}}class Ze extends Ue{constructor(e,t,i={}){i.activationKeys=re.selectAllKeyboardKey,super(e,t,i)}fire(){this.blueprint.selectAll()}}class Je extends Q{#b=[];#n;get blueprint(){return this.#n}set blueprint(e){this.#n=e}#v;get entity(){return this.#v}set entity(e){this.#v=e}#f;get template(){return this.#f}isInitialized=!1;isSetup=!1;inputObjects=[];initialize(e,t){this.requestUpdate(),this.#v=e,this.#f=t,this.#f.initialize(this),this.isConnected&&this.updateComplete.then((()=>this.setup())),this.isInitialized=!0}connectedCallback(){super.connectedCallback(),this.blueprint=this.closest("ueb-blueprint"),this.isInitialized&&(this.requestUpdate(),this.updateComplete.then((()=>this.setup())))}disconnectedCallback(){super.disconnectedCallback(),this.isSetup&&this.updateComplete.then((()=>this.cleanup()))}createRenderRoot(){return this}shouldUpdate(e){return this.isInitialized&&this.isConnected}setup(){this.template.setup(),this.isSetup=!0}cleanup(){this.template.cleanup(),this.isSetup=!1}willUpdate(e){super.willUpdate(e),this.template.willUpdate(e)}update(e){super.update(e),this.template.update(e)}render(){return this.template.render()}firstUpdated(e){super.firstUpdated(e),this.template.firstUpdated(e),this.template.inputSetup()}updated(e){super.updated(e),this.template.updated(e);for(const t of this.#b)t(e);this.#b=[]}addNextUpdatedCallbacks(e,t=!1){this.#b.push(e),t&&this.requestUpdate()}isSameGraph(e){return this.blueprint&&this.blueprint==e?.blueprint}getInputObject(e){return this.template.inputObjects.find((t=>t.constructor==e))}}class Qe extends Je{static properties={...super.properties,locationX:{type:Number,attribute:!1},locationY:{type:Number,attribute:!1},sizeX:{type:Number,attribute:!1},sizeY:{type:Number,attribute:!1}};static dragEventName=re.dragEventName;static dragGeneralEventName=re.dragGeneralEventName;constructor(){super(),this.locationX=0,this.locationY=0,this.sizeX=0,this.sizeY=0}computeSizes(){const e=1/this.blueprint.getScale(),t=this.getBoundingClientRect();this.sizeX=t.width*e,this.sizeY=t.height*e}firstUpdated(e){super.firstUpdated(e),this.computeSizes()}setLocation(e,t,i=!0){const n=e-this.locationX,s=t-this.locationY;if(this.locationX=e,this.locationY=t,this.blueprint&&i){const e=new CustomEvent(this.constructor.dragEventName,{detail:{value:[n,s]},bubbles:!1,cancelable:!0});this.dispatchEvent(e)}}addLocation(e,t,i=!0){this.setLocation(this.locationX+e,this.locationY+t,i)}acknowledgeDrag(e){const t=new CustomEvent(this.constructor.dragGeneralEventName,{detail:{value:e},bubbles:!0,cancelable:!0});this.dispatchEvent(t)}snapToGrid(){const e=se.snapToGrid(this.locationX,this.locationY,re.gridSize);this.locationX==e[0]&&this.locationY==e[1]||this.setLocation(e[0],e[1])}topBoundary(e=!1){return this.template.topBoundary(e)}rightBoundary(e=!1){return this.template.rightBoundary(e)}bottomBoundary(e=!1){return this.template.bottomBoundary(e)}leftBoundary(e=!1){return this.template.leftBoundary(e)}}class et extends We{#y=e=>{if(this.blueprint.setFocused(!0),e.button===this.options.clickButton)this.options.strictTarget&&e.target!=e.currentTarget||(this.options.consumeEvent&&e.stopImmediatePropagation(),this.#w.addEventListener("mousemove",this.#E),document.addEventListener("mouseup",this.#S),this.clickedPosition=this.locationFromEvent(e),this.blueprint.mousePosition[0]=this.clickedPosition[0],this.blueprint.mousePosition[1]=this.clickedPosition[1],this.target instanceof Qe&&(this.clickedOffset=[this.clickedPosition[0]-this.target.locationX,this.clickedPosition[1]-this.target.locationY]),this.clicked(this.clickedPosition));else this.options.exitAnyButton||this.#S(e)};#E=e=>{this.options.consumeEvent&&e.stopImmediatePropagation(),this.#w.removeEventListener("mousemove",this.#E),this.#w.addEventListener("mousemove",this.#C);const t=this.getEvent(re.trackingMouseEventName.begin);this.#P=0==this.target.dispatchEvent(t);const i=this.locationFromEvent(e);this.lastLocation=se.snapToGrid(this.clickedPosition[0],this.clickedPosition[1],this.stepSize),this.startDrag(i),this.started=!0};#C=e=>{this.options.consumeEvent&&e.stopImmediatePropagation();const t=this.locationFromEvent(e),i=[e.movementX,e.movementY];this.dragTo(t,i),this.#P&&(this.blueprint.mousePosition=this.locationFromEvent(e))};#S=e=>{if(!this.options.exitAnyButton||e.button==this.options.clickButton){if(this.options.consumeEvent&&e.stopImmediatePropagation(),this.#w.removeEventListener("mousemove",this.#E),this.#w.removeEventListener("mousemove",this.#C),document.removeEventListener("mouseup",this.#S),this.started&&this.endDrag(),this.unclicked(),this.#P){const e=this.getEvent(re.trackingMouseEventName.end);this.target.dispatchEvent(e),this.#P=!1}this.started=!1}};#P=!1;#w;#k;clickedOffset=[0,0];clickedPosition=[0,0];lastLocation=[0,0];started=!1;stepSize=1;constructor(e,t,i={}){i.clickButton??=0,i.consumeEvent??=!0,i.draggableElement??=e,i.exitAnyButton??=!0,i.moveEverywhere??=!1,i.movementSpace??=t?.getGridDOMElement(),i.repositionOnClick??=!1,i.strictTarget??=!1,super(e,t,i),this.stepSize=parseInt(i?.stepSize??re.gridSize),this.#w=this.options.moveEverywhere?document.documentElement:this.movementSpace,this.#k=this.options.draggableElement,this.listenEvents()}listenEvents(){super.listenEvents(),this.#k.addEventListener("mousedown",this.#y),2==this.options.clickButton&&this.#k.addEventListener("contextmenu",(e=>e.preventDefault()))}unlistenEvents(){super.unlistenEvents(),this.#k.removeEventListener("mousedown",this.#y)}getEvent(e){return new CustomEvent(e,{detail:{tracker:this},bubbles:!0,cancelable:!0})}clicked(e){}startDrag(e){}dragTo(e,t){}endDrag(){}unclicked(e){}}class tt extends et{startDrag(){this.blueprint.scrolling=!0}dragTo(e,t){this.blueprint.scrollDelta(-t[0],-t[1])}endDrag(){this.blueprint.scrolling=!1}}class it extends We{#x=null;#L;#N;#T;constructor(e,t,i={}){i.listenOnFocus=!0,super(e,t,i);let n=this;this.#L=e=>{e.preventDefault(),n.blueprint.mousePosition=n.locationFromEvent(e)},this.#N=e=>{n.#x||(e.preventDefault(),this.#x=e.detail.tracker,n.unlistenMouseMove())},this.#T=e=>{n.#x==e.detail.tracker&&(e.preventDefault(),n.#x=null,n.listenMouseMove())}}listenMouseMove(){this.target.addEventListener("mousemove",this.#L)}unlistenMouseMove(){this.target.removeEventListener("mousemove",this.#L)}listenEvents(){this.listenMouseMove(),this.blueprint.addEventListener(re.trackingMouseEventName.begin,this.#N),this.blueprint.addEventListener(re.trackingMouseEventName.end,this.#T)}unlistenEvents(){this.unlistenMouseMove(),this.blueprint.removeEventListener(re.trackingMouseEventName.begin,this.#N),this.blueprint.removeEventListener(re.trackingMouseEventName.end,this.#T)}}class nt{static#A=new Map;static registerElement(e,t){nt.#A.set(e,t)}static getConstructor(e){return nt.#A.get(e)}}class st extends ae{static#l=new Fe;#M;constructor(e,t,i={}){i.listenOnFocus??=!0,i.unlistenOnTextEdit??=!0,super(e,t,i);let n=this;this.#M=e=>n.pasted(e.clipboardData.getData("Text"))}listenEvents(){window.addEventListener("paste",this.#M)}unlistenEvents(){window.removeEventListener("paste",this.#M)}pasted(e){let t=0,i=0,n=0,s=st.#l.readMultiple(e).map((e=>{let s=nt.getConstructor("ueb-node").newObject(e);return t+=s.locationY,i+=s.locationX,++n,s}));t/=n,i/=n,s.length>0&&this.blueprint.unselectAll();let r=this.blueprint.mousePosition;return s.forEach((e=>{e.addLocation(r[0]-i,r[1]-t),e.snapToGrid(),e.setSelected(!0)})),this.blueprint.addGraphElement(...s),!0}}class rt extends et{constructor(e,t,i){super(e,t,i),this.selectorElement=this.blueprint.template.selectorElement}startDrag(){this.selectorElement.beginSelect(this.clickedPosition)}dragTo(e,t){this.selectorElement.selectTo(e)}endDrag(){this.started&&this.selectorElement.endSelect()}unclicked(){this.started||this.blueprint.unselectAll()}}class at extends ae{#$;constructor(e,t,i={}){i.listenOnFocus=!0,super(e,t,i);let n=this;this.#$=e=>n.clickedSomewhere(e.target),this.blueprint.focus&&document.addEventListener("click",this.#$)}clickedSomewhere(e){e.closest("ueb-blueprint")||this.blueprint.setFocused(!1)}listenEvents(){document.addEventListener("click",this.#$)}unlistenEvents(){document.removeEventListener("click",this.#$)}}class ot extends je{static styleVariables={"--ueb-font-size":`${re.fontSize}`,"--ueb-grid-axis-line-color":`${re.gridAxisLineColor}`,"--ueb-grid-expand":`${re.expandGridSize}px`,"--ueb-grid-line-color":`${re.gridLineColor}`,"--ueb-grid-line-width":`${re.gridLineWidth}px`,"--ueb-grid-set-line-color":`${re.gridSetLineColor}`,"--ueb-grid-set":`${re.gridSet}`,"--ueb-grid-size":`${re.gridSize}px`,"--ueb-link-min-width":`${re.linkMinWidth}`,"--ueb-node-radius":`${re.nodeRadius}px`};#D=new ResizeObserver((e=>{const t=e.find((e=>e.target===this.viewportElement))?.devicePixelContentBoxSize?.[0];t&&(this.viewportSize[0]=t.inlineSize,this.viewportSize[1]=t.blockSize)}));headerElement;overlayElement;viewportElement;selectorElement;gridElement;linksContainerElement;nodesContainerElement;viewportSize=[0,0];initialize(e){super.initialize(e),this.element.style.cssText=Object.entries(ot.styleVariables).map((([e,t])=>`${e}:${t};`)).join("")}setup(){super.setup(),this.#D.observe(this.viewportElement,{box:"device-pixel-content-box"});const e=this.viewportElement.getBoundingClientRect();this.viewportSize[0]=e.width,this.viewportSize[1]=e.height,this.blueprint.requestUpdate(),this.blueprint.updateComplete.then((()=>this.centerContentInViewport()))}cleanup(){super.cleanup(),this.#D.unobserve(this.viewportElement)}createInputObjects(){return[...super.createInputObjects(),new Ge(this.element.getGridDOMElement(),this.element),new st(this.element.getGridDOMElement(),this.element),new Xe(this.element.getGridDOMElement(),this.element),new Ze(this.element.getGridDOMElement(),this.element),new qe(this.element.getGridDOMElement(),this.element),new rt(this.element.getGridDOMElement(),this.element,{clickButton:0,exitAnyButton:!0,moveEverywhere:!0}),new tt(this.element.getGridDOMElement(),this.element,{clickButton:2,exitAnyButton:!1,moveEverywhere:!0}),new at(this.element.getGridDOMElement(),this.element),new it(this.element.getGridDOMElement(),this.element),new Ke(this.element.getGridDOMElement(),this.element)]}render(){return B`<div class="ueb-viewport-header"><div class="ueb-viewport-zoom">Zoom ${0==this.element.zoom?"1:1":(this.element.zoom>0?"+":"")+this.element.zoom}</div></div><div class="ueb-viewport-overlay"></div><div class="ueb-viewport-body"><div class="ueb-grid" style="--ueb-additional-x:${Math.round(this.element.translateX)}--ueb-additional-y:${Math.round(this.element.translateY)}--ueb-translate-x:${Math.round(this.element.translateX)}--ueb-translate-y:${Math.round(this.element.translateY)}"><div class="ueb-grid-content"><div data-links></div><div data-nodes></div><ueb-selector></ueb-selector></div></div></div>`}firstUpdated(e){super.firstUpdated(e),this.headerElement=this.element.querySelector(".ueb-viewport-header"),this.overlayElement=this.element.querySelector(".ueb-viewport-overlay"),this.viewportElement=this.element.querySelector(".ueb-viewport-body"),this.selectorElement=this.element.querySelector("ueb-selector"),this.gridElement=this.viewportElement.querySelector(".ueb-grid"),this.linksContainerElement=this.element.querySelector("[data-links]"),this.linksContainerElement.append(...this.element.getLinks()),this.nodesContainerElement=this.element.querySelector("[data-nodes]"),this.nodesContainerElement.append(...this.element.getNodes()),this.viewportElement.scroll(re.expandGridSize,re.expandGridSize)}willUpdate(e){super.willUpdate(e),this.headerElement&&e.has("zoom")&&(this.headerElement.classList.add("ueb-zoom-changed"),this.headerElement.addEventListener("animationend",(()=>this.headerElement.classList.remove("ueb-zoom-changed"))))}updated(e){if(super.updated(e),(e.has("scrollX")||e.has("scrollY"))&&this.viewportElement.scroll(this.element.scrollX,this.element.scrollY),e.has("zoom")){this.element.style.setProperty("--ueb-scale",this.blueprint.getScale());const t=e.get("zoom"),i=Math.min(t,this.element.zoom),n=Math.max(t,this.element.zoom),s=se.range(i,n),r=e=>`ueb-zoom-${e}`;t<this.element.zoom?(this.element.classList.remove(...s.filter((e=>e<0)).map(r)),this.element.classList.add(...s.filter((e=>e>0)).map(r))):(this.element.classList.remove(...s.filter((e=>e>0)).map(r)),this.element.classList.add(...s.filter((e=>e<0)).map(r)))}}getCommentNodes(e=!1){return this.element.querySelectorAll(`ueb-node[data-type="${re.nodeType.comment}"]${e?'[data-selected="true"]':""}`)}getPin(e){return this.element.querySelector(`ueb-node[data-name="${e.objectName}"] ueb-pin[data-id="${e.pinGuid}"]`)}isPointVisible(e,t){return!1}gridTopVisibilityBoundary(){return this.blueprint.scrollY-this.blueprint.translateY}gridRightVisibilityBoundary(){return this.gridLeftVisibilityBoundary()+this.viewportSize[0]}gridBottomVisibilityBoundary(){return this.gridTopVisibilityBoundary()+this.viewportSize[1]}gridLeftVisibilityBoundary(){return this.blueprint.scrollX-this.blueprint.translateX}centerViewport(e=0,t=0,i=!0){const n=this.gridLeftVisibilityBoundary()+this.viewportSize[0]/2,s=this.gridTopVisibilityBoundary()+this.viewportSize[1]/2;this.blueprint.scrollDelta(e-n,t-s,i)}centerContentInViewport(e=!0){let t=0,i=0;const n=this.blueprint.getNodes();for(const e of n)t+=e.leftBoundary()+e.rightBoundary(),i+=e.topBoundary()+e.bottomBoundary();t=n.length>0?Math.round(t/(2*n.length)):0,i=n.length>0?Math.round(i/(2*n.length)):0,this.centerViewport(t,i,e)}}class lt extends Je{static properties={...super.properties,fromX:{type:Number,attribute:!1},fromY:{type:Number,attribute:!1},toX:{type:Number,attribute:!1},toY:{type:Number,attribute:!1}};constructor(){super(),this.fromX=0,this.fromY=0,this.toX=0,this.toY=0}setBothLocations([e,t]){this.fromX=e,this.fromY=t,this.toX=e,this.toY=t}addSourceLocation(e,t){this.fromX+=e,this.fromY+=t}addDestinationLocation(e,t){this.toX+=e,this.toY+=t}}class ut extends je{update(e){super.update(e);const[t,i,n,s]=[Math.round(this.element.fromX),Math.round(this.element.fromY),Math.round(this.element.toX),Math.round(this.element.toY)],[r,a,o,l]=[Math.min(t,n),Math.min(i,s),Math.abs(t-n),Math.abs(i-s)];(e.has("fromX")||e.has("toX"))&&(this.element.style.left=`${r}px`,this.element.style.width=`${o}px`),(e.has("fromY")||e.has("toY"))&&(this.element.style.top=`${a}px`,this.element.style.height=`${l}px`)}}class ct extends Be{constructor(e={},t){super(e,!0),this.Class=new he("/Script/BlueprintGraph.K2Node_Knot"),this.Name="K2Node_Knot";const i=new Me({PinName:"InputPin"},!0),n=new Me({PinName:"OutputPin",Direction:"EGPD_Output"},!0);t&&(i.copyTypeFrom(t),n.copyTypeFrom(t)),this.CustomProperties=[i,n]}}class ht extends We{static ignoreDbClick=e=>{};#B=e=>{this.options.strictTarget&&e.target!==e.currentTarget||(this.options.consumeEvent&&e.stopImmediatePropagation(),this.clickedPosition=this.locationFromEvent(e),this.blueprint.mousePosition[0]=this.clickedPosition[0],this.blueprint.mousePosition[1]=this.clickedPosition[1],this.dbclicked(this.clickedPosition))};#H;get onDbClick(){return this.#H}set onDbClick(e){this.#H=e}clickedPosition=[0,0];constructor(e,t,i={},n=ht.ignoreDbClick){i.consumeEvent??=!0,i.strictTarget??=!1,super(e,t,i),this.#H=n,this.listenEvents()}listenEvents(){this.target.addEventListener("dblclick",this.#B)}unlistenEvents(){this.target.removeEventListener("dblclick",this.#B)}dbclicked(e){this.onDbClick(e)}}class dt extends ut{static decreasingValue(e,t){const i=-e*t[0]**2,n=t[1]-i/t[0];return e=>i/e+n}static clampedLine(e,t){if(e[0]>t[0]){const i=e;e=t,t=i}const i=(t[1]-e[1])/(t[0]-e[0]),n=e[1]-i*e[0];return s=>s<e[0]?e[1]:s>t[0]?t[1]:i*s+n}static c1DecreasingValue=dt.decreasingValue(-.15,[100,15]);static c2DecreasingValue=dt.decreasingValue(-.06,[500,130]);static c2Clamped=dt.clampedLine([0,100],[200,30]);#O=e=>{const t=new ct({},this.element.sourcePin.entity),i=nt.getConstructor("ueb-node").newObject(t);i.setLocation(...this.blueprint.snapToGrid(...e)),this.blueprint.addGraphElement(i);const n=nt.getConstructor("ueb-link").newObject(i.template.outputPin,this.element.destinationPin);this.element.destinationPin=i.template.inputPin,this.blueprint.addGraphElement(n)};createInputObjects(){return[...super.createInputObjects(),new ht(this.element.querySelector(".ueb-link-area"),this.blueprint,void 0,(e=>this.#O(e)))]}willUpdate(e){super.willUpdate(e);const t=this.element.sourcePin,i=this.element.destinationPin;if(e.has("fromX")||e.has("toX")){const e=t?.nodeElement.getType()==re.nodeType.knot,n=i?.nodeElement.getType()==re.nodeType.knot;!e||i&&!n||(t?.isInput()&&this.element.toX>this.element.fromX+re.distanceThreshold?this.element.sourcePin=t.nodeElement.template.outputPin:t?.isOutput()&&this.element.toX<this.element.fromX-re.distanceThreshold&&(this.element.sourcePin=t.nodeElement.template.inputPin)),!n||t&&!e||(i?.isInput()&&this.element.toX<this.element.fromX+re.distanceThreshold?this.element.destinationPin=i.nodeElement.template.outputPin:i?.isOutput()&&this.element.toX>this.element.fromX-re.distanceThreshold&&(this.element.destinationPin=i.nodeElement.template.inputPin))}const n=Math.max(Math.abs(this.element.fromX-this.element.toX),1);Math.max(Math.abs(this.element.fromY-this.element.toY),1);const s=Math.max(n,re.linkMinWidth),r=n/s,a=this.element.originatesFromInput?this.element.fromX<this.element.toX:this.element.toX<this.element.fromX;this.element.startPixels=n<s?(s-n)/2:0,this.element.startPercentage=a?this.element.startPixels+100*r:this.element.startPixels;const o=this.element.startPercentage+(a?dt.c1DecreasingValue(s):10)*r;let l=dt.c2Clamped(a?-n:n)+this.element.startPercentage;l=Math.min(l,dt.c2DecreasingValue(s)),this.element.svgPathD=re.linkRightSVGPath(this.element.startPercentage,o,l)}update(e){super.update(e),e.has("originatesFromInput")&&this.element.style.setProperty("--ueb-from-input",this.element.originatesFromInput?"1":"0");const t=this.element.sourcePin??this.element.destinationPin;t&&this.element.style.setProperty("--ueb-link-color-rgb",se.printLinearColor(t.color)),this.element.style.setProperty("--ueb-y-reflected",""+(this.element.fromY>this.element.toY?1:0)),this.element.style.setProperty("--ueb-start-percentage",`${Math.round(this.element.startPercentage)}%`),this.element.style.setProperty("--ueb-link-start",`${Math.round(this.element.startPixels)}`)}render(){const e=`ueb-id-${Math.floor(1e12*Math.random())}`;return B`<svg version="1.2" baseProfile="tiny" width="100%" height="100%" viewBox="0 0 100 100" preserveAspectRatio="none"><g class="ueb-link-area"><path id="${e}" fill="none" vector-effect="non-scaling-stroke" d="${this.element.svgPathD}"/><use href="#${e}" pointer-events="stroke" stroke-width="20"/></g></svg> ${this.element.linkMessageIcon||this.element.linkMessageText?B`<div class="ueb-link-message">${this.element.linkMessageIcon!==O?B`<span class="ueb-link-message-icon">${this.element.linkMessageIcon}</span>`:O} ${this.element.linkMessageText!==O?B`<span class="ueb-link-message-text">${this.element.linkMessageText}</span>`:O}</div>`:O}`}}class pt extends lt{static properties={...super.properties,source:{type:String,reflect:!0},destination:{type:String,reflect:!0},dragging:{type:Boolean,attribute:"data-dragging",converter:se.booleanConverter,reflect:!0},originatesFromInput:{type:Boolean,attribute:!1},svgPathD:{type:String,attribute:!1},linkMessageIcon:{type:String,attribute:!1},linkMessageText:{type:String,attribute:!1}};#z;get sourcePin(){return this.#z}set sourcePin(e){this.#V(e,!1)}#I;get destinationPin(){return this.#I}set destinationPin(e){this.#V(e,!0)}#R=()=>this.remove();#_=e=>this.addSourceLocation(...e.detail.value);#F=e=>this.addDestinationLocation(...e.detail.value);#G=e=>this.setSourceLocation();#j=e=>this.setDestinationLocation();linkMessageIcon=O;linkMessageText=O;pathElement;constructor(){super(),this.source=null,this.destination=null,this.dragging=!1,this.originatesFromInput=!1,this.startPercentage=0,this.svgPathD="",this.startPixels=0}static newObject(e,t){const i=new pt;return i.initialize(e,t),i}initialize(e,t){super.initialize({},new dt),e&&(this.sourcePin=e,t||(this.toX=this.fromX,this.toY=this.fromY)),t&&(this.destinationPin=t,e||(this.fromX=this.toX,this.fromY=this.toY)),this.#U()}#V(e,t){const i=()=>t?this.destinationPin:this.sourcePin;if(i()!=e){if(i()){const e=i().getNodeElement();e.removeEventListener(re.nodeDeleteEventName,this.#R),e.removeEventListener(re.nodeDragEventName,t?this.#F:this.#_),e.removeEventListener(re.nodeReflowEventName,t?this.#j:this.#G),this.#X()}if(t?this.#I=e:this.#z=e,i()){const e=i().getNodeElement();e.addEventListener(re.nodeDeleteEventName,this.#R),e.addEventListener(re.nodeDragEventName,t?this.#F:this.#_),e.addEventListener(re.nodeReflowEventName,t?this.#j:this.#G),t?this.setDestinationLocation():(this.setSourceLocation(),this.originatesFromInput=this.sourcePin.isInput()),this.#U()}}}#U(){this.sourcePin&&this.destinationPin&&(this.sourcePin.linkTo(this.destinationPin),this.destinationPin.linkTo(this.sourcePin))}#X(){this.sourcePin&&this.destinationPin&&(this.sourcePin.unlinkFrom(this.destinationPin),this.destinationPin.unlinkFrom(this.sourcePin))}cleanup(){super.cleanup(),this.#X(),this.sourcePin=null,this.destinationPin=null}setSourceLocation(e=null){if(null==e){const t=this;if(!this.hasUpdated||!this.sourcePin.hasUpdated)return void Promise.all([this.updateComplete,this.sourcePin.updateComplete]).then((()=>t.setSourceLocation()));e=this.sourcePin.template.getLinkLocation()}const[t,i]=e;this.fromX=t,this.fromY=i}setDestinationLocation(e=null){if(null==e){const t=this;if(!this.hasUpdated||!this.destinationPin.hasUpdated)return void Promise.all([this.updateComplete,this.destinationPin.updateComplete]).then((()=>t.setDestinationLocation()));e=this.destinationPin.template.getLinkLocation()}this.toX=e[0],this.toY=e[1]}startDragging(){this.dragging=!0}finishDragging(){this.dragging=!1}removeMessage(){this.linkMessageIcon=O,this.linkMessageText=O}setMessageConvertType(){this.linkMessageIcon="ueb-icon-conver-type",this.linkMessageText=`Convert ${this.sourcePin.pinType} to ${this.destinationPin.pinType}.`}setMessageCorrect(){this.linkMessageIcon=te.correct,this.linkMessageText=O}setMessageReplace(){this.linkMessageIcon=te.correct,this.linkMessageText=O}setMessageDirectionsIncompatible(){this.linkMessageIcon=te.reject,this.linkMessageText=B`Directions are not compatbile.`}setMessagePlaceNode(){this.linkMessageIcon="ueb-icon-place-node",this.linkMessageText=B`Place a new node.`}setMessageReplaceLink(){this.linkMessageIcon=te.correct,this.linkMessageText=B`Replace existing input connections.`}setMessageSameNode(){this.linkMessageIcon=te.reject,this.linkMessageText=B`Both are on the same node.`}setMEssagetypesIncompatible(){this.linkMessageIcon=te.reject,this.linkMessageText=B`${this.sourcePin.pinType} is not compatible with ${this.destinationPin.pinType}.`}}class mt extends et{clicked(e){this.options.repositionOnClick&&(this.target.setLocation(...this.stepSize>1?se.snapToGrid(e[0],e[1],this.stepSize):e),this.clickedOffset=[0,0])}dragTo(e,t){const i=[this.target.locationX??this.lastLocation[0],this.target.locationY??this.lastLocation[1]],[n,s]=this.stepSize>1?[se.snapToGrid(e[0],e[1],this.stepSize),se.snapToGrid(i[0],i[1],this.stepSize)]:[e,i];0==(t=[n[0]-this.lastLocation[0],n[1]-this.lastLocation[1]])[0]&&0==t[1]||(t[0]+=s[0]-i[0],t[1]+=s[1]-i[1],this.dragAction(n,t),this.lastLocation=n)}dragAction(e,t){this.target.setLocation(e[0]-this.clickedOffset[0],e[1]-this.clickedOffset[1])}}class gt extends mt{#W;#Y;#q;#K;constructor(e,t,i={}){super(e,t,i),i.onClicked&&(this.#W=i.onClicked),i.onStartDrag&&(this.#Y=i.onStartDrag),i.onDrag&&(this.#q=i.onDrag),i.onEndDrag&&(this.#K=i.onEndDrag)}clicked(e){super.clicked(e),this.#W?.()}startDrag(){super.startDrag(),this.#Y?.()}dragAction(e,t){this.#q?.(e,t)}endDrag(){super.endDrag(),this.#K?.()}}class bt extends je{getDraggableElement(){return this.element}createDraggableObject(){return new mt(this.element,this.blueprint,{draggableElement:this.getDraggableElement()})}createInputObjects(){return[...super.createInputObjects(),this.createDraggableObject()]}topBoundary(e=!1){return this.element.locationY}rightBoundary(e=!1){return this.element.locationX+this.element.sizeX}bottomBoundary(e=!1){return this.element.locationY+this.element.sizeY}leftBoundary(e=!1){return this.element.locationX}centerInViewport(){const e=Math.min(this.blueprint.template.viewportSize[0]/10,this.blueprint.template.viewportSize[1]/10),t=this.leftBoundary()-this.blueprint.template.gridLeftVisibilityBoundary(),i=this.blueprint.template.gridRightVisibilityBoundary()-this.rightBoundary();let n=Math.max((t+i)/2,e);const s=this.topBoundary()-this.blueprint.template.gridTopVisibilityBoundary(),r=this.blueprint.template.gridBottomVisibilityBoundary()-this.bottomBoundary();let a=Math.max((s+r)/2,e);this.blueprint.scrollDelta(t-n,s-a,!0)}}class vt extends bt{update(e){super.update(e),e.has("locationX")&&(this.element.style.left=`${this.element.locationX}px`),e.has("locationY")&&(this.element.style.top=`${this.element.locationY}px`)}}class ft extends mt{startDrag(){this.target.selected||(this.blueprint.unselectAll(),this.target.setSelected(!0))}dragAction(e,t){this.target.acknowledgeDrag(t)}unclicked(){this.started?(this.blueprint.getNodes(!0).forEach((e=>e.boundComments.filter((t=>!e.isInsideComment(t))).forEach((t=>e.unbindFromComment(t))))),this.blueprint.getCommentNodes().forEach((e=>e.template.manageNodesBind()))):(this.blueprint.unselectAll(),this.target.setSelected(!0))}}class yt extends vt{getDraggableElement(){return this.element}createDraggableObject(){return new ft(this.element,this.blueprint,{draggableElement:this.getDraggableElement()})}firstUpdated(e){super.firstUpdated(e),this.element.selected&&!this.element.listeningDrag&&this.element.setSelected(!0)}}class wt extends yt{hasSubtitle=!1;static nodeStyleClasses=["ueb-node-style-default"];toggleAdvancedDisplayHandler=()=>{this.element.toggleShowAdvancedPinDisplay(),this.element.addNextUpdatedCallbacks((()=>this.element.acknowledgeReflow()),!0)};initialize(e){super.initialize(e),this.element.classList.add(...this.constructor.nodeStyleClasses),this.element.style.setProperty("--ueb-node-color",this.getColor().cssText)}getColor(){return re.nodeColor(this.element)}render(){return B`<div class="ueb-node-border"><div class="ueb-node-wrapper"><div class="ueb-node-top">${this.renderTop()}</div><div class="ueb-node-content"><div class="ueb-node-inputs"></div><div class="ueb-node-outputs"></div></div>${"DevelopmentOnly"==this.element.enabledState?.toString()?B`<div class="ueb-node-developmentonly"><span class="ueb-node-developmentonly-text">Development Only</span></div>`:O} ${this.element.advancedPinDisplay?B`<div class="ueb-node-expansion" @click="${this.toggleAdvancedDisplayHandler}">${te.expandIcon}</div>`:O}</div></div>`}renderNodeIcon(){return re.nodeIcon(this.element)}renderNodeName(){return this.element.getNodeDisplayName()}renderTop(){const e=this.renderNodeIcon(),t=this.renderNodeName();return B`<div class="ueb-node-name">${e?B`<div class="ueb-node-name-symbol">${e}</div>`:O} ${t?B`<div class="ueb-node-name-text ueb-ellipsis-nowrap-text">${t} ${this.hasSubtitle&&this.element.entity.FunctionReference.MemberParent?B`<div class="ueb-node-subtitle-text ueb-ellipsis-nowrap-text">Target is ${se.formatStringName(this.element.entity.FunctionReference.MemberParent.getName())}</div>`:O}</div>`:O}</div>`}firstUpdated(e){super.firstUpdated(e),this.setupPins(),this.element.updateComplete.then((()=>this.element.acknowledgeReflow()))}setupPins(){const e=this.element.querySelector(".ueb-node-inputs"),t=this.element.querySelector(".ueb-node-outputs");this.element.nodeNameElement=this.element.querySelector(".ueb-node-name-text"),this.element.getPinElements().forEach((i=>{i.isInput()?e.appendChild(i):i.isOutput()&&t.appendChild(i)}))}createPinElements(){return this.element.getPinEntities().filter((e=>!e.isHidden())).map((e=>(this.hasSubtitle=this.hasSubtitle||"Target"===e.getDisplayName(),nt.getConstructor("ueb-pin").newObject(e,void 0,this.element))))}getPinElements(e){return e.querySelectorAll("ueb-pin")}linksChanged(){}}class Et extends wt{#Z=document.createElement("div");#J=document.createElement("div");#Q=document.createElement("div");#ee=document.createElement("div");#te=document.createElement("div");#ie=document.createElement("div");#ne=document.createElement("div");#se=document.createElement("div");initialize(e){super.initialize(e),this.element.classList.add("ueb-resizeable"),this.#Z.classList.add("ueb-resizeable-top"),this.#J.classList.add("ueb-resizeable-right"),this.#Q.classList.add("ueb-resizeable-bottom"),this.#ee.classList.add("ueb-resizeable-left"),this.#te.classList.add("ueb-resizeable-top-right"),this.#ie.classList.add("ueb-resizeable-bottom-right"),this.#ne.classList.add("ueb-resizeable-bottom-left"),this.#se.classList.add("ueb-resizeable-top-left")}update(e){super.update(e),this.element.sizeX>=0&&e.has("sizeX")&&(this.element.style.width=`${this.element.sizeX}px`),this.element.sizeY>=0&&e.has("sizeY")&&(this.element.style.height=`${this.element.sizeY}px`)}firstUpdated(e){super.firstUpdated(e),this.element.append(this.#Z,this.#J,this.#Q,this.#ee,this.#te,this.#ie,this.#ne,this.#se)}createInputObjects(){return[...super.createInputObjects(),new gt(this.#Z,this.blueprint,{onDrag:(e,t)=>{t[1]=e[1]-this.element.topBoundary(),this.setSizeY(this.element.sizeY-t[1])&&this.element.addLocation(0,t[1],!1)},onEndDrag:()=>this.endResize()}),new gt(this.#J,this.blueprint,{onDrag:(e,t)=>{t[0]=e[0]-this.element.rightBoundary(),this.setSizeX(this.element.sizeX+t[0])},onEndDrag:()=>this.endResize()}),new gt(this.#Q,this.blueprint,{onDrag:(e,t)=>{t[1]=e[1]-this.element.bottomBoundary(),this.setSizeY(this.element.sizeY+t[1])},onEndDrag:()=>this.endResize()}),new gt(this.#ee,this.blueprint,{onDrag:(e,t)=>{t[0]=e[0]-this.element.leftBoundary(),this.setSizeX(this.element.sizeX-t[0])&&this.element.addLocation(t[0],0,!1)},onEndDrag:()=>this.endResize()}),new gt(this.#te,this.blueprint,{onDrag:(e,t)=>{t[0]=e[0]-this.element.rightBoundary(),t[1]=e[1]-this.element.topBoundary(),this.setSizeX(this.element.sizeX+t[0]),this.setSizeY(this.element.sizeY-t[1])&&this.element.addLocation(0,t[1],!1)},onEndDrag:()=>this.endResize()}),new gt(this.#ie,this.blueprint,{onDrag:(e,t)=>{t[0]=e[0]-this.element.rightBoundary(),t[1]=e[1]-this.element.bottomBoundary(),this.setSizeX(this.element.sizeX+t[0]),this.setSizeY(this.element.sizeY+t[1])},onEndDrag:()=>this.endResize()}),new gt(this.#ne,this.blueprint,{onDrag:(e,t)=>{t[0]=e[0]-this.element.leftBoundary(),t[1]=e[1]-this.element.bottomBoundary(),this.setSizeX(this.element.sizeX-t[0])&&this.element.addLocation(t[0],0,!1),this.setSizeY(this.element.sizeY+t[1])},onEndDrag:()=>this.endResize()}),new gt(this.#se,this.blueprint,{onDrag:(e,t)=>{t[0]=e[0]-this.element.leftBoundary(),t[1]=e[1]-this.element.topBoundary(),this.setSizeX(this.element.sizeX-t[0])&&this.element.addLocation(t[0],0,!1),this.setSizeY(this.element.sizeY-t[1])&&this.element.addLocation(0,t[1],!1)},onEndDrag:()=>this.endResize()})]}setSizeX(e){return this.element.setNodeWidth(e),!0}setSizeY(e){return this.element.setNodeHeight(e),!0}endResize(){}}class St extends Et{#re=ye.getWhite();#ae=0;initialize(e){e.entity.CommentColor&&(this.#re.setFromRGBANumber(e.entity.CommentColor.toNumber()),this.#re.setFromHSVA(this.#re.H.value,this.#re.S.value,.67*Math.pow(this.#re.V.value,.45))),e.classList.add("ueb-node-style-comment","ueb-node-resizeable"),e.sizeX=25*re.gridSize,e.sizeY=6*re.gridSize,super.initialize(e)}getColor(){return r`${Math.round(255*this.#re.R.value)}${Math.round(255*this.#re.G.value)}${Math.round(255*this.#re.B.value)}`}getDraggableElement(){return this.element.querySelector(".ueb-node-top")}render(){return B`<div class="ueb-node-border"><div class="ueb-node-wrapper"><div class="ueb-node-top">${this.element.entity.NodeComment}</div></div></div>`}firstUpdated(e){super.firstUpdated(e);const t=this.getDraggableElement().getBoundingClientRect();this.#ae=t.height}manageNodesBind(){let e=this.blueprint.getNodes();for(let t of e)t.topBoundary()>=this.element.topBoundary()&&t.rightBoundary()<=this.element.rightBoundary()&&t.bottomBoundary()<=this.element.bottomBoundary()&&t.leftBoundary()>=this.element.leftBoundary()?t.bindToComment(this.element):t.unbindFromComment(this.element)}setSizeX(e){return(e=Math.round(e))>=re.gridSet*re.gridSize&&(this.element.setNodeWidth(e),!0)}setSizeY(e){return(e=Math.round(e))>=3*re.gridSize&&(this.element.setNodeHeight(e),!0)}endResize(){this.manageNodesBind()}topBoundary(e=!1){return this.element.locationY}rightBoundary(e=!1){return this.element.locationX+this.element.sizeX}bottomBoundary(e=!1){return e?this.element.locationY+this.#ae:super.bottomBoundary()}leftBoundary(e=!1){return this.element.locationX}}class Ct extends Qe{static properties={...super.properties,selected:{type:Boolean,attribute:"data-selected",reflect:!0,converter:se.booleanConverter}};dragHandler=e=>this.addLocation(...e.detail.value);constructor(){super(),this.selected=!1,this.listeningDrag=!1}setup(){super.setup(),this.setSelected(this.selected)}cleanup(){super.cleanup(),this.blueprint.removeEventListener(re.nodeDragGeneralEventName,this.dragHandler)}setSelected(e=!0){this.selected=e,this.blueprint&&(this.selected?(this.listeningDrag=!0,this.blueprint.addEventListener(re.nodeDragGeneralEventName,this.dragHandler)):(this.blueprint.removeEventListener(re.nodeDragGeneralEventName,this.dragHandler),this.listeningDrag=!1))}}class Pt extends et{#oe;#le=null;#ue=e=>{if(!this.enteredPin){this.linkValid=!1,this.enteredPin=e.target;const t=this.link.sourcePin??this.target,i=this.enteredPin;t.nodeElement.getType()==re.nodeType.knot||i.nodeElement.getType()==re.nodeType.knot?(this.link.setMessageCorrect(),this.linkValid=!0):t.getNodeElement()==i.getNodeElement()?this.link.setMessageSameNode():t.isOutput()==i.isOutput()||t.isOutput()==i.isOutput()?this.link.setMessageDirectionsIncompatible():this.blueprint.getLinks(t,i).length?(this.link.setMessageReplaceLink(),this.linkValid=!0):(this.link.setMessageCorrect(),this.linkValid=!0)}};#ce=e=>{this.enteredPin==e.target&&(this.enteredPin=null,this.linkValid=!1,this.link?.setMessagePlaceNode())};link;enteredPin;linkValid=!1;startDrag(e){this.target.nodeElement.getType()==re.nodeType.knot&&(this.#le=this.target),this.link=nt.getConstructor("ueb-link").newObject(this.target,null),this.blueprint.template.linksContainerElement.prepend(this.link),this.link.setMessagePlaceNode(),this.#oe=this.blueprint.querySelectorAll("ueb-pin"),this.#oe.forEach((e=>{if(e!=this.target){const t=e.template.getClickableElement();t.addEventListener("mouseenter",this.#ue),t.addEventListener("mouseleave",this.#ce)}})),this.link.startDragging(),this.link.setDestinationLocation(e)}dragTo(e,t){this.link.setDestinationLocation(e)}endDrag(){if(this.#oe.forEach((e=>{e.removeEventListener("mouseenter",this.#ue),e.removeEventListener("mouseleave",this.#ce)})),this.enteredPin&&this.linkValid){if(this.#le){const e=this.#le!==this.link.sourcePin?this.link.sourcePin:this.enteredPin;if(this.#le.isInput()&&e.isInput()||this.#le.isOutput()&&e.isOutput()){const e=this.#le.isInput()?this.#le.nodeElement.template.outputPin:this.#le.nodeElement.template.inputPin;this.#le===this.link.sourcePin?this.link.sourcePin=e:this.enteredPin=e}}this.blueprint.addGraphElement(this.link),this.link.destinationPin=this.enteredPin,this.link.removeMessage(),this.link.finishDragging()}else this.link.finishDragging(),this.link.remove();this.enteredPin=null,this.link=null,this.#oe=null}}class kt extends wt{#he=!1;#de=!1;#pe="";static nodeStyleClasses=["ueb-node-style-glass"];initialize(e){super.initialize(e),this.#pe=this.element.getNodeDisplayName()}render(){return B`<div class="ueb-node-border"><div class="ueb-node-wrapper">${this.#pe?B`<div class="ueb-node-top"><div class="ueb-node-name"><span class="ueb-node-name-text ueb-ellipsis-nowrap-text">${this.#pe}</span></div></div>`:O}<div class="ueb-node-content">${this.#he?B`<div class="ueb-node-inputs"></div>`:O} ${this.#de?B`<div class="ueb-node-outputs"></div>`:O}</div></div></div>`}createPinElements(){return this.element.getPinEntities().filter((e=>!e.isHidden())).map((e=>{this.#he||=e.isInput(),this.#de||=e.isOutput();return nt.getConstructor("ueb-pin").newObject(e,void 0,this.element)}))}}class xt extends kt{static nodeStyleClasses=[...super.nodeStyleClasses,"ueb-node-style-conversion"]}class Lt extends kt{static nodeStyleClasses=[...super.nodeStyleClasses,"ueb-node-style-operation"]}class Nt extends je{#me;get iconElement(){return this.#me}isNameRendered=!0;setup(){super.setup(),this.element.nodeElement=this.element.closest("ueb-node");const e=this.element.nodeElement.template;(e instanceof xt||e instanceof Lt)&&(this.isNameRendered=!1,this.element.requestUpdate())}createInputObjects(){return[new Pt(this.getClickableElement(),this.blueprint,{moveEverywhere:!0})]}render(){const e=B`<div class="ueb-pin-icon">${this.renderIcon()}</div>`,t=B`<div class="ueb-pin-content">${this.isNameRendered?this.renderName():O} ${this.element.isInput()&&!this.element.entity.bDefaultValueIsIgnored?this.renderInput():B``}</div>`;return B`<div class="ueb-pin-wrapper">${this.element.isInput()?B`${e}${t}`:B`${t}${e}`}</div>`}renderIcon(){switch(this.element.entity.PinType.ContainerType.toString()){case"Array":return te.array;case"Set":return te.set;case"Map":return te.map}return"delegate"===this.element.entity.PinType.PinCategory?te.delegate:te.genericPin}renderName(){return B`<span class="ueb-pin-name">${this.element.getPinDisplayName()}</span>`}renderInput(){return B``}updated(e){if(super.updated(e),this.element.isInput()&&e.has("isLinked")){const e=this.element.nodeElement;e.addNextUpdatedCallbacks((()=>e.acknowledgeReflow())),e.requestUpdate()}}firstUpdated(e){super.firstUpdated(e),this.element.style.setProperty("--ueb-pin-color-rgb",re.pinColor(this.element).cssText),this.#me=this.element.querySelector(".ueb-pin-icon svg")??this.element}getLinkLocation(){const e=this.iconElement.getBoundingClientRect(),t=[this.element.isInput()?e.left:e.right,(e.top+e.bottom)/2],i=se.convertLocation(t,this.blueprint.template.gridElement);return this.blueprint.compensateTranslation(i[0],i[1])}getClickableElement(){return this.element}}class Tt extends Nt{render(){return B`<div class="ueb-pin-icon">${this.renderIcon()}</div>`}}class At extends Tt{render(){return this.element.isOutput()?super.render():B``}getLinkLocation(){const e=(this.element.isInput()?this.element.nodeElement.template.outputPin.template:this).iconElement.getBoundingClientRect(),t=[this.element.isInput()?e.left:e.right,(e.top+e.bottom)/2],i=se.convertLocation(t,this.blueprint.template.gridElement);return this.blueprint.compensateTranslation(i[0],i[1])}}class Mt extends wt{static#ge=new Set;#be=null;#ve;get inputPin(){return this.#ve}#fe;get outputPin(){return this.#fe}initialize(e){super.initialize(e),this.element.classList.add("ueb-node-style-minimal")}findDirectionaPin(e){if(e.nodeElement.getType()!==re.nodeType.knot||Mt.#ge.has(e))return Mt.#ge.clear(),!0;Mt.#ge.add(e);for(let t of e.getLinks().map((e=>this.blueprint.getPin(e))))if(this.findDirectionaPin(t))return!0;return!1}render(){return B`<div class="ueb-node-border"></div>`}setupPins(){this.element.getPinElements().forEach((e=>this.element.querySelector(".ueb-node-border").appendChild(e)))}getPinElements(e){return e.querySelectorAll("ueb-pin")}createPinElements(){const e=this.element.getPinEntities().filter((e=>!e.isHidden())),t=e[e[0].isInput()?0:1],i=e[e[0].isOutput()?0:1],n=nt.getConstructor("ueb-pin");return[this.#ve=n.newObject(t,new At,this.element),this.#fe=n.newObject(i,new At,this.element)]}linksChanged(){}}class $t extends kt{initialize(e){super.initialize(e),e.getType()===re.nodeType.variableGet?this.element.classList.add("ueb-node-style-getter"):e.getType()===re.nodeType.variableSet&&this.element.classList.add("ueb-node-style-setter")}setupPins(){super.setupPins();let e=this.element.getPinElements().find((e=>!e.entity.isHidden()&&!e.entity.isExecution()));this.element.style.setProperty("--ueb-node-color",e.getColor().cssText)}}class Dt extends wt{static nodeStyleClasses=[...super.nodeStyleClasses,"ueb-node-style-event"];firstUpdated(e){super.firstUpdated(e),this.element.querySelector(".ueb-node-top").appendChild(this.createDelegatePinElement())}renderTop(){const e=this.renderNodeIcon(),t=this.renderNodeName();return B`<div class="ueb-node-name">${e?B`<div class="ueb-node-name-symbol">${e}</div>`:O} ${t?B`<div class="ueb-node-name-text ueb-ellipsis-nowrap-text">${t} ${this.hasSubtitle&&this.element.entity.FunctionReference.MemberParent?B`<div class="ueb-node-subtitle-text ueb-ellipsis-nowrap-text">Custom Event</div>`:O}</div>`:O}</div>`}createDelegatePinElement(){const e=nt.getConstructor("ueb-pin").newObject(this.element.getPinEntities().find((e=>!e.isHidden()&&"delegate"===e.PinType.PinCategory)),new Tt,this.element);return e.template.isNameRendered=!1,e}createPinElements(){return this.element.getPinEntities().filter((e=>!e.isHidden()&&"delegate"!==e.PinType.PinCategory)).map((e=>nt.getConstructor("ueb-pin").newObject(e,void 0,this.element)))}}class Bt extends Ct{static properties={...Ct.properties,typePath:{type:String,attribute:"data-type",reflect:!0},nodeName:{type:String,attribute:"data-name",reflect:!0},advancedPinDisplay:{type:String,attribute:"data-advanced-display",converter:me.attributeConverter,reflect:!0},enabledState:{type:String,attribute:"data-enabled-state",reflect:!0},nodeDisplayName:{type:String,attribute:!1},pureFunction:{type:Boolean,converter:se.booleanConverter,attribute:"data-pure-function",reflect:!0}};static dragEventName=re.nodeDragEventName;static dragGeneralEventName=re.nodeDragGeneralEventName;get blueprint(){return super.blueprint}set blueprint(e){super.blueprint=e,this.#ye.forEach((t=>t.blueprint=e))}#we;get nodeNameElement(){return this.#we}set nodeNameElement(e){this.#we=e}#ye=[];boundComments=[];#Ee=!1;#Se=e=>{this.selected||this.#Ee||(this.#Ee=!0,this.addNextUpdatedCallbacks((()=>this.#Ee=!1)),this.addLocation(...e.detail.value))};static getTypeTemplate(e){if(e.getClass()===re.nodeType.callFunction||e.getClass()===re.nodeType.commutativeAssociativeBinaryOperator){if("/Script/Engine.KismetMathLibrary"===e.FunctionReference.MemberParent.path){if(e.FunctionReference.MemberName?.startsWith("Conv_"))return xt;if(e.FunctionReference.MemberName?.startsWith("Percent_"))return Lt;switch(e.FunctionReference.MemberName){case"Abs":case"BMax":case"BMin":case"Exp":case"FMax":case"FMin":case"Max":case"MaxInt64":case"Min":case"MinInt64":return Lt}}if("/Script/Engine.BlueprintSetLibrary"==e.FunctionReference.MemberParent.path)return Lt;if("/Script/Engine.BlueprintMapLibrary"==e.FunctionReference.MemberParent.path)return Lt}switch(e.getClass()){case re.nodeType.comment:case re.nodeType.customEvent:return St;case re.nodeType.event:return Dt;case re.nodeType.knot:return Mt;case re.nodeType.variableGet:case re.nodeType.variableSet:return $t}return wt}static fromSerializedObject(e){e=e.trim();let t=oe.getSerializer(Be).deserialize(e);return Bt.newObject(t)}static newObject(e=new Be,t=new(Bt.getTypeTemplate(e))){const i=new Bt;return i.initialize(e,t),i}initialize(e=new Be,t=new(Bt.getTypeTemplate(e))){super.initialize(e,t),this.#ye=this.template.createPinElements(),this.typePath=this.entity.getType(),this.nodeName=this.entity.getObjectName(),this.advancedPinDisplay=this.entity.AdvancedPinDisplay?.toString(),this.enabledState=this.entity.EnabledState,this.nodeDisplayName=this.getNodeDisplayName(),this.pureFunction=this.entity.bIsPureFunc,this.dragLinkObjects=[],super.setLocation(this.entity.NodePosX.value,this.entity.NodePosY.value),this.entity.NodeWidth&&this.entity.NodeHeight?(this.sizeX=this.entity.NodeWidth.value,this.sizeY=this.entity.NodeHeight.value):this.updateComplete.then((()=>this.computeSizes()))}getUpdateComplete(){return Promise.all([super.getUpdateComplete(),...this.getPinElements().map((e=>e.updateComplete))]).then((()=>!0))}bindToComment(e){e==this||this.boundComments.includes(e)||(e.addEventListener(re.nodeDragEventName,this.#Se),this.boundComments.push(e))}unbindFromComment(e){const t=this.boundComments.indexOf(e);t>=0&&(e.removeEventListener(re.nodeDragEventName,this.#Se),this.boundComments[t]=this.boundComments[this.boundComments.length-1],this.boundComments.pop())}isInsideComment(e){return this.topBoundary()>=e.topBoundary()&&this.rightBoundary()<=e.rightBoundary()&&this.bottomBoundary()<=e.bottomBoundary()&&this.leftBoundary()>=e.leftBoundary()}cleanup(){super.cleanup(),this.acknowledgeDelete()}getType(){return this.entity.getType()}getNodeName(){return this.entity.getObjectName()}getNodeDisplayName(){return re.nodeDisplayName(this)}setNodeWidth(e){this.entity.setNodeWidth(e),this.sizeX=e,this.acknowledgeReflow()}setNodeHeight(e){this.entity.setNodeHeight(e),this.sizeY=e,this.acknowledgeReflow()}sanitizeLinks(e=[]){this.getPinElements().forEach((t=>t.sanitizeLinks(e)))}rename(e){if(this.entity.Name==e)return!1;for(let t of this.getPinElements())for(let i of t.getLinks())this.blueprint.getPin(i).redirectLink(t,new Ce({objectName:e,pinGuid:t.entity.PinId}));this.entity.Name=e,this.nodeName=this.entity.Name}getPinElements(){return this.#ye}getPinEntities(){return this.entity.CustomProperties.filter((e=>e instanceof Me))}setLocation(e=0,t=0,i=!0){this.entity.NodePosX.value=e,this.entity.NodePosY.value=t,super.setLocation(e,t,i)}acknowledgeDelete(){let e=new CustomEvent(re.nodeDeleteEventName);this.dispatchEvent(e)}acknowledgeReflow(){this.addNextUpdatedCallbacks((()=>this.computeSizes()),!0);let e=new CustomEvent(re.nodeReflowEventName);this.dispatchEvent(e)}setShowAdvancedPinDisplay(e){this.entity.AdvancedPinDisplay=new me(e?"Shown":"Hidden"),this.advancedPinDisplay=this.entity.AdvancedPinDisplay}toggleShowAdvancedPinDisplay(){this.setShowAdvancedPinDisplay("Shown"!=this.entity.AdvancedPinDisplay?.toString())}}class Ht extends Je{static properties={selecting:{type:Boolean,attribute:"data-selecting",reflect:!0,converter:se.booleanConverter},scrolling:{type:Boolean,attribute:"data-scrolling",reflect:!0,converter:se.booleanConverter},focused:{type:Boolean,attribute:"data-focused",reflect:!0,converter:se.booleanConverter},zoom:{type:Number,attribute:"data-zoom",reflect:!0},scrollX:{type:Number,attribute:!1},scrollY:{type:Number,attribute:!1},additionalX:{type:Number,attribute:!1},additionalY:{type:Number,attribute:!1},translateX:{type:Number,attribute:!1},translateY:{type:Number,attribute:!1}};static nodeBoundariesSupplier=e=>({primaryInf:e.leftBoundary(!0),primarySup:e.rightBoundary(!0),secondaryInf:e.topBoundary(!0),secondarySup:e.bottomBoundary(!0)});static nodeSelectToggleFunction=(e,t)=>{e.setSelected(t)};#Ce=!1;#Pe=new Map;nodes=[];links=[];mousePosition=[0,0];waitingExpandUpdate=!1;constructor(){super(),this.selecting=!1,this.scrolling=!1,this.focused=!1,this.zoom=0,this.scrollX=re.expandGridSize,this.scrollY=re.expandGridSize,this.translateX=re.expandGridSize,this.translateY=re.expandGridSize,super.initialize({},new ot)}initialize(){}getGridDOMElement(){return this.template.gridElement}getScroll(){return[this.scrollX,this.scrollY]}setScroll(e,t){this.scrollX=e,this.scrollY=t}scrollDelta(e=0,t=0,i=!1){if(i){let i=[0,0];se.animate(0,e,re.smoothScrollTime,(e=>{this.scrollDelta(e-i[0],0,!1),i[0]=e})),se.animate(0,t,re.smoothScrollTime,(e=>{this.scrollDelta(0,e-i[1],!1),i[1]=e}))}else{const i=[2*re.expandGridSize,2*re.expandGridSize];let n=this.getScroll(),s=[n[0]+e,n[1]+t],r=[0,0];for(let e=0;e<2;++e)s[e]<re.gridExpandThreshold*re.expandGridSize?r[e]=-1:s[e]>i[e]-re.gridExpandThreshold*re.expandGridSize&&(r[e]=1);0==r[0]&&0==r[1]||this.seamlessExpand(r[0],r[1]),n=this.getScroll(),s=[n[0]+e,n[1]+t],this.setScroll(s[0],s[1])}}scrollCenter(){const e=this.getScroll(),t=[this.translateX-e[0],this.translateY-e[1]],i=this.getViewportSize().map((e=>e/2)),n=[t[0]-i[0],t[1]-i[1]];this.scrollDelta(n[0],n[1],!0)}getViewportSize(){return[this.template.viewportElement.clientWidth,this.template.viewportElement.clientHeight]}getScrollMax(){return[this.template.viewportElement.scrollWidth-this.template.viewportElement.clientWidth,this.template.viewportElement.scrollHeight-this.template.viewportElement.clientHeight]}snapToGrid(e,t){return se.snapToGrid(e,t,re.gridSize)}seamlessExpand(e,t){e=Math.round(e),t=Math.round(t);let i=this.getScale();[e,t]=[-e*re.expandGridSize,-t*re.expandGridSize],0!=e&&(this.scrollX+=e,e/=i),0!=t&&(this.scrollY+=t,t/=i),this.translateX+=e,this.translateY+=t}progressiveSnapToGrid(e){return re.expandGridSize*Math.round(e/re.expandGridSize+.5*Math.sign(e))}getZoom(){return this.zoom}setZoom(e,t){if((e=se.clamp(e,re.minZoom,re.maxZoom))==this.zoom)return;let i=this.getScale();if(this.zoom=e,t){t[0]+=this.translateX,t[1]+=this.translateY;let e=this.getScale()/i,n=[e*t[0],e*t[1]];this.scrollDelta((n[0]-t[0])*i,(n[1]-t[1])*i)}}getScale(){return re.scale[this.getZoom()]}compensateTranslation(e,t){return[e-=this.translateX,t-=this.translateY]}getNodes(e=!1,[t,i,n,s]=[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER]){let r=this.nodes;return e&&(r=r.filter((e=>e.selected))),(t>Number.MIN_SAFE_INTEGER||i<Number.MAX_SAFE_INTEGER||n<Number.MAX_SAFE_INTEGER||s>Number.MIN_SAFE_INTEGER)&&(r=r.filter((e=>e.topBoundary()>=t&&e.rightBoundary()<=i&&e.bottomBoundary()<=n&&e.leftBoundary()>=s))),r}getCommentNodes(e=!1){let t=[...this.template.getCommentNodes(e)];return 0===t.length&&(t=this.nodes.filter((t=>t.getType()===re.nodeType.comment&&(!e||t.selected)))),t}getPin(e){let t=this.template.getPin(e);return t&&t.nodeElement.getNodeName()==e.objectName.toString()||(t=[...this.nodes.find((t=>e.objectName.toString()==t.getNodeName()))?.getPinElements()??[]].find((t=>e.pinGuid.toString()==t.getPinId().toString()))),t}getLinks(e=null,t=null){if(null==e!=(null==t)){const i=e??t;return this.links.filter((e=>e.sourcePin==i||e.destinationPin==i))}return null!=e&&null!=t?this.links.filter((i=>i.sourcePin==e&&i.destinationPin==t||i.sourcePin==t&&i.destinationPin==e)):this.links}getLink(e,t,i=!1){return this.links.find((n=>n.sourcePin==e&&n.destinationPin==t||i&&n.sourcePin==t&&n.destinationPin==e))}selectAll(){this.getNodes().forEach((e=>Ht.nodeSelectToggleFunction(e,!0)))}unselectAll(){this.getNodes().forEach((e=>Ht.nodeSelectToggleFunction(e,!1)))}addGraphElement(...e){for(let t of e)if(t.blueprint=this,t instanceof Bt&&!this.nodes.includes(t)){const e=t.entity.getObjectName(),i=this.nodes.find((t=>t.entity.getObjectName()==e));if(i){let e=i.entity.getObjectName(!0);this.#Pe[e]=this.#Pe[e]??-1;do{++this.#Pe[e]}while(this.nodes.find((t=>t.entity.getObjectName()==re.nodeName(e,this.#Pe[e]))));i.rename(re.nodeName(e,this.#Pe[e]))}this.nodes.push(t),this.template.nodesContainerElement?.appendChild(t)}else t instanceof pt&&!this.links.includes(t)&&(this.links.push(t),this.template.linksContainerElement&&!this.template.linksContainerElement.contains(t)&&this.template.linksContainerElement.appendChild(t));e.filter((e=>e instanceof Bt)).forEach((t=>t.sanitizeLinks(e))),e.filter((e=>e instanceof Bt&&e.getType()==re.nodeType.comment)).forEach((e=>e.updateComplete.then((()=>e.template.manageNodesBind()))))}removeGraphElement(...e){for(let t of e)if(t.closest("ueb-blueprint")==this){t.remove();let e=t instanceof Bt?this.nodes:t instanceof pt?this.links:null;e?.splice(e.findIndex((e=>e===t)),1)}}setFocused(e=!0){if(this.focused==e)return;let t=new CustomEvent(e?re.focusEventName.begin:re.focusEventName.end);this.focused=e,this.focused||this.unselectAll(),this.dispatchEvent(t)}acknowledgeEditText(e){const t=new CustomEvent(e?re.editTextEventName.begin:re.editTextEventName.end);this.dispatchEvent(t)}}customElements.define("ueb-blueprint",Ht);class Ot extends bt{#ke;get locationChangeCallback(){return this.#ke}set locationChangeCallback(e){this.#ke=e}movementSpace;movementSpaceSize=[0,0];firstUpdated(e){super.firstUpdated(e),this.movementSpace=this.element.parentElement}setup(){super.setup();const e=this.movementSpace.getBoundingClientRect();this.movementSpaceSize=[e.width,e.height]}createDraggableObject(){return new mt(this.element,this.blueprint,{draggableElement:this.movementSpace,ignoreTranslateCompensate:!0,moveEverywhere:!0,movementSpace:this.movementSpace,repositionOnClick:!0,stepSize:1})}adjustLocation(e,t){return this.locationChangeCallback?.(e,t),[e,t]}}class zt extends Ot{adjustLocation(e,t){const i=Math.round(this.movementSpaceSize[0]/2);e-=i,t=-(t-i);let[n,s]=se.getPolarCoordinates(e,t);return n=Math.min(n,i),[e,t]=se.getCartesianCoordinates(n,s),this.locationChangeCallback?.(e/i,t/i),[e=Math.round(e+i),t=Math.round(-t+i)]}}class Vt extends Qe{windowElement;setup(){super.setup(),this.windowElement=this.closest("ueb-window")}setLocation(e,t){super.setLocation(...this.template.adjustLocation(e,t))}}class It extends Vt{constructor(){super(),super.initialize({},new zt)}static newObject(){return new It}initialize(){}}class Rt extends Ot{adjustLocation(e,t){return e=se.clamp(e,0,this.movementSpaceSize[0]),t=se.clamp(t,0,this.movementSpaceSize[1]),this.locationChangeCallback?.(e/this.movementSpaceSize[0],1-t/this.movementSpaceSize[1]),[e,t]}}class _t extends Vt{constructor(){super(),super.initialize({},new Rt)}static newObject(){return new _t}initialize(){}}class Ft extends je{#xe=()=>{this.blueprint.acknowledgeEditText(!0),this.element.selectOnFocus&&getSelection().selectAllChildren(this.element)};#Le=()=>{this.blueprint.acknowledgeEditText(!1),getSelection().removeAllRanges()};#Ne=e=>e.target.querySelectorAll("br").forEach((e=>e.remove()));#Te=e=>{"Enter"!=e.code||e.shiftKey||e.target.blur()};initialize(e){super.initialize(e),this.element.classList.add("ueb-pin-input-content"),this.element.setAttribute("role","textbox"),this.element.contentEditable="true"}setup(){super.setup(),this.element.addEventListener("focus",this.#xe),this.element.addEventListener("focusout",this.#Le),this.element.singleLine&&this.element.addEventListener("input",this.#Ne),this.element.blurOnEnter&&this.element.addEventListener("keydown",this.#Te)}cleanup(){super.cleanup(),this.element.removeEventListener("focus",this.#xe),this.element.removeEventListener("focusout",this.#Le),this.element.removeEventListener("input",this.#Ne),this.element.removeEventListener("keydown",this.#Te)}}class Gt extends Je{static properties={...super.properties,singleLine:{type:Boolean,attribute:"data-single-line",converter:se.booleanConverter,reflect:!0},selectOnFocus:{type:Boolean,attribute:"data-select-focus",converter:se.booleanConverter,reflect:!0},blurOnEnter:{type:Boolean,attribute:"data-blur-enter",converter:se.booleanConverter,reflect:!0}};constructor(){super(),this.singleLine=!1,this.selectOnFocus=!0,this.blurOnEnter=!0,super.initialize({},new Ft)}static newObject(){return new Gt}initialize(){}}class jt extends et{constructor(e,t,i={}){i.consumeEvent=!0,super(e,t,i)}}class Ut extends Nt{#Ae;#Me=e=>this.element.setDefaultValue(this.#Ae.checked);firstUpdated(e){super.firstUpdated(e),this.#Ae=this.element.querySelector(".ueb-pin-input")}setup(){super.setup(),this.#Ae?.addEventListener("change",this.#Me)}cleanup(){super.cleanup(),this.#Ae?.removeEventListener("change",this.#Me)}createInputObjects(){return[...super.createInputObjects(),new jt(this.#Ae,this.blueprint)]}renderInput(){return B`<input type="checkbox" class="ueb-pin-input" ?checked="${this.element.defaultValue}">`}}class Xt extends Nt{renderIcon(){return te.execPin}renderName(){let e=this.element.entity.PinName;if(this.element.entity.PinFriendlyName)e=this.element.entity.PinFriendlyName.toString();else if("execute"===e||"then"===e)return B``;return B`${se.formatStringName(e)}`}}class Wt extends Nt{static singleLineInput=!1;static selectOnFocus=!0;#$e;get inputContentElements(){return this.#$e}static stringFromInputToUE(e){return e.replace(/(?=\n\s*)\n$/,"").replaceAll("\n","\\r\n")}static stringFromUEToInput(e){return e.replaceAll(/(?:\r|(?<=(?:^|[^\\])(?:\\\\)*)\\r)(?=\n)/g,"").replace(/(?<=\n\s*)$/,"\n")}#De=()=>this.setInputs(this.getInputs(),!0);firstUpdated(e){super.firstUpdated(e),this.#$e=[...this.element.querySelectorAll("ueb-input")]}setup(){super.setup(),this.#$e.forEach((e=>e.addEventListener("focusout",this.#De)))}cleanup(){super.cleanup(),this.#$e.forEach((e=>e.removeEventListener("focusout",this.#De)))}createInputObjects(){return[...super.createInputObjects(),...this.#$e.map((e=>new jt(e,this.blueprint)))]}getInput(){return this.getInputs().reduce(((e,t)=>e+t),"")}getInputs(){return this.#$e.map((e=>se.clearHTMLWhitespace(e.innerHTML)))}setInputs(e=[],t=!0){this.#$e.forEach(this.constructor.singleLineInput?(t,i)=>t.innerText=e[i]:(t,i)=>t.innerText=e[i].replaceAll("\n","")),t&&this.setDefaultValue(e.map((e=>Wt.stringFromInputToUE(e))),e),this.element.addNextUpdatedCallbacks((()=>this.element.nodeElement.acknowledgeReflow()))}setDefaultValue(e=[],t=e){this.element.setDefaultValue(e.join(""))}renderInput(){const e=this.constructor.singleLineInput,t=this.constructor.selectOnFocus;return B`<div class="ueb-pin-input"><ueb-input .singleLine="${e}" .selectOnFocus="${t}" .innerText="${Wt.stringFromUEToInput(this.element.entity.DefaultValue.toString())}"></ueb-input></div>`}}class Yt extends Wt{static singleLineInput=!0;setInputs(e=[],t=!1){if(e&&0!=e.length||(e=[this.getInput()]),super.setInputs(e,!1),t){let i=[];for(const n of e){let e=parseFloat(n);isNaN(e)&&(e=0,t=!1),i.push(e)}this.setDefaultValue(i,e)}}setDefaultValue(e=[],t){this.element.setDefaultValue(e[0])}}class qt extends Yt{setDefaultValue(e=[],t=e){this.element.getDefaultValue(!0).value=e[0],this.inputContentElements[0].innerText=this.element.getDefaultValue()?.toString(),this.element.requestUpdate()}renderInput(){return B`<div class="ueb-pin-input"><ueb-input .singleLine="${!0}" .innerText="${this.element.getDefaultValue()?.toString()??"0"}"></ueb-input></div>`}}class Kt extends qt{setInputs(e=[],t=!1){if(e&&0!=e.length||(e=[this.getInput()]),super.setInputs(e,!1),t){if(!e[0].match(/[\-\+]?[0-9]+/))return;const t=[BigInt(e[0])];this.setDefaultValue(t,e)}}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Zt=1;class Jt{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,i){this._$Ct=e,this._$AM=t,this._$Ci=i}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}}
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Qt=(e=>(...t)=>({_$litDirective$:e,values:t}))(class extends Jt{constructor(e){var t;if(super(e),e.type!==Zt||"style"!==e.name||(null===(t=e.strings)||void 0===t?void 0:t.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(e){return Object.keys(e).reduce(((t,i)=>{const n=e[i];return null==n?t:t+`${i=i.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${n};`}),"")}update(e,[t]){const{style:i}=e.element;if(void 0===this.vt){this.vt=new Set;for(const e in t)this.vt.add(e);return this.render(t)}this.vt.forEach((e=>{null==t[e]&&(this.vt.delete(e),e.includes("-")?i.removeProperty(e):i[e]="")}));for(const e in t){const n=t[e];null!=n&&(this.vt.add(e),e.includes("-")?i.setProperty(e,n):i[e]=n)}return H}});class ei extends vt{toggleAdvancedDisplayHandler;getDraggableElement(){return this.element.querySelector(".ueb-window-top")}createDraggableObject(){return new mt(this.element,this.blueprint,{draggableElement:this.getDraggableElement(),ignoreScale:!0,ignoreTranslateCompensate:!1,movementSpace:this.blueprint,stepSize:1})}render(){return B`<div class="ueb-window"><div class="ueb-window-top"><div class="ueb-window-name ueb-ellipsis-nowrap-text">${this.renderWindowName()}</div><div class="ueb-window-close" @click="${()=>this.element.remove()}">${te.close}</div></div><div class="ueb-window-content">${this.renderContent()}</div></div>`}renderWindowName(){return B`Window`}renderContent(){return B``}apply(){this.element.dispatchEvent(new CustomEvent(re.windowApplyEventName)),this.element.remove()}cancel(){this.element.dispatchEvent(new CustomEvent(re.windowCancelEventName)),this.element.remove()}}class ti extends ei{#Be;#He;#Oe;#ze;#Ve;#Ie;#Re;#_e;#Fe;#Ge;#je=e=>{const t=se.clearHTMLWhitespace(e.target.innerHTML),i=parseInt(t,16);isNaN(i)||(this.color.setFromRGBANumber(i),this.element.requestUpdate())};#Ue=e=>{const t=se.clearHTMLWhitespace(e.target.innerHTML),i=parseInt(t,16);isNaN(i)||(this.color.setFromSRGBANumber(i),this.element.requestUpdate())};#Xe=e=>t=>{"Enter"==t.code&&(t.preventDefault(),e(t))};#re=new ye;get color(){return this.#re}set color(e){e.toNumber()!=this.color?.toNumber()&&(this.element.requestUpdate("color",this.#re),this.#re=e)}#We=new ye;get fullColor(){return this.#We}#Ye;get initialColor(){return this.#Ye}#qe=new ye;#Ke(e,t,i=!1){const n=this.color.toRGBAString(),s=`${n.substring(0,2*e)}${t}${n.substring(2+2*e)}`;return i?`${s.substring(0,6)}FF`:s}initialize(e){super.initialize(e),this.#Ye=this.element.windowOptions.getPinColor(),this.color.setFromHSVA(this.initialColor.H.value,this.initialColor.S.value,this.initialColor.V.value,this.initialColor.A.value),this.fullColor.setFromHSVA(this.color.H.value,1,1,1)}firstUpdated(e){this.#Be=this.element.querySelector(".ueb-color-picker-wheel ueb-color-handler"),this.#He=this.element.querySelector(".ueb-color-picker-saturation ueb-ui-slider"),this.#Oe=this.element.querySelector(".ueb-color-picker-value ueb-ui-slider"),this.#ze=this.element.querySelector(".ueb-color-picker-r ueb-ui-slider"),this.#Ve=this.element.querySelector(".ueb-color-picker-g ueb-ui-slider"),this.#Ie=this.element.querySelector(".ueb-color-picker-b ueb-ui-slider"),this.#Re=this.element.querySelector(".ueb-color-picker-a ueb-ui-slider"),this.#_e=this.element.querySelector(".ueb-color-picker-h ueb-ui-slider"),this.#Fe=this.element.querySelector(".ueb-color-picker-s ueb-ui-slider"),this.#Ge=this.element.querySelector(".ueb-color-picker-v ueb-ui-slider"),this.#Be.template.locationChangeCallback=(e,t)=>{this.color.setFromWheelLocation(e,t,this.color.V.value,this.color.A.value),this.fullColor.setFromHSVA(this.color.H.value,1,1,1),this.element.requestUpdate()},this.#He.template.locationChangeCallback=(e,t)=>{this.color.setFromHSVA(this.color.H.value,t,this.color.V.value,this.color.A.value),this.element.requestUpdate()},this.#Oe.template.locationChangeCallback=(e,t)=>{this.color.setFromHSVA(this.color.H.value,this.color.S.value,t,this.color.A.value),this.element.requestUpdate()},this.#ze.template.locationChangeCallback=(e,t)=>{this.color.setFromRGBA(e,this.color.G.value,this.color.B.value,this.color.A.value),this.element.requestUpdate()},this.#Ve.template.locationChangeCallback=(e,t)=>{this.color.setFromRGBA(this.color.R.value,e,this.color.B.value,this.color.A.value),this.element.requestUpdate()},this.#Ie.template.locationChangeCallback=(e,t)=>{this.color.setFromRGBA(this.color.R.value,this.color.G.value,e,this.color.A.value),this.element.requestUpdate()},this.#Re.template.locationChangeCallback=(e,t)=>{this.color.setFromRGBA(this.color.R.value,this.color.G.value,this.color.B.value,e),this.element.requestUpdate()},this.#_e.template.locationChangeCallback=(e,t)=>{this.color.setFromHSVA(e,this.color.S.value,this.color.V.value,this.color.A.value),this.element.requestUpdate()},this.#Fe.template.locationChangeCallback=(e,t)=>{this.color.setFromHSVA(this.color.H.value,e,this.color.V.value,this.color.A.value),this.element.requestUpdate()},this.#Ge.template.locationChangeCallback=(e,t)=>{this.color.setFromHSVA(this.color.H.value,this.color.S.value,e,this.color.A.value),this.element.requestUpdate()}}renderSlider(e){let t="",i=0,n="";const s=e=>`linear-gradient(to right, #${this.#Ke(e,"00",!0)}, #${this.#Ke(e,"ff",!0)})`;switch(e){case 0:t="r",i=this.color.R.value,n=s(e);break;case 1:t="g",i=this.color.G.value,n=s(e);break;case 2:t="b",i=this.color.B.value,n=s(e);break;case 3:t="a",i=this.color.A.value,n=`${re.alphaPattern}, ${s(e)}`;break;case 4:t="h",i=360*this.color.H.value,n="linear-gradient(to right, #f00 0%, #ff0 16.666%, #0f0 33.333%, #0ff 50%, #00f 66.666%, #f0f 83.333%, #f00 100%)";break;case 5:t="s",i=this.color.S.value,n=`linear-gradient(to right,#${this.#qe.setFromHSVA(this.color.H.value,0,this.color.V.value,1),this.#qe.toRGBAString()},#${this.#qe.setFromHSVA(this.color.H.value,1,this.color.V.value,1),this.#qe.toRGBAString()})`;break;case 6:t="v",i=this.color.V.value,n=`linear-gradient(to right, #000, #${this.fullColor.toRGBAString()})`}return n=`background: ${n};`,B`<div class="ueb-color-picker-${t.toLowerCase()}"><span class="ueb-color-control-label">${t.toUpperCase()}</span><div><div class="ueb-horizontal-slider"><span class="ueb-horizontal-slider-text" .innerText="${se.minDecimals(se.roundDecimals(i,3))}"></span><ueb-ui-slider></ueb-ui-slider></div><div class="ueb-color-picker-gradient" style="${n}"></div></div></div>`}renderContent(){const e=2*this.color.H.value*Math.PI,t={"--ueb-color-r":this.color.R.toString(),"--ueb-color-g":this.color.G.toString(),"--ueb-color-b":this.color.B.toString(),"--ueb-color-a":this.color.A.toString(),"--ueb-color-h":this.color.H.toString(),"--ueb-color-s":this.color.S.toString(),"--ueb-color-v":this.color.V.toString(),"--ueb-color-wheel-x":100*(this.color.S.value*Math.cos(e)*.5+.5)+"%","--ueb-color-wheel-y":100*(this.color.S.value*Math.sin(e)*.5+.5)+"%"},i=this.color.toRGBAString(),n=this.color.toSRGBAString(),s=this.fullColor.toRGBAString();return B`<div class="ueb-color-picker" style="${Qt(t)}"><div class="ueb-color-picker-toolbar"><div class="ueb-color-picker-theme"></div><div class="ueb-color-picker-srgb"></div></div><div class="ueb-color-picker-main"><div class="ueb-color-picker-wheel"><ueb-color-handler></ueb-color-handler></div><div class="ueb-color-picker-saturation ueb-vertical-slider" style="background-color:#${s}"><ueb-ui-slider></ueb-ui-slider></div><div class="ueb-color-picker-value ueb-vertical-slider" style="background-color:#${s}"><ueb-ui-slider></ueb-ui-slider></div><div class="ueb-color-picker-preview">Old<div class="ueb-color-picker-preview-old" style="background:#${this.#Ye.toRGBAString()}"></div><div class="ueb-color-picker-preview-new"><div class="ueb-color-picker-preview-1" style="background:#${this.#Ke(3,"FF")}"></div><div class="ueb-color-picker-preview-2" style="background:${`linear-gradient(#${i}, #${i}),${re.alphaPattern}`}"></div></div>New</div></div><div class="ueb-color-picker-advanced-toggle ueb-toggle-control">Advanced</div><div class="ueb-color-picker-advanced"><div class="ueb-color-picker-column">${this.renderSlider(0)} ${this.renderSlider(1)} ${this.renderSlider(2)} ${this.renderSlider(3)}</div><div class="ueb-color-picker-column">${this.renderSlider(4)} ${this.renderSlider(5)} ${this.renderSlider(6)}<div class="ueb-color-control"><span class="ueb-color-control-label">Hex Linear</span><div class="ueb-color-picker-hex-linear ueb-text-input"><ueb-input .innerText="${i}" @focusout="${this.#je}" @keydown="${this.#Xe(this.#je)}"></ueb-input></div></div><div class="ueb-color-control"><span class="ueb-color-control-label">Hex sRGB</span><div class="ueb-color-picker-hex-srgb ueb-text-input"><ueb-input .innerText="${n}" @focusout="${this.#Ue}" @keydown="${this.#Xe(this.#Ue)}"></ueb-input></div></div></div></div><div class="ueb-buttons"><div class="ueb-color-picker-ok ueb-button" @click="${()=>this.apply()}">OK</div><div class="ueb-color-picker-cancel ueb-button" @click="${()=>this.cancel()}">Cancel</div></div></div>`}renderWindowName(){return B`Color Picker`}}class ii extends Nt{#Ze;#Je=e=>{e.preventDefault(),this.blueprint.setFocused(!0),this.#Ze=nt.getConstructor("ueb-window").newObject({type:new ti,windowOptions:{getPinColor:()=>this.element.defaultValue,setPinColor:e=>this.element.setDefaultValue(e)}}),this.blueprint.append(this.#Ze);const t=()=>{this.element.setDefaultValue(this.#Ze.template.color)},i=()=>{this.#Ze.removeEventListener(re.windowApplyEventName,t),this.#Ze.removeEventListener(re.windowCloseEventName,i),this.#Ze=null};this.#Ze.addEventListener(re.windowApplyEventName,t),this.#Ze.addEventListener(re.windowCloseEventName,i)};renderInput(){return B`<span class="ueb-pin-input" data-linear-color="${this.element.defaultValue.toString()}" @click="${this.#Je}" style="--ueb-linear-color:rgba(${this.element.defaultValue.toString()})"></span>`}}class ni extends Wt{static singleLineInput=!0}class si extends Yt{setDefaultValue(e=[],t=e){this.element.setDefaultValue(e[0])}renderInput(){return B`<div class="ueb-pin-input"><ueb-input .singleLine="${!0}" .innerText="${Wt.stringFromUEToInput(se.minDecimals(this.element.getDefaultValue()??0))}"></ueb-input></div>`}}class ri extends Nt{renderIcon(){return te.referencePin}}class ai extends Yt{#Qe(){return Wt.stringFromUEToInput(se.minDecimals(this.element.getDefaultValue()?.R??0))}#et(){return Wt.stringFromUEToInput(se.minDecimals(this.element.getDefaultValue()?.P??0))}#tt(){return Wt.stringFromUEToInput(se.minDecimals(this.element.getDefaultValue()?.Y??0))}setDefaultValue(e=[],t=e){const i=this.element.getDefaultValue(!0);if(!(i instanceof ke))throw new TypeError("Expected DefaultValue to be a RotatorEntity");i.R=e[0],i.P=e[1],i.Y=e[2],this.element.requestUpdate("DefaultValue",i)}renderInput(){return B`<div class="ueb-pin-input-wrapper"><span class="ueb-pin-input-label">X</span><div class="ueb-pin-input"><ueb-input .singleLine="${!0}" .innerText="${this.#Qe()}"></ueb-input></div><span class="ueb-pin-input-label">Y</span><div class="ueb-pin-input"><ueb-input .singleLine="${!0}" .innerText="${this.#et()}"></ueb-input></div><span class="ueb-pin-input-label">Z</span><div class="ueb-pin-input"><ueb-input .singleLine="${!0}" .innerText="${this.#tt()}"></ueb-input></div></div>`}}class oi extends Wt{}class li extends Yt{#it(){return Wt.stringFromUEToInput(se.minDecimals(this.element.getDefaultValue()?.X??0))}#tt(){return Wt.stringFromUEToInput(se.minDecimals(this.element.getDefaultValue()?.Y??0))}setDefaultValue(e,t){const i=this.element.getDefaultValue(!0);if(!(i instanceof Le))throw new TypeError("Expected DefaultValue to be a Vector2DEntity");i.X=e[0],i.Y=e[1],this.element.requestUpdate("DefaultValue",i)}renderInput(){return B`<div class="ueb-pin-input-wrapper"><span class="ueb-pin-input-label">X</span><div class="ueb-pin-input"><ueb-input .singleLine="${!0}" .innerText="${this.#it()}"></ueb-input></div><span class="ueb-pin-input-label">Y</span><div class="ueb-pin-input"><ueb-input .singleLine="${!0}" .innerText="${this.#tt()}"></ueb-input></div></div>`}}class ui extends Yt{#it(){return Wt.stringFromUEToInput(se.minDecimals(this.element.getDefaultValue()?.X??0))}#tt(){return Wt.stringFromUEToInput(se.minDecimals(this.element.getDefaultValue()?.Y??0))}#nt(){return Wt.stringFromUEToInput(se.minDecimals(this.element.getDefaultValue()?.Z??0))}setDefaultValue(e,t){const i=this.element.getDefaultValue(!0);if(!(i instanceof Te))throw new TypeError("Expected DefaultValue to be a VectorEntity");i.X=e[0],i.Y=e[1],i.Z=e[2],this.element.requestUpdate("DefaultValue",i)}renderInput(){return B`<div class="ueb-pin-input-wrapper"><span class="ueb-pin-input-label">X</span><div class="ueb-pin-input"><ueb-input .singleLine="${!0}" .innerText="${this.#it()}"></ueb-input></div><span class="ueb-pin-input-label">Y</span><div class="ueb-pin-input"><ueb-input .singleLine="${!0}" .innerText="${this.#tt()}"></ueb-input></div><span class="ueb-pin-input-label">Z</span><div class="ueb-pin-input"><ueb-input .singleLine="${!0}" .innerText="${this.#nt()}"></ueb-input></div></div>`}}class ci extends Je{static#st={"/Script/CoreUObject.LinearColor":ii,"/Script/CoreUObject.Rotator":ai,"/Script/CoreUObject.Vector":ui,"/Script/CoreUObject.Vector2D":li,bool:Ut,byte:qt,int:qt,int64:Kt,MUTABLE_REFERENCE:ri,name:ni,real:si,string:oi};static properties={pinId:{type:pe,converter:{fromAttribute:(e,t)=>e?_e.grammar.Guid.parse(e).value:null,toAttribute:(e,t)=>e?.toString()},attribute:"data-id",reflect:!0},pinType:{type:String,attribute:"data-type",reflect:!0},advancedView:{type:String,attribute:"data-advanced-view",reflect:!0},color:{type:ye,converter:{fromAttribute:(e,t)=>e?_e.grammar.LinearColorFromAnyColor.parse(e).value:null,toAttribute:(e,t)=>e?se.printLinearColor(e):null},attribute:"data-color",reflect:!0},defaultValue:{type:String,attribute:!1},isLinked:{type:Boolean,converter:se.booleanConverter,attribute:"data-linked",reflect:!0},pinDirection:{type:String,attribute:"data-direction",reflect:!0}};nodeElement;static getTypeTemplate(e){if(e.PinType.bIsReference&&!e.PinType.bIsConst)return ci.#st.MUTABLE_REFERENCE;if("exec"===e.getType())return Xt;let t;return e.isInput()&&(t=ci.#st[e.getType()]),t??Nt}static newObject(e=new Me,t=new(ci.getTypeTemplate(e)),i){const n=new ci;return n.initialize(e,t,i),n}initialize(e=new Me,t=new(ci.getTypeTemplate(e)),i){super.initialize(e,t),this.pinId=this.entity.PinId,this.pinType=this.entity.getType(),this.advancedView=this.entity.bAdvancedView,this.defaultValue=this.entity.getDefaultValue(),this.color=ci.properties.color.converter.fromAttribute(this.getColor().toString()),this.isLinked=!1,this.pinDirection=e.isInput()?"input":e.isOutput()?"output":"hidden",this.nodeElement=i}setup(){super.setup(),this.nodeElement=this.closest("ueb-node")}getPinId(){return this.entity.PinId}getPinName(){return this.entity.PinName}getPinDisplayName(){return this.entity.getDisplayName()}getColor(){return re.pinColor(this)}isInput(){return this.entity.isInput()}isOutput(){return this.entity.isOutput()}getLinkLocation(){return this.template.getLinkLocation()}getNodeElement(){return this.nodeElement}getLinks(){return this.entity.LinkedTo??[]}getDefaultValue(e=!1){return this.defaultValue=this.entity.getDefaultValue(e)}setDefaultValue(e){this.entity.DefaultValue=e,this.defaultValue=e}sanitizeLinks(e=[]){this.entity.LinkedTo=this.getLinks().filter((t=>{let i=this.blueprint.getPin(t);if(i){if(e.length&&!e.includes(i.nodeElement))return!1;let t=this.blueprint.getLink(this,i,!0);t||(t=nt.getConstructor("ueb-link").newObject(this,i),this.blueprint.addGraphElement(t))}return i})),this.isLinked=this.entity.isLinked()}linkTo(e){this.entity.linkTo(e.getNodeElement().getNodeName(),e.entity)&&(this.isLinked=this.entity.isLinked(),this.nodeElement?.template.linksChanged())}unlinkFrom(e){this.entity.unlinkFrom(e.getNodeElement().getNodeName(),e.entity)&&(this.isLinked=this.entity.isLinked(),this.nodeElement?.template.linksChanged())}redirectLink(e,t){const i=this.entity.LinkedTo.findIndex((t=>t.objectName.toString()==e.getNodeElement().getNodeName()&&t.pinGuid.valueOf()==e.entity.PinId.valueOf()));return i>=0&&(this.entity.LinkedTo[i]=t,!0)}}class hi{constructor(e=(e=>e),t=null){this.array=new Uint32Array(t),this.comparisonValueSupplier=e,this.length=0,this.currentPosition=0}get(e){return e>=0&&e<this.length?this.array[e]:null}getArray(){return this.array}getPosition(e){let t=0,i=this.length;for(;t<i;){let n=Math.floor((t+i)/2);this.comparisonValueSupplier(this.array[n])<e?t=n+1:i=n}return t}reserve(e){if(this.array.length<e){let t=new Uint32Array(e);t.set(this.array),this.array=t}}insert(e,t=null){let i=this.getPosition(this.comparisonValueSupplier(e));return(i<this.currentPosition||null!=t&&i==this.currentPosition&&this.comparisonValueSupplier(e)<t)&&++this.currentPosition,this.shiftRight(i),this.array[i]=e,++this.length,i}remove(e){let t=this.getPosition(this.comparisonValueSupplier(e));this.array[t]==e&&this.removeAt(t)}removeAt(e){return e<this.currentPosition&&--this.currentPosition,this.shiftLeft(e),--this.length,e}getNext(){return this.currentPosition>=0&&this.currentPosition<this.length?this.get(this.currentPosition):null}getNextValue(){return this.currentPosition>=0&&this.currentPosition<this.length?this.comparisonValueSupplier(this.get(this.currentPosition)):Number.MAX_SAFE_INTEGER}getPrev(){return this.currentPosition>0?this.get(this.currentPosition-1):null}getPrevValue(){return this.currentPosition>0?this.comparisonValueSupplier(this.get(this.currentPosition-1)):Number.MIN_SAFE_INTEGER}shiftLeft(e,t=1){this.array.set(this.array.subarray(e+t),e)}shiftRight(e,t=1){this.array.set(this.array.subarray(e,-t),e+t)}}class di{constructor(e,t,i,n){this.initialPosition=e,this.finalPosition=e,this.metadata=new Array(t.length),this.primaryOrder=new hi((e=>this.metadata[e].primaryBoundary)),this.secondaryOrder=new hi((e=>this.metadata[e].secondaryBoundary)),this.selectFunc=n,this.rectangles=t,this.primaryOrder.reserve(this.rectangles.length),this.secondaryOrder.reserve(this.rectangles.length),t.forEach(((e,t)=>{let s={primaryBoundary:this.initialPosition[0],secondaryBoundary:this.initialPosition[1],rectangle:t,onSecondaryAxis:!1};this.metadata[t]=s,n(e,!1);const r=i(e);this.initialPosition[1]<r.secondaryInf?s.secondaryBoundary=r.secondaryInf:r.secondarySup<this.initialPosition[1]?s.secondaryBoundary=r.secondarySup:s.onSecondaryAxis=!0,this.initialPosition[0]<r.primaryInf?(s.primaryBoundary=r.primaryInf,this.primaryOrder.insert(t)):r.primarySup<this.initialPosition[0]?(s.primaryBoundary=r.primarySup,this.primaryOrder.insert(t)):r.secondarySup<this.initialPosition[1]||this.initialPosition[1]<r.secondaryInf?this.secondaryOrder.insert(t):n(e,!0)})),this.primaryOrder.currentPosition=this.primaryOrder.getPosition(this.initialPosition[0]),this.secondaryOrder.currentPosition=this.secondaryOrder.getPosition(this.initialPosition[1]),this.computeBoundaries()}computeBoundaries(){this.boundaries={primaryN:{v:this.primaryOrder.getPrevValue(),i:this.primaryOrder.getPrev()},primaryP:{v:this.primaryOrder.getNextValue(),i:this.primaryOrder.getNext()},secondaryN:{v:this.secondaryOrder.getPrevValue(),i:this.secondaryOrder.getPrev()},secondaryP:{v:this.secondaryOrder.getNextValue(),i:this.secondaryOrder.getNext()}}}selectTo(e){const t=[Math.sign(e[0]-this.initialPosition[0]),Math.sign(e[1]-this.initialPosition[1])],i=(i,n)=>{if(this.metadata[i].onSecondaryAxis)this.selectFunc(this.rectangles[i],n);else if(n){this.secondaryOrder.insert(i,e[1]);const n=this.metadata[i].secondaryBoundary;Math.sign(e[1]-n)==t[1]&&Math.sign(n-this.initialPosition[1])==t[1]&&this.selectFunc(this.rectangles[i],!0)}else this.selectFunc(this.rectangles[i],!1),this.secondaryOrder.remove(i);this.computeBoundaries(),this.selectTo(e)};e[0]<this.boundaries.primaryN.v?(--this.primaryOrder.currentPosition,i(this.boundaries.primaryN.i,this.initialPosition[0]>this.boundaries.primaryN.v&&e[0]<this.initialPosition[0])):e[0]>this.boundaries.primaryP.v&&(++this.primaryOrder.currentPosition,i(this.boundaries.primaryP.i,this.initialPosition[0]<this.boundaries.primaryP.v&&this.initialPosition[0]<e[0]));const n=(t,i)=>{this.selectFunc(this.rectangles[t],i),this.computeBoundaries(),this.selectTo(e)};e[1]<this.boundaries.secondaryN.v?(--this.secondaryOrder.currentPosition,n(this.boundaries.secondaryN.i,this.initialPosition[1]>this.boundaries.secondaryN.v&&e[1]<this.initialPosition[1])):e[1]>this.boundaries.secondaryP.v&&(++this.secondaryOrder.currentPosition,n(this.boundaries.secondaryP.i,this.initialPosition[1]<this.boundaries.secondaryP.v&&this.initialPosition[1]<e[1])),this.finalPosition=e}}class pi extends ut{}class mi extends lt{selectionModel=null;constructor(){super(),super.initialize({},new pi)}static newObject(){return new mi}initialize(){}beginSelect(e){const t=this.blueprint.constructor;this.blueprint.selecting=!0,this.setBothLocations(e),this.selectionModel=new di(e,this.blueprint.getNodes(),t.nodeBoundariesSupplier,t.nodeSelectToggleFunction)}selectTo(e){this.selectionModel.selectTo(e),this.toX=e[0],this.toY=e[1]}endSelect(){this.blueprint.selecting=!1,this.selectionModel=null,this.fromX=0,this.fromY=0,this.toX=0,this.toY=0}}class gi extends Qe{static#rt={window:ei,"color-picker":ti};static properties={...Qe.properties,type:{type:ei,attribute:"data-type",reflect:!0,converter:{fromAttribute:(e,t)=>gi.#rt[e],toAttribute:(e,t)=>Object.entries(gi.#rt).find((([t,i])=>e.constructor===i))?.[0]}}};static newObject(e={},t=e.type??new ei){const i=new gi;return i.initialize(e,t),i}initialize(e={},t=e.type??new ei){e.windowOptions??={},this.type=e.type,this.windowOptions=e.windowOptions,super.initialize(e,t)}setup(){super.setup(),this.locationX=this.blueprint.mousePosition[0],this.locationY=this.blueprint.mousePosition[1]}cleanup(){super.cleanup(),this.acknowledgeClose()}acknowledgeClose(){let e=new CustomEvent(re.windowCloseEventName);this.dispatchEvent(e)}}class bi extends _e{constructor(e,t,i,n,s,r,a){e=e??(e=>`(${e})`),super(t,i,n,s,r,a),this.wrap=e}read(e){const t=Re.getGrammarForType(_e.grammar,this.entityType).parse(e);if(!t.status)throw new Error(`Error when trying to parse the entity ${this.entityType.prototype.constructor.name}.`);return t.value}write(e,t,i=!1){return this.wrap(this.subWrite(e,[],t,i),t)}}class vi extends bi{#at;constructor(e,t){super(void 0,t),this.#at=e}write(e,t,i=!1){return this.#at(t,i)}}class fi extends bi{constructor(e){super(void 0,e)}write(e,t,i){return i||t.constructor!==String?se.escapeString(t.toString()):`"${se.escapeString(t.toString())}"`}}!function(){const e=e=>`(${e})`;oe.registerSerializer(null,new vi(((e,t)=>"()"),null)),oe.registerSerializer(Array,new vi(((e,t)=>`(${e.map((e=>oe.getSerializer(se.getType(e)).serialize(e,t)+",")).join("")})`),Array)),oe.registerSerializer(BigInt,new fi(BigInt)),oe.registerSerializer(Boolean,new vi(((e,t)=>e?t?"true":"True":t?"false":"False"),Boolean)),oe.registerSerializer(ce,new fi(ce)),oe.registerSerializer(de,new bi(e,de)),oe.registerSerializer(pe,new fi(pe)),oe.registerSerializer(me,new fi(me)),oe.registerSerializer(ge,new fi(ge)),oe.registerSerializer(ue,new fi(ue)),oe.registerSerializer(be,new bi((e=>`${be.lookbehind}(${e})`),be,"",", ",!1,"",(e=>""))),oe.registerSerializer(ve,new bi(e,ve)),oe.registerSerializer(ye,new bi(e,ye)),oe.registerSerializer(we,new bi((e=>`${we.lookbehind}(${e})`),we,"",", ",!1,"",(e=>""))),oe.registerSerializer(Ee,new bi(e,Ee)),oe.registerSerializer(Number,new fi(Number)),oe.registerSerializer(Be,new Fe),oe.registerSerializer(he,new vi((e=>(e.type??"")+(e.path?e.type?`'"${e.path}"'`:`"${e.path}"`:"")),he)),oe.registerSerializer(Se,new fi(Se)),oe.registerSerializer(Me,new bi((e=>`${Me.lookbehind} (${e})`),Me,"",",",!0)),oe.registerSerializer(Ce,new bi((e=>e),Ce,""," ",!1,"",(e=>""))),oe.registerSerializer(Pe,new bi(e,Pe)),oe.registerSerializer(fe,new fi(fe)),oe.registerSerializer(ke,new bi(e,ke)),oe.registerSerializer(String,new vi(((e,t)=>t?se.escapeString(e):`"${se.escapeString(e)}"`),String)),oe.registerSerializer(xe,new vi(((e,t)=>`${e.P}, ${e.Y}, ${e.R}`),xe)),oe.registerSerializer(Ne,new vi(((e,t)=>`${e.X}, ${e.Y}`),Ne)),oe.registerSerializer(Ae,new vi(((e,t)=>`${e.X}, ${e.Y}, ${e.Z}`),Ae)),oe.registerSerializer($e,new fi($e)),oe.registerSerializer(Ve,new bi(((e,t)=>`${t.lookbehind??""}(${e})`),Ve)),oe.registerSerializer(De,new bi(e,De)),oe.registerSerializer(Le,new bi(e,Le)),oe.registerSerializer(Te,new bi(e,Te))}(),customElements.define("ueb-color-handler",It),nt.registerElement("ueb-color-handler",It),customElements.define("ueb-input",Gt),nt.registerElement("ueb-input",Gt),customElements.define("ueb-link",pt),nt.registerElement("ueb-link",pt),customElements.define("ueb-node",Bt),nt.registerElement("ueb-node",Bt),customElements.define("ueb-pin",ci),nt.registerElement("ueb-pin",ci),customElements.define("ueb-selector",mi),nt.registerElement("ueb-selector",mi),customElements.define("ueb-ui-slider",_t),nt.registerElement("ueb-ui-slider",_t),customElements.define("ueb-window",gi),nt.registerElement("ueb-window",gi);export{Ht as Blueprint,re as Configuration,pt as LinkElement,Bt as NodeElement,se as Utility};
